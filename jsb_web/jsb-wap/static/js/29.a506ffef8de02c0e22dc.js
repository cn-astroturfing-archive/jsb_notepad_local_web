(window.webpackJsonp=window.webpackJsonp||[]).push([[29],{"/fmy":function(e,t,a){"use strict";var i=a("WXo7"),n=a("1IqJ");e.exports=function(e,t,a){t in e?i.f(e,t,n(0,a)):e[t]=a}},"0vxs":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=l(a("cLjf")),n=l(a("unDg")),s=l(a("bS4n")),r=l(a("hDQ3")),c=l(a("tI4l")),o=l(a("7Qib"));function l(e){return e&&e.__esModule?e:{default:e}}t.default={data:function(){for(var e={},t=c.default.feedbackQuestionType.length,a=0;a<t;a++)e["qt_"+c.default.feedbackQuestionType[a].value]=c.default.feedbackQuestionType[a];return{questionTypeSelectPannel:{show:!1,questionTypeActions:c.default.feedbackQuestionType.map((function(e){return{name:e.label,value:e.value}}))},activeName:"unhandle",dataType:{unhandle:{api:this.$api.base.myFeedbackList,query:{status:0,pageNo:0,pageSize:10},dataList:[],scroller:"my_scroller0",listWrap:"list-wrap0"},handled:{api:this.$api.base.myFeedbackList,query:{status:1,pageNo:0,pageSize:10},dataList:[],scroller:"my_scroller1",listWrap:"list-wrap1"},canceled:{api:this.$api.base.myFeedbackList,query:{status:3,pageNo:0,pageSize:10},dataList:[],scroller:"my_scroller3",listWrap:"list-wrap3"}},timer:null,questionTypeCache:e}},computed:{activeTarget:function(){return this.dataType[this.activeName]}},activated:function(){var e=this;o.default.isNoCache(this.$route)?this.reset():setTimeout((function(){var t=e.$refs[e.activeTarget.scroller];t.scrollTo(t.position.left,t.position.top,!0)}),0)},deactivated:function(){var e=this.$refs[this.activeTarget.scroller];e.position=e.getPosition()},beforeDestory:function(){this.timer&&clearInterval(this.timer)},filters:{formatFeedbackContent:function(e){e=(e=e.replace(/<img[^>]+>/g,"[图片]")).replace(/<iframe class="ql-video" [^>]+><\/iframe>/g,"[视频]");var t=o.default.getPlainText(e);return t?t.length>50?t.substring(0,50):t:"未能提取预览内容"},formatQuestionType:function(e){for(var t=c.default.feedbackQuestionType.length,a=0;a<t;a++)if(c.default.feedbackQuestionType[a].value==e)return c.default.feedbackQuestionType[a].label;return""}},methods:{reset:function(){this.$refs[this.activeTarget.scroller].triggerPullToRefresh()},onClickLeft:function(){this.$router.go(-1)},getListData:function(e){var t=this;return(0,r.default)(i.default.mark((function a(){var r,c,o,l,u,f,d;return i.default.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return r=++t.activeTarget.query.pageNo,a.next=3,t.activeTarget.api((0,s.default)({isLoad:!1},t.activeTarget.query));case 3:for(c=a.sent,o=c.data.list,e(),l=o.length,u=0;u<l;u++)(f=t.questionTypeCache["qt_"+o[u].questionType])&&(o[u].questionTypeText=f.label,o[u].questionTypeIcon=f.icon);1==r?t.activeTarget.dataList=o:(d=t.activeTarget.dataList).push.apply(d,(0,n.default)(o)),o.length<1&&t.$refs[t.activeTarget.scroller].finishInfinite(!0);case 10:case"end":return a.stop()}}),a,t)})))()},refresh:function(e){var t=this;return(0,r.default)(i.default.mark((function a(){return i.default.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:t.activeTarget.query.pageNo=0,t.$refs[t.activeTarget.scroller].finishInfinite(!1),t.getListData(e);case 3:case"end":return a.stop()}}),a,t)})))()},infinite:function(e){var t=this;return(0,r.default)(i.default.mark((function a(){return i.default.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:t.getListData(e);case 1:case"end":return a.stop()}}),a,t)})))()},rendered:function(){var e=this.$refs.tabs.$el,t=e.querySelector(".van-tabs__wrap"),a=this.$refs[this.activeTarget.listWrap],i=e.offsetHeight-t.offsetHeight;a.style.height=i+"px"},toDetail:function(e){this.$router.push({name:"FeedbackDetail",query:{id:e}})},goPublishArticle:function(e){this.$router.push({name:"ArticlePublish",query:{columnId:e}})},goStatistics:function(e){this.$router.push({name:"SpecialColumnStatistics",query:{id:e}})},selectQuestionType:function(e){this.$router.push({name:"FeedbackAdd",query:{questionType:e.value,questionTypeText:e.name}})},go2NewFeedback:function(){this.$router.push({name:"FeedbackAdd",query:{questionType:2,questionTypeText:"APP使用体验问题与建议"}})}}}},LD0F:function(e,t,a){"use strict";var i=a("copg"),n=a("fCtq"),s=a("MhL/"),r=a("QGqC"),c=a("W6+j"),o=a("+GGc"),l=a("/fmy"),u=a("rMDH");n(n.S+n.F*!a("FwU0")((function(e){Array.from(e)})),"Array",{from:function(e){var t,a,n,f,d=s(e),p="function"==typeof this?this:Array,v=arguments.length,h=v>1?arguments[1]:void 0,y=void 0!==h,_=0,m=u(d);if(y&&(h=i(h,v>2?arguments[2]:void 0,2)),null==m||p==Array&&c(m))for(a=new p(t=o(d.length));t>_;_++)l(a,_,y?h(d[_],_):d[_]);else for(f=m.call(d),a=new p;!(n=f.next()).done;_++)l(a,_,y?r(f,h,[n.value,_],!0):n.value);return a.length=_,a}})},LGhb:function(e,t,a){e.exports={default:a("z/Td"),__esModule:!0}},OyPa:function(e,t,a){"use strict";a.d(t,"a",(function(){return i})),a.d(t,"b",(function(){return n}));var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"feedback_list_div"},[t("van-nav-bar",{attrs:{title:e.$route.meta.title,"left-arrow":"",fixed:""},on:{"click-left":e.onClickLeft}}),e._v(" "),t("van-tabs",{ref:"tabs",on:{rendered:e.rendered},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[t("van-tab",{attrs:{title:"处理中",name:"unhandle"}},[t("div",{ref:"list-wrap0",staticClass:"list-wrap"},[t("scroller",{ref:"my_scroller0",attrs:{"on-refresh":e.refresh,"on-infinite":e.infinite}},[t("div",{staticClass:"column-list"},e._l(e.dataType.unhandle.dataList,(function(a){return t("div",{staticClass:"column-item",on:{click:function(t){return e.toDetail(a.id)}}},[t("div",{staticClass:"question_type_time"},[t("div",{staticClass:"question_type"},[a.unreadFlag?t("span",{staticClass:"blinking"},[e._v("有回复！")]):t("span",{staticClass:"question_type_icon_text"},[t("img",{attrs:{src:a.questionTypeIcon}}),e._v(" "+e._s(a.questionTypeText)+"\n                  ")])]),e._v(" "),t("div",{staticClass:"feedback_time"},[e._v("创建时间："+e._s(a.createTime.split(" ")[0]))])]),e._v(" "),t("div",{staticClass:"feedback_content"},[e._v(e._s(e._f("formatFeedbackContent")(a.feedback)))])])})),0)])],1)]),e._v(" "),t("van-tab",{attrs:{title:"已完成",name:"handled"}},[t("div",{ref:"list-wrap1",staticClass:"list-wrap"},[t("scroller",{ref:"my_scroller1",attrs:{"on-refresh":e.refresh,"on-infinite":e.infinite}},[t("div",{staticClass:"column-list"},e._l(e.dataType.handled.dataList,(function(a){return t("div",{staticClass:"column-item",on:{click:function(t){return e.toDetail(a.id)}}},[t("div",{staticClass:"question_type_time"},[t("div",{staticClass:"question_type"},[a.unreadFlag?t("span",{staticClass:"blinking"},[e._v("官方回复后您未查阅，系统自动关单！")]):t("span",{staticClass:"question_type_icon_text"},[t("img",{attrs:{src:a.questionTypeIcon}}),e._v(" "+e._s(a.questionTypeText)+"\n                    ")])]),e._v(" "),t("div",{staticClass:"feedback_time"},[e._v("创建时间："+e._s(a.createTime.split(" ")[0]))])]),e._v(" "),t("div",{staticClass:"feedback_content"},[e._v(e._s(e._f("formatFeedbackContent")(a.feedback)))])])})),0)])],1)]),e._v(" "),t("van-tab",{attrs:{title:"已取消",name:"canceled"}},[t("div",{ref:"list-wrap3",staticClass:"list-wrap"},[t("scroller",{ref:"my_scroller3",attrs:{"on-refresh":e.refresh,"on-infinite":e.infinite}},[t("div",{staticClass:"column-list"},e._l(e.dataType.canceled.dataList,(function(a){return t("div",{staticClass:"column-item",on:{click:function(t){return e.toDetail(a.id)}}},[t("div",{staticClass:"question_type_time"},[t("div",{staticClass:"question_type"},[t("span",{staticClass:"question_type_icon_text"},[t("img",{attrs:{src:a.questionTypeIcon}}),e._v(" "+e._s(a.questionTypeText)+"\n                    ")])]),e._v(" "),t("div",{staticClass:"feedback_time"},[e._v("创建时间："+e._s(a.createTime.split(" ")[0]))])]),e._v(" "),t("div",{staticClass:"feedback_content"},[e._v(e._s(e._f("formatFeedbackContent")(a.feedback)))])])})),0)])],1)])],1),e._v(" "),t("div",{staticClass:"bottom-btns",on:{click:e.go2NewFeedback}},[e._v("\n    新建反馈\n  ")]),e._v(" "),t("van-action-sheet",{attrs:{actions:e.questionTypeSelectPannel.questionTypeActions,"cancel-text":"取消","close-on-click-action":""},on:{select:e.selectQuestionType},model:{value:e.questionTypeSelectPannel.show,callback:function(t){e.$set(e.questionTypeSelectPannel,"show",t)},expression:"questionTypeSelectPannel.show"}})],1)},n=[]},"Q7y+":function(e,t,a){"use strict";a("eKWt")},eKWt:function(e,t,a){},"l/fx":function(e,t,a){"use strict";a.r(t);var i=a("0vxs"),n=a.n(i);for(var s in i)["default"].indexOf(s)<0&&function(e){a.d(t,e,(function(){return i[e]}))}(s);t.default=n.a},unDg:function(e,t,a){"use strict";t.__esModule=!0;var i,n=a("LGhb"),s=(i=n)&&i.__esModule?i:{default:i};t.default=function(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return(0,s.default)(e)}},"z/Td":function(e,t,a){a("h6RU"),a("LD0F"),e.exports=a("zpmP").Array.from},zhvs:function(e,t,a){"use strict";a.r(t);var i=a("OyPa"),n=a("l/fx");for(var s in n)["default"].indexOf(s)<0&&function(e){a.d(t,e,(function(){return n[e]}))}(s);a("Q7y+");var r=a("gp09"),c=Object(r.a)(n.default,i.a,i.b,!1,null,"677c9890",null);t.default=c.exports}}]);