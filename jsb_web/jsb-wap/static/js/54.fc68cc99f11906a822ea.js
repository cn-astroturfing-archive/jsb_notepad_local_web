(window.webpackJsonp=window.webpackJsonp||[]).push([[54],{"0G8n":function(t,e,n){"use strict";n("3oPU")},"3oPU":function(t,e,n){},CQKq:function(t,e,n){"use strict";n.r(e);var o=n("IZ30"),a=n.n(o);for(var r in o)["default"].indexOf(r)<0&&function(t){n.d(e,t,(function(){return o[t]}))}(r);e.default=a.a},Em08:function(t,e,n){"use strict";n.r(e);var o=n("HdJ/"),a=n("CQKq");for(var r in a)["default"].indexOf(r)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(r);n("0G8n");var s=n("gp09"),u=Object(s.a)(a.default,o.a,o.b,!1,null,null,null);e.default=u.exports},"HdJ/":function(t,e,n){"use strict";n.d(e,"a",(function(){return o})),n.d(e,"b",(function(){return a}));var o=function(){var t=this,e=t._self._c;return e("div",{staticClass:"first_set"},[e("van-nav-bar",{attrs:{title:t.$route.meta.title,fixed:""},on:{"click-left":t.onClickLeft}}),t._v(" "),e("van-form",{ref:"form"},[e("van-cell-group",[e("van-field",{attrs:{label:"密码",name:"newPassword",type:t.showPwd?"text":"password",placeholder:"请输入密码","input-align":"right",rules:[{required:!0,message:"密码不能为空"},{validator:t.validatorPassword,message:"密码必须包含大小写、数字、特殊符号(不是字母，数字，下划线的字符)，长度8位及以上"}]},scopedSlots:t._u([{key:"button",fn:function(){return[e("button",{staticClass:"btn_view_pwd",class:{active:t.showPwd},attrs:{type:"button"},on:{click:function(e){return t.toggleViewPwd("showPwd")}}})]},proxy:!0}]),model:{value:t.form.newPassword,callback:function(e){t.$set(t.form,"newPassword",e)},expression:"form.newPassword"}}),t._v(" "),e("van-field",{attrs:{label:"确认密码",name:"confirmPassword",type:t.showPwd2?"text":"password",placeholder:"请再次输入密码","input-align":"right",rules:[{required:!0,message:"密码不能为空"},{validator:t.validatorPwdEquals,message:"输入的密码不一致"}]},scopedSlots:t._u([{key:"button",fn:function(){return[e("button",{staticClass:"btn_view_pwd",class:{active:t.showPwd2},attrs:{type:"button"},on:{click:function(e){return t.toggleViewPwd("showPwd2")}}})]},proxy:!0}]),model:{value:t.form.confirmPassword,callback:function(e){t.$set(t.form,"confirmPassword",e)},expression:"form.confirmPassword"}}),t._v(" "),e("van-field",{attrs:{label:"昵称",placeholder:"请输入昵称",name:"newName","input-align":"right",rules:[{required:!0,message:"昵称不能为空"}]},model:{value:t.form.newName,callback:function(e){t.$set(t.form,"newName",e)},expression:"form.newName"}})],1),t._v(" "),e("p",{staticClass:"warn_tip"},[t._v("注意：不能设置具体单位、具体地址和真实姓名等信息!")]),t._v(" "),e("div",{staticClass:"bottom_btns"},[e("van-button",{attrs:{type:"info",block:"","native-type":"button"},on:{click:t.onSubmit}},[t._v("提交")])],1)],1)],1)},a=[]},IZ30:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=i(n("cLjf")),a=i(n("hDQ3")),r=i(n("bS4n")),s=n("dzbt"),u=i(n("7Qib"));function i(t){return t&&t.__esModule?t:{default:t}}e.default={data:function(){return{form:{newName:"",newPassword:"",confirmPassword:""},showPwd:!1,showPwd2:!1}},computed:(0,r.default)({},(0,s.mapState)(["userInfo"])),mounted:function(){0==this.userInfo.initFlag&&this.$router.push({name:"TasksHome",query:{type:1}})},methods:(0,r.default)({},(0,s.mapMutations)(["SET_USERINFO","RESET_STATE"]),{onClickLeft:function(){this.$router.go(-1)},validatorPwdEquals:function(t){return t===this.form.newPassword},validatorPassword:function(t){return new RegExp("^(?![A-Za-z0-9]+$)(?![a-z0-9\\W]+$)(?![A-Za-z\\W]+$)(?![A-Z0-9\\W]+$)[a-zA-Z0-9\\W]{8,}$").test(t)},toggleViewPwd:function(t){this[t]=!this[t]},onSubmit:function(){var t=this;return(0,a.default)(o.default.mark((function e(){var n,r,s,i;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.form,r=n.newName,s=n.confirmPassword,i=n.newPassword,t.$refs.form.validate(["newName","confirmPassword","newPassword"]).then((0,a.default)(o.default.mark((function e(){return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$api.user.finishInitConfig({name:r,pwd:u.default.rsaEncryptRetBase64DefaultPubKey(i),configmPwd:u.default.rsaEncryptRetBase64DefaultPubKey(s),encType:2});case 2:1==e.sent.code&&(t.userInfo.name=r,t.userInfo.initFlag=0,t.SET_USERINFO(t.userInfo),t.$dialog.confirm({message:"密码昵称设置成功，是否进行解锁设置？",showConfirmButton:!0,confirmButtonText:"立即设置",showCancelButton:!0,cancelButtonText:"跳过"}).then((function(){t.$router.push({name:"FingerPrint"})})).catch((function(e){t.$router.push({name:"TasksHome",query:{type:1}})})));case 4:case"end":return e.stop()}}),e,t)})))).catch((function(t){console.log(t,"error")}));case 2:case"end":return e.stop()}}),e,t)})))()}})}}}]);