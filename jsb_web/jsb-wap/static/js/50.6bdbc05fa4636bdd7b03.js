(window.webpackJsonp=window.webpackJsonp||[]).push([[50],{"3ALn":function(t,e,n){"use strict";n.r(e);var o=n("mKHt"),i=n("knc/");for(var a in i)["default"].indexOf(a)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(a);n("iFIS");var r=n("gp09"),s=Object(r.a)(i.default,o.a,o.b,!1,null,null,null);e.default=s.exports},b736:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=s(n("cLjf")),i=s(n("hDQ3")),a=n("mS6s"),r=s(n("3vVk"));function s(t){return t&&t.__esModule?t:{default:t}}e.default={components:{VueEditor:a.VueEditor,UploadTip:r.default},data:function(){return{questionType:"",questionTypeText:"",content:"",customToolbar:[{align:""},{align:"center"},{align:"right"},"bold","italic","image","video"],showBtn:!1,uploadTypeOpts:{title:"上传图片方式",list:[{label:"photo",value:"相册"}],showCancelButton:!1,showConfirmButton:!1},disabledSubmitBtn:!1,showTipDialog:!0,templateObj:{selectedText:"默认",showPicker:!1,list:[{text:"默认",value:""},{text:"咨询类",value:"问题描述：***"},{text:"下载安装及功能使用",value:"<p>手机品牌型号及操作系统：***</p><p>操作时间：*月*日*时*分</p><p>问题描述及错误提示：***</p>"},{text:"推荐RW",value:"<p>手机品牌型号及操作系统：***</p><p>操作时间：*月*日*时*分</p><p>RW标题：***</p><p>RW文章媒体平台：***</p><p>分享渠道：***</p><p>问题描述及错误提示：***</p>"},{text:"专栏RW",value:"<p>手机品牌型号及操作系统：***</p><p>操作时间：*月*日*时*分</p><p>RW标题：***</p><p>RW文章媒体平台：***</p><p>问题描述及错误提示：***</p>"},{text:"投诉或建议",value:"<p>问题描述：***</p><p>建议内容：***</p>"}]},showUploadPop:null,uploadOptions:{},interfaceType:null}},mounted:function(){var t=this;this.questionType=this.$route.query.questionType,this.questionTypeText=this.$route.query.questionTypeText,this.$refs.editor.$refs.fileInput.type="button",this.$refs.editor.$refs.fileInput.onclick=function(){t.resourceChoose("img")},document.querySelector(".ql-toolbar .ql-video").onclick=function(){t.resourceChoose("video")},this.$refs.editor.$el.style.height=(this.pageOffsetHeight||document.body.offsetHeight)/2+"px"},methods:{onClickLeft:function(){this.$router.go(-1)},resourceChoose:function(t){var e=this;this.$nextTick((function(){e.$refs.input.focus(),setTimeout((function(){e.$refs.input.blur()}),0)})),this.resourceAdd(t)},resourceAdd:function(t){var e=this;return(0,i.default)(o.default.mark((function n(){return o.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:e.interfaceType=t,e.uploadOptions={type:"photo",interface_type:t,form_source:"5"},e.showUploadPop=Math.random();case 3:case"end":return n.stop()}}),n,e)})))()},uploadCallback:function(t){var e=t.code,n=t.data,o=t.message;if(e&&1==e&&n.filePath){var i=this.$refs.editor.quill,a=i.getSelection(!0).index;"video"===this.interfaceType?i.insertEmbed(a,"video",n.filePath):i.insertEmbed(a,"image",n.filePath),i.setSelection(a+1),this.handleContentPlusSymbol()}else this.$toast.fail(o||"上传失败, 请重新上传")},handleContentPlusSymbol:function(){var t=/<[^>]*\s+src=["\']([^"\']+)["\']/gi,e=this.content.match(t)||[],n=e.length;if(!(n<=0))for(var o=0;o<n;o++){var i=e[o];if(i.indexOf("+")>-1){var a=t.exec(i);a&&(this.content=this.content.replace(a[1],a[1].replace(/\+/g,"%2B")))}}},vueEditorSelectionChange:function(t,e){this.rangIndex=(e||{}).index||0},vueEditorFocus:function(t){if(this.isIOS){for(var e=this.$refs.editor.$refs.quillContainer.querySelector(".ql-editor").children,n=e[e.length-1],o=n.offsetHeight;"app"!==n.id;)o+=n.offsetTop||0,n=n.parentNode;window.scrollTo(0,o)}},vueEditorBlur:function(){this.isIOS&&window.scrollTo(0,1e5)},onSubmit:function(t){var e=this;return(0,i.default)(o.default.mark((function t(){return o.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.content){t.next=3;break}return e.$toast.fail("请填写反馈内容"),t.abrupt("return");case 3:if(!e.disabledSubmitBtn){t.next=5;break}return t.abrupt("return");case 5:return e.disabledSubmitBtn=!0,t.prev=6,t.next=9,e.$api.base.addFeedback({feedback:e.content,questionType:e.questionType});case 9:t.next=15;break;case 11:return t.prev=11,t.t0=t.catch(6),e.disabledSubmitBtn=!1,t.abrupt("return");case 15:setTimeout((function(){e.$toast.loading({message:"谢谢您提供的建议意见，我们会尽快处理",duration:0,icon:"success"}),setTimeout((function(){e.disabledSubmitBtn=!1,e.content="",e.$toast.clear()}),2e3)}),500);case 16:case"end":return t.stop()}}),t,e,[[6,11]])})))()},pickerOnConfirm:function(t){var e=t.text,n=t.value;this.templateObj.selectedText=e,this.content=n,this.templateObj.showPicker=!1,this.$toast("* 需要您填写具体的内容")}}}},iFIS:function(t,e,n){"use strict";n("v74L")},"knc/":function(t,e,n){"use strict";n.r(e);var o=n("b736"),i=n.n(o);for(var a in o)["default"].indexOf(a)<0&&function(t){n.d(e,t,(function(){return o[t]}))}(a);e.default=i.a},mKHt:function(t,e,n){"use strict";n.d(e,"a",(function(){return o})),n.d(e,"b",(function(){return i}));var o=function(){var t=this,e=t._self._c;return e("div",{staticClass:"feedback_container nav_outer_div"},[e("van-nav-bar",{attrs:{title:t.$route.meta.title,"left-arrow":"","right-text":"  ",fixed:""},on:{"click-left":t.onClickLeft}}),t._v(" "),e("van-form",{on:{submit:t.onSubmit}},[e("van-field",{attrs:{readonly:"",value:t.questionTypeText,label:"问题类型"}}),t._v(" "),e("van-field",{attrs:{"is-link":"",readonly:"",name:"picker",label:"使用模板",placeholder:"选择模板快速填写"},on:{click:function(e){t.templateObj.showPicker=!0}},model:{value:t.templateObj.selectedText,callback:function(e){t.$set(t.templateObj,"selectedText",e)},expression:"templateObj.selectedText"}}),t._v(" "),e("van-cell-group",{staticClass:"group_content",attrs:{title:"反馈内容",border:!1}},[e("vue-editor",{ref:"editor",attrs:{editorToolbar:t.customToolbar,placeholder:"请输入反馈内容，如遇到无法使用等问题请反馈使用的机型、系统版本等信息。\n\n注意：您反馈的内容应为功能使用方面的问题或意见建议，不能涉及敏感信息或敏感关键字，否则系统会自动屏蔽。",useCustomImageHandler:""},on:{"selection-change":t.vueEditorSelectionChange,focus:t.vueEditorFocus,blur:t.vueEditorBlur},model:{value:t.content,callback:function(e){t.content=e},expression:"content"}}),t._v(" "),e("input",{ref:"input",staticStyle:{"pointer-events":"none"},attrs:{type:"text"}})],1),t._v(" "),e("div",{staticClass:"bottom_btns"},[e("van-button",{attrs:{type:"info",block:"","native-type":"submit",disabled:t.disabledSubmitBtn}},[t._v("提交")])],1)],1),t._v(" "),e("van-popup",{attrs:{position:"bottom"},model:{value:t.templateObj.showPicker,callback:function(e){t.$set(t.templateObj,"showPicker",e)},expression:"templateObj.showPicker"}},[e("van-picker",{attrs:{"show-toolbar":"",columns:t.templateObj.list},on:{confirm:t.pickerOnConfirm,cancel:function(e){t.templateObj.showPicker=!1}}})],1),t._v(" "),e("UploadTip",{attrs:{uploadOptions:t.uploadOptions,uploadCallback:t.uploadCallback},model:{value:t.showUploadPop,callback:function(e){t.showUploadPop=e},expression:"showUploadPop"}})],1)},i=[]},v74L:function(t,e,n){}}]);