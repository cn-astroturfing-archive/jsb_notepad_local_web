(window.webpackJsonp=window.webpackJsonp||[]).push([[65],{"/bap":function(t,e,a){"use strict";a("4xd7")},"4xd7":function(t,e,a){},QX19:function(t,e,a){"use strict";a.r(e);var i=a("d20h"),s=a.n(i);for(var n in i)["default"].indexOf(n)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(n);e.default=s.a},d20h:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=o(a("cLjf")),s=o(a("hDQ3")),n=o(a("bS4n")),r=o(a("tI4l")),u=a("dzbt");function o(t){return t&&t.__esModule?t:{default:t}}e.default={components:{},data:function(){return{detailData:{isTypes:[]},Dict:r.default}},computed:(0,n.default)({},(0,u.mapState)(["userInfo"]),(0,u.mapGetters)(["permissions"]),{progressTip:function(){if(!this.detailData.isType)return"";var t=[];return(1&this.detailData.isType)>0&&t.push("评论"+((!!this.detailData.commentStatus&&this.detailData.commentStatus)>0?"已完成":"未完成")),(2&this.detailData.isType)>0&&t.push("点赞"+((!!this.detailData.likeStatus&&this.detailData.likeStatus)>0?"已完成":"未完成")),(4&this.detailData.isType)>0&&t.push("分享"+((!!this.detailData.sharetatus&&this.detailData.sharetatus)>0?"已完成":"未完成")),(8&this.detailData.isType)>0&&t.push("评中评"+((!!this.detailData.cincStatus&&this.detailData.cincStatus)>0?"已完成":"未完成")),(16&this.detailData.isType)>0&&t.push("评中赞"+((!!this.detailData.lincStatus&&this.detailData.lincStatus)>0?"已完成":"未完成")),t.join("、")}}),mounted:function(){var t=this;this.subjectArticleDetail(),this.$nextTick((function(){var e=t.$refs.statistics,a=t.$refs.header,i=t.$refs.iframe;console.log(e.offsetHeight-a.offsetHeight),i.style.height=e.offsetHeight-a.offsetHeight+"px"}))},methods:{subjectArticleDetail:function(){var t=this;return(0,s.default)(i.default.mark((function e(){var a,s;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$api.task.getDetail({id:t.$route.query.id});case 2:a=e.sent,s=a.data,t.detailData=s;case 5:case"end":return e.stop()}}),e,t)})))()},onClickLeft:function(){this.$router.go(-1)},onClickRight:function(){this.permissions.includes("subject:view_stats")&&this.$router.push({name:"SpecialColumnStatistics",query:{id:this.detailData.id,isArticle:1}})},toUpload:function(t){this.$router.push({name:"SpecialColumnUpload",query:(0,n.default)({},t)})},toDetails:function(t){var e=this;return(0,s.default)(i.default.mark((function a(){var s,n,u;return i.default.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:s=[],n=[],(1&t.isType)>0&&(s.push("评论"),n.push("评论"+(t.commentStatus&&t.commentStatus>0?"已完成":"未完成"))),(2&t.isType)>0&&(s.push("点赞"),n.push("点赞"+(t.likeStatus&&t.likeStatus>0?"已完成":"未完成"))),(4&t.isType)>0&&(s.push("分享"),n.push("分享"+(t.shareStatus&&t.shareStatus>0?"已完成":"未完成"))),(8&t.isType)>0&&(s.push("评中评"),n.push("评中评"+(t.cincStatus&&t.cincStatus>0?"已完成":"未完成"))),(16&t.isType)>0&&(s.push("评中赞"),n.push("评中赞"+(t.lincStatus&&t.lincStatus>0?"已完成":"未完成"))),u={url:t.wechatArticleUrl,img:/^https?:\/\//.test(t.coverImg)?t.coverImg:""+window.location.origin+t.coverImg,title:t.title,desc:t.digest?t.digest.replace(/(<.*?>)|(\n)|(&nbsp;)|(\s)|[↵]/g,"").slice(0,40):"",user_id:e.userInfo.userId,wechat_share_task_id:t.id,show_share:!1,share_url:"",show_tj:!1,tj_url:"",weiboArticleId:t.weiboArticleId?t.weiboArticleId:"",urlType:t.urlType,can_screenshot:[8,12].includes(t.urlType),show_copy_title_jump_app:!((4&t.isType)>0)&&[1,2,8,12].includes(t.urlType),jump_app_scheme:r.default.androidPkgName[t.urlType],website:r.default.urlType[t.urlType],tasktype:s.join("、"),taskprogress:n.join("、"),canComment:(1&t.isType)>0?1:0,taskCategory:t.subjectFlag&&1==t.subjectFlag?2:(8&t.isType)>0||(16&t.isType)>0?3:1,instructionImg:t.instructionImg?/^https?:\/\//.test(t.instructionImg)?t.instructionImg:""+window.location.origin+t.instructionImg:"",toUploadCapture:(4&t.isType)>0?"":window.location.origin+"/jsb-wap/Tasks/SpecialColumnUpload?id="+t.id+"&isType="+t.isType+"&urlType="+t.urlType+"&title="+t.title+"&hideNavigation=1"},e.startDetail(u);case 9:case"end":return a.stop()}}),a,e)})))()}}}},fR3t:function(t,e,a){"use strict";a.d(e,"a",(function(){return i})),a.d(e,"b",(function(){return s}));var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"special-column-statistics"},[e("van-nav-bar",{attrs:{title:t.$route.meta.title,"left-arrow":"","right-text":t.permissions.includes("subject:view_stats")?"查看统计":"",fixed:""},on:{"click-left":t.onClickLeft,"click-right":t.onClickRight}}),t._v(" "),e("div",{ref:"statistics",staticClass:"statistics"},[e("div",{ref:"header",staticClass:"header"},[e("van-row",{staticClass:"msg",attrs:{gutter:"10"}},[e("van-col",{attrs:{span:"24"}},[t._v("类型："+t._s(t._f("formatIsTypeToText")(t.detailData.isType)))]),t._v(" "),e("van-col",{attrs:{span:"24"}},[t._v("进度："+t._s(t.progressTip))]),t._v(" "),e("van-col",{attrs:{span:"8"}},[t._v("是否置顶："+t._s(t.detailData.isTop?"是":"否"))]),t._v(" "),e("van-col",{attrs:{span:"16"}},[t._v("发布时间："+t._s(t.detailData.releaseTime))])],1)],1),t._v(" "),e("iframe",{ref:"iframe",staticClass:"iframe",attrs:{id:"iframe",src:t.detailData.wechatArticleUrl,frameborder:"0"}})]),t._v(" "),e("div",{staticClass:"bottom-btns"},[e("van-button",{attrs:{icon:"column",plain:"",type:"default"},on:{click:function(e){return t.toDetails(t.detailData)}}},[t._v("打开")]),t._v(" "),e("van-button",{attrs:{icon:"photograph",plain:"",type:"primary",color:"#0a72fe"},on:{click:function(e){return t.toUpload(t.detailData)}}},[t._v("上传截图")])],1)],1)},s=[]},p4YX:function(t,e,a){"use strict";a.r(e);var i=a("fR3t"),s=a("QX19");for(var n in s)["default"].indexOf(n)<0&&function(t){a.d(e,t,(function(){return s[t]}))}(n);a("/bap");var r=a("gp09"),u=Object(r.a)(s.default,i.a,i.b,!1,null,"624ced4e",null);e.default=u.exports}}]);