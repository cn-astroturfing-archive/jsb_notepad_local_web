(window.webpackJsonp=window.webpackJsonp||[]).push([[25],{"1VM3":function(t,e,n){"use strict";n("SY1c")},DJqG:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=c(n("cLjf")),a=c(n("hDQ3")),o=c(n("bS4n")),l=c(n("mF7X")),u=n("dzbt"),s=c(n("tI4l")),r=c(n("7Qib"));function c(t){return t&&t.__esModule?t:{default:t}}e.default={components:{DefaultPop:l.default},data:function(){return{liveOutlineObj:{id:"",title:"",createTime:""},form:{media:"",account:"",type:""},type:"insert",state:0,showMediaTypePop:!1,mediaTypeOpts:{title:"",list:s.default.mediaPlatform,labelInValue:!0,showCancelButton:!1,showConfirmButton:!1},mediaPlatform:s.default.mediaPlatform,auditStateEnum:s.default.auditState}},computed:(0,o.default)({},(0,u.mapState)(["userInfo"])),created:function(){this.getDetails()},filters:{formatState:function(t){return["","审核中","审核通过","审核不通过"][t]}},methods:{showMedia:function(){0===this.state&&(this.showMediaTypePop=!0)},selectMedia:function(t){this.form.media=t.value,this.form.type=t.id},onClickLeft:function(){this.$router.go(-1)},onSubmit:function(){var t=this;return(0,a.default)(i.default.mark((function e(){var n,a,l,u;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.form,a=n.type,l=n.account,r.default.isEmpty(a,"请选择自媒体平台")||r.default.isEmpty(l,"请输入平台帐号")){e.next=14;break}return e.prev=2,t.$toast.loading(),e.next=6,t.$api.whEnroll[t.type]((0,o.default)({isLoad:!1},t.form));case 6:u="insert"===t.type?"提交报名成功":"修改报名成功",t.$toast.success(u),t.state=1,e.next=14;break;case 11:e.prev=11,e.t0=e.catch(2),t.$toast.error("未知错误");case 14:case"end":return e.stop()}}),e,t,[[2,11]])})))()},getDetails:function(){var t=this;return(0,a.default)(i.default.mark((function e(){var n,a,o,l,u,s;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$api.whEnroll.detail({isLoad:!1});case 2:n=e.sent,a=n.data,o=a.type,l=a.account,u=a.state,s=a.id,t.mediaPlatform.forEach((function(e){e.id===o&&(t.form.media=e.value)})),t.form.id=s,t.form.account=l,t.form.type=o,t.state=u,t.loadMyLiveOutlineObj(s),3===u&&t.$dialog.confirm({title:"审核不通过, 重新修改提交？",confirmButtonText:"修改"}).then((function(){t.form.id=s,t.state=0,t.type="update"})),console.log(n);case 12:case"end":return e.stop()}}),e,t)})))()},loadMyLiveOutlineObj:function(t){var e=this;this.$api.whEnroll.queryPersonalNewsByWhEnrollId({isLoad:!1,id:t}).then((function(t){t.data&&(e.liveOutlineObj=t.data)}))},go2Activity:function(){this.$router.push({name:"SignUpList",query:{manuscriptType:2,whEnrollId:this.form.id}})},go2ReEdit:function(){this.$router.push({name:"UploadOutline",query:{id:this.liveOutlineObj.id,whEnrollId:this.form.id}})}}}},NQ9I:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=o(n("6ZY3")),a=o(n("7Qib"));function o(t){return t&&t.__esModule?t:{default:t}}e.default={props:{value:{type:Boolean,default:!1},options:{type:Object,default:function(){return{}}}},data:function(){return{currentIndex:null,currentItem:{},showPop:this.value,initValue:[]}},watch:{value:function(t){this.showPop=t,this.initValue=a.default.deepClone(this.opts.initValue)},showPop:function(t){this.$emit("input",t)}},computed:{opts:function(){return(0,i.default)({},{showConfirmButton:!0},this.options)}},methods:{cancel:function(){this.$emit("input",!1),this.$emit("on-cancel")},confirm:function(){var t=this;this.$emit("input",!1),this.opts.multiple?this.opts.labelInValue?this.$emit("on-confirm",{label:this.initValue,value:this.initValue.map((function(e){return(t.opts.list.find((function(t){var n=t.label;return e==n}))||{}).value||""}))}):this.$emit("on-confirm",this.initValue):this.opts.labelInValue?this.$emit("on-confirm",this.currentItem):this.$emit("on-confirm",this.currentItem.label)},chooseItem:function(t,e){this.currentItem=t,this.currentIndex=e,this.opts.labelInValue?this.$emit("on-change",this.currentItem):this.$emit("on-change",this.currentItem.label),!1===this.opts.showConfirmButton&&this.confirm()},multipleChooseItem:function(t){var e=this.initValue.findIndex((function(e){return e==t.label}));e>=0?this.initValue.splice(e,1):this.initValue.push(t.label)}}}},SY1c:function(t,e,n){},hrSL:function(t,e,n){"use strict";n.r(e);var i=n("iAlc"),a=n("yNiE");for(var o in a)["default"].indexOf(o)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(o);n("1VM3");var l=n("gp09"),u=Object(l.a)(a.default,i.a,i.b,!1,null,null,null);e.default=u.exports},iAlc:function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return a}));var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"sign_up_wang_wrap"},[e("van-nav-bar",{attrs:{title:t.$route.meta.title,"left-arrow":"","right-text":"　",fixed:""},on:{"click-left":t.onClickLeft}}),t._v(" "),e("van-form",{on:{submit:t.onSubmit}},[e("van-cell",{attrs:{title:"姓名",name:"name",value:t.userInfo.name}}),t._v(" "),e("van-cell",{attrs:{title:"自媒体平台",name:"media","is-link":"",value:t.form.media},on:{click:t.showMedia}}),t._v(" "),e("van-field",{attrs:{label:"平台帐号",name:"account",placeholder:"","input-align":"right",disabled:0!==t.state},model:{value:t.form.account,callback:function(e){t.$set(t.form,"account",e)},expression:"form.account"}}),t._v(" "),0!=t.state?e("van-cell",{attrs:{title:"审核状态",value:t._f("formatState")(t.state)}}):t._e(),t._v(" "),t.liveOutlineObj.id?e("div",{staticClass:"my_live_outline"},[t._v("我的直播大纲")]):t._e(),t._v(" "),t.liveOutlineObj.id?e("van-cell",{attrs:{center:"",title:t.liveOutlineObj.title,value:"内容",label:t.liveOutlineObj.createTime}},[e("div",{staticClass:"val_cell_right"},[e("div",{staticClass:"state",class:{reject:2==t.liveOutlineObj.auditState}},[t._v(t._s(t.auditStateEnum[t.liveOutlineObj.auditState]))]),t._v(" "),2==t.liveOutlineObj.auditState?e("div",{staticClass:"re_edit",on:{click:t.go2ReEdit}},[t._v("重新修改")]):t._e()])]):t._e(),t._v(" "),2!=t.state||t.liveOutlineObj&&t.liveOutlineObj.id?t._e():e("div",{staticClass:"audit_pass_no_my_live"},[t._v("\n\t\t\t审核通过，请上传直播大纲\n\t\t")]),t._v(" "),2!=t.state||t.liveOutlineObj&&t.liveOutlineObj.id?t._e():e("div",{staticClass:"bottom_btns"},[e("van-row",{attrs:{gutter:"20"}},[e("van-col",{attrs:{span:"24"}},[e("van-button",{attrs:{type:"info",block:""},on:{click:t.go2Activity}},[t._v("上传直播大纲")])],1)],1)],1),t._v(" "),0==t.state?e("div",{staticClass:"bottom_btns"},[e("van-row",{attrs:{gutter:"20"}},[e("van-col",{attrs:{span:"24"}},[e("van-button",{attrs:{type:"info",block:"","native-type":"submit"}},[t._v("提交")])],1)],1)],1):t._e()],1),t._v(" "),e("DefaultPop",{attrs:{options:t.mediaTypeOpts},on:{"on-change":t.selectMedia},model:{value:t.showMediaTypePop,callback:function(e){t.showMediaTypePop=e},expression:"showMediaTypePop"}})],1)},a=[]},leZc:function(t,e,n){"use strict";n("u3WF")},mF7X:function(t,e,n){"use strict";n.r(e);var i=n("mtDz"),a=n("vNnt");for(var o in a)["default"].indexOf(o)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(o);n("leZc");var l=n("gp09"),u=Object(l.a)(a.default,i.a,i.b,!1,null,null,null);e.default=u.exports},mtDz:function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return a}));var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"default_pop_component_wrap"},[e("van-popup",{staticClass:"default_pop",attrs:{position:"bottom"},model:{value:t.showPop,callback:function(e){t.showPop=e},expression:"showPop"}},[e("div",{staticClass:"default_pop_title"},[t._v(t._s(t.opts.title||"选择类型"))]),t._v(" "),t.opts.multiple?e("ul",{staticClass:"default_pop_list"},t._l(t.opts.list,(function(n,i){return e("li",{key:i,class:{active:t.initValue.includes(n.label)},on:{click:function(e){return t.multipleChooseItem(n)}}},[t._v("\n        "+t._s(n.value)+"\n      ")])})),0):e("ul",{staticClass:"default_pop_list"},t._l(t.opts.list,(function(n,i){return e("li",{key:i,class:{active:t.currentIndex===i},on:{click:function(e){return t.chooseItem(n,i)}}},[t._v("\n        "+t._s(n.value)+"\n      ")])})),0),t._v(" "),t.opts.showCancelButton||t.opts.showConfirmButton?e("div",{staticClass:"default_pop_btns_group"},[t._t("cancel",(function(){return[t.opts.showCancelButton?e("div",{staticClass:"default_pop_btn",on:{click:t.cancel}},[t._v("\n          "+t._s(t.opts.cancelButtonText||"取消")+"\n        ")]):t._e()]})),t._v(" "),t._t("confirm",(function(){return[t.opts.showConfirmButton?e("div",{staticClass:"default_pop_btn",on:{click:t.confirm}},[t._v("\n          "+t._s(t.opts.confirmButtonText||"确定")+"\n        ")]):t._e()]}))],2):t._e()])],1)},a=[]},u3WF:function(t,e,n){},vNnt:function(t,e,n){"use strict";n.r(e);var i=n("NQ9I"),a=n.n(i);for(var o in i)["default"].indexOf(o)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(o);e.default=a.a},yNiE:function(t,e,n){"use strict";n.r(e);var i=n("DJqG"),a=n.n(i);for(var o in i)["default"].indexOf(o)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(o);e.default=a.a}}]);