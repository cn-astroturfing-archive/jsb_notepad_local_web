(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{"+eb4":function(t,i,s){"use strict";s.r(i);var e=s("u85o"),h=s("HZ0M");for(var n in h)["default"].indexOf(n)<0&&function(t){s.d(i,t,(function(){return h[t]}))}(n);s("KQhS");var a=s("gp09"),r=Object(a.a)(h.default,e.a,e.b,!1,null,"22c08822",null);i.default=r.exports},BvDl:function(t,i,s){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var e=a(s("omC7")),h=a(s("bS4n")),n=s("dzbt");function a(t){return t&&t.__esModule?t:{default:t}}i.default={props:{setOrCheck:{type:Boolean,default:!0},passWord:{type:Array,default:function(){return[]}}},data:function(){return{pointerArr:[],startX:0,startY:0,puts:[],currentPointer:null,isMouseDown:!1,arr:[],canvasShow:null,ctxshow:null,widthShow:null,heightShow:null,canvas:null,ctx:null,width:null,height:null,patternPassWord:[],tooEasy:!1,setAgain:!1,isFit:!0}},computed:(0,h.default)({},(0,n.mapState)(["userInfo"])),mounted:function(){var t=this;this.$nextTick((function(){t.initDidMounted(),t.init(!0),t.initEvent()}))},methods:{initDidMounted:function(){this.canvas=document.getElementById("canvas"),this.ctx=this.canvas.getContext("2d"),this.canvas.width=this.$refs.drawPattern.clientWidth,this.canvas.height=this.$refs.drawPattern.clientHeight,this.width=this.canvas.width,this.height=this.canvas.height,this.canvasShow=document.getElementById("canvasShow"),this.ctxshow=this.canvasShow.getContext("2d"),this.canvasShow.width=this.$refs.showPattern.clientWidth,this.canvasShow.height=this.$refs.showPattern.clientHeight,this.widthShow=this.canvasShow.width,this.heightShow=this.canvasShow.height;var t=(this.width-this.height)/16;this.arr=[];for(var i=1;i<=3;i++)for(var s=1;s<=3;s++){var e={};t>0?(e.x=this.height/3*s+Math.abs(t),e.y=this.height/3*i-this.height/6,e.state=0,e.stateShow=0):(e.x=this.width/3*s,e.y=this.width/3*i+Math.abs(t)-this.height/6,e.state=0,e.stateShow=0),e.showX=this.heightShow/4*s,e.showY=this.heightShow/4*i,this.arr.push(e)}},init:function(t){this.ctx.clearRect(0,0,this.width,this.height),t&&this.ctxshow.clearRect(0,0,this.widthShow,this.heightShow),this.pointerArr=[];for(var i=0;i<this.arr.length;i++)this.arr[i].state=0,t&&(this.arr[i].stateShow=0),this.drawPointer(i,t)},drawPointer:function(t,i){var s=this.width/11,e="#ccc",h="#ccc",n="#ccc";1==this.arr[t].state&&(h="#0286fa",e="#0286fa"),1==this.arr[t].stateShow&&(n="#0286fa"),this.ctx.save(),this.ctx.beginPath(),this.ctx.fillStyle=e,this.ctx.arc(this.arr[t].x,this.arr[t].y,6,0,2*Math.PI,!1),this.ctx.fill(),this.ctx.closePath(),this.ctx.beginPath(),this.ctx.strokeStyle=h,this.ctx.lineWidth=1,this.ctx.arc(this.arr[t].x,this.arr[t].y,s,0,2*Math.PI,!1),this.ctx.stroke(),this.ctx.closePath(),this.ctx.restore(),i&&(this.ctxshow.save(),this.ctxshow.beginPath(),this.ctxshow.fillStyle=n,this.ctxshow.arc(this.arr[t].showX,this.arr[t].showY,4,0,2*Math.PI,!1),this.ctxshow.fill(),this.ctxshow.closePath())},drawLinePointer:function(t,i,s){this.ctx.clearRect(0,0,this.width,this.height),this.ctx.save(),this.ctx.beginPath(),this.ctx.strokeStyle="#0286fa",this.ctx.lineWidth=6,this.ctx.lineCap="round",this.ctx.lineJoin="round";for(var e=0;e<this.pointerArr.length;e++)0==e?this.ctx.moveTo(this.pointerArr[e].x,this.pointerArr[e].y):this.ctx.lineTo(this.pointerArr[e].x,this.pointerArr[e].y);this.ctx.stroke(),this.ctx.closePath(),this.ctx.restore();for(e=0;e<this.arr.length;e++)this.drawPointer(e,!0),this.ctx.isPointInPath(t,i)&&this.currentPointer!=e&&this.puts.indexOf(e+1)<0&&(this.pointerArr.push({x:this.arr[e].x,y:this.arr[e].y}),this.currentPointer=e,this.puts.push(e+1),this.startX=this.arr[e].x,this.startY=this.arr[e].y,this.arr[e].state=1,this.setAgain||(this.arr[e].stateShow=1));s&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.globalCompositeOperation="destination-over",this.ctx.strokeStyle="#e2e0e0",this.ctx.lineWidth=6,this.ctx.lineCap="round",this.ctx.lineJoin="round",this.ctx.moveTo(this.startX,this.startY),this.ctx.lineTo(this.x,this.y),this.ctx.stroke(),this.ctx.beginPath(),this.ctx.restore())},initEvent:function(){var t=this;this.canvas.addEventListener("touchstart",(function(i){t.isMouseDown=!0;var s=i.targetTouches[0].pageX,e=i.targetTouches[0].pageY-t.canvas.offsetTop;t.drawLinePointer(s,e,!1)})),this.canvas.addEventListener("touchmove",(function(i){if(t.isMouseDown){var s=i.targetTouches[0].pageX,e=i.targetTouches[0].pageY-t.canvas.offsetTop;t.drawLinePointer(s,e,!0)}})),this.canvas.addEventListener("touchend",(function(i){t.drawLinePointer(0,0,!1),t.isMouseDown=!1,t.pointerArr=[],t.setOrCheck?t.puts.length>=4?(t.tooEasy=!1,t.setAgain?((0,e.default)(t.puts)==(0,e.default)(t.patternPassWord)?(t.setAgain=!1,t.isFit=!0,t.$toast("手势密码设置成功"),t.setGestureConfig((0,e.default)(t.puts)),t.onClickLeft()):(t.setAgain=!1,t.isFit=!1,setTimeout((function(){t.isFit=!0}),3e3)),t.init(!0)):(t.setAgain=!0,t.patternPassWord=t.puts,t.init(!1)),t.init(!1)):t.puts.length>=1&&(t.tooEasy=!0,t.setAgain?t.init(!1):t.init(!0)):t.puts.length>=4?(t.tooEasy=!1,(0,e.default)(t.puts)==(0,e.default)(t.passWord)?(t.$toast("解锁成功"),t.resetBackgroundEntryTime(),t.$router.push({name:"TasksHome"})):t.$toast("密码错误！请重新输入"),t.init(!0)):t.puts.length>=1&&(t.tooEasy=!0,t.init(!0)),t.puts=[]}))},onClickLeft:function(){this.$router.go(-1)},setGestureConfig:function(t){this.setConfig(this.userInfo.userId,"gesture",t)},resetBackgroundEntryTime:function(){this.setConfig(this.userInfo.userId,"unlockRequired","false"),this.setConfig(this.userInfo.userId,"backgroundEntryTime",null)}}}},HZ0M:function(t,i,s){"use strict";s.r(i);var e=s("BvDl"),h=s.n(e);for(var n in e)["default"].indexOf(n)<0&&function(t){s.d(i,t,(function(){return e[t]}))}(n);i.default=h.a},KQhS:function(t,i,s){"use strict";s("UFuK")},UFuK:function(t,i,s){},u85o:function(t,i,s){"use strict";s.d(i,"a",(function(){return e})),s.d(i,"b",(function(){return h}));var e=function(){var t=this,i=t._self._c;return i("div",{staticClass:"gesture-wrapper"},[t.setOrCheck?i("van-nav-bar",{attrs:{title:t.$route.meta.title,"left-arrow":"",fixed:"","right-text":"  "},on:{"click-left":t.onClickLeft}}):t._e(),t._v(" "),i("div",{staticClass:"pattern-lock"},[i("div",{ref:"showPattern",class:t.setOrCheck?"pattern":"login-size"},[i("canvas",{attrs:{id:"canvasShow"}})]),t._v(" "),i("div",{staticClass:"tips"},[i("div",{staticClass:"input-tips"},[t.setOrCheck?i("p",[t._v(t._s(t.setAgain?"再次绘制解锁图案":"请绘制解锁图案"))]):t._e(),t._v(" "),i("div",{staticClass:"guide",style:{display:t.tooEasy||!t.isFit?"block":"none"}},[i("p",{staticClass:"guide-tips"},[t._v("\n            "+t._s(t.isFit?"手势密码不能少于4个点":"与上次绘制不一致，请重新绘制")+"\n          ")])])])]),t._v(" "),i("div",{ref:"drawPattern",staticClass:"draw-pattern"},[i("canvas",{attrs:{id:"canvas"}})])])],1)},h=[]}}]);