(window.webpackJsonp=window.webpackJsonp||[]).push([[57],{Jyjw:function(t,e,o){"use strict";o("bMfd")},"MD+B":function(t,e,o){"use strict";o.r(e);var n=o("UutF"),s=o("VvD2");for(var r in s)["default"].indexOf(r)<0&&function(t){o.d(e,t,(function(){return s[t]}))}(r);o("Jyjw");var a=o("gp09"),u=Object(a.a)(s.default,n.a,n.b,!1,null,null,null);e.default=u.exports},UutF:function(t,e,o){"use strict";o.d(e,"a",(function(){return n})),o.d(e,"b",(function(){return s}));var n=function(){var t=this,e=t._self._c;return e("div",{staticClass:"mod_password_need_old"},[e("van-nav-bar",{attrs:{title:t.$route.meta.title,"left-arrow":!0,"right-text":"  ",fixed:""},on:{"click-left":t.onClickLeft}}),t._v(" "),e("van-form",{on:{submit:t.onSubmit}},[e("van-cell-group",[e("van-field",{attrs:{label:"原密码",name:"oldPassword",type:t.showOldPwd?"text":"password",placeholder:"请输入密码","input-align":"right",rules:[{required:!0,message:"原密码不能为空"}]},scopedSlots:t._u([{key:"button",fn:function(){return[e("button",{staticClass:"btn_view_pwd",class:{active:t.showOldPwd},attrs:{type:"button"},on:{click:function(e){return t.toggleViewPwd("showOldPwd")}}})]},proxy:!0}]),model:{value:t.form.oldPassword,callback:function(e){t.$set(t.form,"oldPassword",e)},expression:"form.oldPassword"}}),t._v(" "),e("van-field",{attrs:{label:"新密码",name:"newPassword",type:t.showPwd?"text":"password",placeholder:"请输入密码","input-align":"right",rules:[{required:!0,message:"密码不能为空"},{validator:t.validatorPassword,message:"密码必须包含大小写、数字、特殊符号(不是字母，数字，下划线的字符)，长度8位及以上"}]},scopedSlots:t._u([{key:"button",fn:function(){return[e("button",{staticClass:"btn_view_pwd",class:{active:t.showPwd},attrs:{type:"button"},on:{click:function(e){return t.toggleViewPwd("showPwd")}}})]},proxy:!0}]),model:{value:t.form.newPassword,callback:function(e){t.$set(t.form,"newPassword",e)},expression:"form.newPassword"}}),t._v(" "),e("van-field",{attrs:{label:"确认密码",name:"confirmPassword",type:t.showPwd2?"text":"password",placeholder:"请再次输入新密码","input-align":"right",rules:[{required:!0,message:"密码不能为空"},{validator:t.validatorTwoPwdEquals,message:"输入的密码不一致"}]},scopedSlots:t._u([{key:"button",fn:function(){return[e("button",{staticClass:"btn_view_pwd",class:{active:t.showPwd2},attrs:{type:"button"},on:{click:function(e){return t.toggleViewPwd("showPwd2")}}})]},proxy:!0}]),model:{value:t.form.confirmPassword,callback:function(e){t.$set(t.form,"confirmPassword",e)},expression:"form.confirmPassword"}})],1),t._v(" "),e("div",{staticClass:"forget_old_password",on:{click:t.forgetOldPassword}},[t._v("忘记原密码？")]),t._v(" "),e("div",{staticClass:"bottom_btns"},[e("van-button",{attrs:{type:"info",block:"","native-type":"submit"}},[t._v("提交")])],1)],1)],1)},s=[]},VvD2:function(t,e,o){"use strict";o.r(e);var n=o("fn91"),s=o.n(n);for(var r in n)["default"].indexOf(r)<0&&function(t){o.d(e,t,(function(){return n[t]}))}(r);e.default=s.a},bMfd:function(t,e,o){},fn91:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=d(o("cLjf")),s=d(o("hDQ3")),r=d(o("bS4n")),a=o("dzbt"),u=d(o("7Qib"));function d(t){return t&&t.__esModule?t:{default:t}}e.default={components:{},data:function(){return{form:{oldPassword:"",newPassword:"",confirmPassword:""},showOldPwd:!1,showPwd:!1,showPwd2:!1}},mounted:function(){},computed:(0,r.default)({},(0,a.mapState)(["userInfo"])),methods:{onClickLeft:function(){this.$router.go(-1)},validatorTwoPwdEquals:function(t){return t===this.form.newPassword},validatorPassword:function(t){return new RegExp("^(?![A-Za-z0-9]+$)(?![a-z0-9\\W]+$)(?![A-Za-z\\W]+$)(?![A-Z0-9\\W]+$)[a-zA-Z0-9\\W]{8,}$").test(t)},onSubmit:function(t){var e=this;return(0,s.default)(n.default.mark((function o(){var r,a;return n.default.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return r=t.oldPassword,a=t.newPassword,o.next=3,e.$api.user.modifyPwdTwo({isLoad:!1,oldPassword:u.default.rsaEncryptRetBase64DefaultPubKey(r),newPassword:u.default.rsaEncryptRetBase64DefaultPubKey(a),encType:2});case 3:e.$dialog.alert({message:"密码修改成功, 请重新登录"}).then((0,s.default)(n.default.mark((function t(){return n.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$api.login.logout();case 2:e.$router.push({name:"Login"});case 3:case"end":return t.stop()}}),t,e)}))));case 4:case"end":return o.stop()}}),o,e)})))()},toggleViewPwd:function(t){this[t]=!this[t]},forgetOldPassword:function(){var t=this;this.$dialog.confirm({message:"你的账号当前已绑定手机号，可以通过短信验证码重置密码，是否发送短信验证码到"+this.userInfo.telephone,showConfirmButton:!0,confirmButtonText:"发送",showCancelButton:!0,cancelButtonText:"取消"}).then((0,s.default)(n.default.mark((function e(){return n.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$api.user.sendVerifyCodeBeforeModifyPwd();case 2:1==e.sent.code&&t.$router.push({name:"ModPasswordNeedVerifyCode"});case 4:case"end":return e.stop()}}),e,t)})))).catch((function(t){}))}}}}}]);