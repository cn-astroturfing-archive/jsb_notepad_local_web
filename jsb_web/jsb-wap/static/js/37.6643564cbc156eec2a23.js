(window.webpackJsonp=window.webpackJsonp||[]).push([[37],{"1HEG":function(e,t,a){"use strict";a("PxT7")},BJxF:function(e,t,a){"use strict";a.r(t);var n=a("WtIt"),s=a("F5/b");for(var c in s)["default"].indexOf(c)<0&&function(e){a.d(t,e,(function(){return s[e]}))}(c);a("1HEG");var i=a("gp09"),o=Object(i.a)(s.default,n.a,n.b,!1,null,null,null);t.default=o.exports},"F5/b":function(e,t,a){"use strict";a.r(t);var n=a("URpy"),s=a.n(n);for(var c in n)["default"].indexOf(c)<0&&function(e){a.d(t,e,(function(){return n[e]}))}(c);t.default=s.a},PxT7:function(e,t,a){},URpy:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(a("vBSJ")),s=r(a("cLjf")),c=r(a("hDQ3")),i=r(a("bS4n"));a("sRnv");var o=a("dzbt");a("d8ex"),r(a("7Qib"));function r(e){return e&&e.__esModule?e:{default:e}}t.default={data:function(){return{feedbackInfo:{},feedbackReplys:[]}},computed:(0,i.default)({},(0,o.mapState)(["userInfo"])),mounted:function(){this.loadData()},methods:(0,i.default)({},(0,o.mapMutations)(["SET_USERINFO"]),{onClickLeft:function(){this.$router.go(-1)},loadData:function(){var e=this;return(0,c.default)(s.default.mark((function t(){var a,n;return s.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$api.base.feedbackDetail({id:e.$route.query.id});case 2:return a=t.sent,e.feedbackInfo=a.data,t.next=6,e.$api.base.feedbackReplyList({id:e.$route.query.id});case 6:n=t.sent,e.feedbackReplys=n.data,e.$api.base.unreadFeedbackCount({isLoad:!1}).then((function(t){1==t.code&&(e.userInfo.unreadFeedbackCount=t.data?t.data:0,e.SET_USERINFO(e.userInfo))}));case 9:case"end":return t.stop()}}),t,e)})))()},imageEnlargement:function(e){"IMG"==e.target.nodeName&&(0,n.default)([e.target.currentSrc])},go2Reply:function(){this.$router.push({name:"FeedbackReply",query:{feedbackId:this.feedbackInfo.id}})},doCancel:function(){var e=this;return(0,c.default)(s.default.mark((function t(){return s.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.$dialog.confirm({title:"提示",message:"取消反馈将关闭工单，是否确认取消？",confirmButtonText:"确认取消"}).then(function(){var t=(0,c.default)(s.default.mark((function t(a){return s.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$api.base.cancelFeedback({id:e.feedbackInfo.id});case 2:1==t.sent.code&&(e.$toast.success("取消成功"),e.loadData());case 4:case"end":return t.stop()}}),t,e)})));return function(e){return t.apply(this,arguments)}}()).catch((function(e){}));case 1:case"end":return t.stop()}}),t,e)})))()},markSolve:function(e){var t,a=this;this.$dialog.confirm({title:"提示",message:"此操作将结束本次反馈，是否继续？",confirmButtonText:"继续"}).then((t=(0,c.default)(s.default.mark((function t(n){return s.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.$api.base.updateSolveStatus({id:a.feedbackInfo.id,solveStatus:e});case 2:1==t.sent.code&&(a.$toast.success("感谢您的反馈"),a.loadData());case 4:case"end":return t.stop()}}),t,a)}))),function(e){return t.apply(this,arguments)})).catch((function(e){}))}})}},WtIt:function(e,t,a){"use strict";a.d(t,"a",(function(){return n})),a.d(t,"b",(function(){return s}));var n=function(){var e=this,t=e._self._c;return t("div",{staticClass:"feedback_detail nav_outer_div"},[t("van-nav-bar",{attrs:{title:e.$route.meta.title,"left-arrow":"",fixed:""},on:{"click-left":e.onClickLeft}}),e._v(" "),t("div",{staticClass:"feedback_basic_info"},[t("div",{staticClass:"info_item"},[t("div",[e._v("创建时间:")]),e._v(" "),t("div",[e._v(e._s(e.feedbackInfo.createTime))])]),e._v(" "),t("div",{staticClass:"info_item"},[t("div",[e._v("问题类型:")]),e._v(" "),t("div",[e._v(e._s(e._f("dictToText")(e.feedbackInfo.questionType,"feedbackQuestionType")))])]),e._v(" "),t("div",{staticClass:"split_line"})]),e._v(" "),t("div",{staticClass:"progress_info"},[t("div",{staticClass:"info_item"},[t("div",[e._v("处理进度:")]),e._v(" "),t("div",[e._v(e._s(e._f("dictToText")(e.feedbackInfo.status,"feedbackStatus")))])])]),e._v(" "),t("div",{staticClass:"split_row"}),e._v(" "),t("van-steps",{staticClass:"sel_module_box",attrs:{direction:"vertical","active-color":"#333","inactive-color":"#555"}},[1==e.feedbackInfo.status&&[1,2].includes(e.feedbackInfo.solveStatus)?t("van-step",[t("p",{staticClass:"create_time"},[e._v(e._s(e.feedbackInfo.updateTime))]),e._v(" "),t("p",{staticClass:"replyer"},[e._v("已处理完毕。用户评价："+e._s(e._f("dictToText")(e.feedbackInfo.solveStatus,"feedbackSolveStatus")))])]):e._e(),e._v(" "),1==e.feedbackInfo.status&&[3].includes(e.feedbackInfo.solveStatus)?t("van-step",[t("p",{staticClass:"create_time"},[e._v(e._s(e.feedbackInfo.updateTime))]),e._v(" "),t("p",{staticClass:"replyer"},[e._v("系统处理：")]),e._v(" "),t("p",{staticClass:"replyer"},[e._v("官方回复后您未在规定时间内做出响应，由系统自动关闭工单")])]):e._e(),e._v(" "),3==e.feedbackInfo.status?t("van-step",[t("p",{staticClass:"create_time"},[e._v(e._s(e.feedbackInfo.updateTime))]),e._v(" "),t("p",{staticClass:"replyer"},[e._v("您取消了反馈")])]):e._e(),e._v(" "),e._l(e.feedbackReplys,(function(a){return t("van-step",[t("p",{staticClass:"create_time"},[e._v(e._s(a.createTime))]),e._v(" "),1==a.userType?t("p",{staticClass:"replyer"},[e._v("【官方】回复：")]):e._e(),e._v(" "),2==a.userType?t("p",{staticClass:"replyer"},[e._v("您补充了内容：")]):e._e(),e._v(" "),t("p",{staticClass:"reply_content",domProps:{innerHTML:e._s(a.replyContent)},on:{click:e.imageEnlargement}})])})),e._v(" "),t("van-step",[t("p",{staticClass:"create_time"},[e._v(e._s(e.feedbackInfo.createTime))]),e._v(" "),t("p",{staticClass:"replyer"},[e._v(e._s(e.userInfo.name)+" 【新建反馈】：")]),e._v(" "),t("p",{staticClass:"reply_content",domProps:{innerHTML:e._s(e.feedbackInfo.feedback)},on:{click:e.imageEnlargement}})])],2),e._v(" "),0==e.feedbackInfo.status?t("div",{staticClass:"blank_div"}):e._e(),e._v(" "),0==e.feedbackInfo.status&&1==e.feedbackInfo.officalRespondFlag?t("div",{staticClass:"bottom_btns group2"},[t("div",{staticClass:"bottom_btn_row"},[t("div",{on:{click:function(t){return e.markSolve(1)}}},[e._v("已解决"),t("van-icon",{attrs:{name:"success"}})],1),e._v(" "),t("div",{on:{click:function(t){return e.markSolve(2)}}},[e._v("未解决"),t("van-icon",{attrs:{name:"cross"}})],1)])]):e._e(),e._v(" "),0==e.feedbackInfo.status?t("div",{staticClass:"bottom_btns group1"},[t("div",{staticClass:"bottom_btn_row"},[t("div",{on:{click:e.go2Reply}},[e._v("回复补充")]),e._v(" "),t("div",{on:{click:e.doCancel}},[e._v("取消反馈")])])]):e._e()],1)},s=[]},sRnv:function(e,t,a){"use strict";a.r(t);a("0GPk"),a("00cZ"),a("E8Wu"),a("HVE+"),a("Oe98"),a("lycV"),a("6B5o"),a("fBNp"),a("UZK1"),a("KHSm")}}]);