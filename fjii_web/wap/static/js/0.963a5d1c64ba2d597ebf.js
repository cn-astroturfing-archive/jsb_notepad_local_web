(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{"3vVk":function(t,o,n){"use strict";n.r(o);var e=n("UIlY"),i=n("AKuK");for(var s in i)["default"].indexOf(s)<0&&function(t){n.d(o,t,(function(){return i[t]}))}(s);n("AG0c");var u=n("gp09"),l=Object(u.a)(i.default,e.a,e.b,!1,null,null,null);o.default=l.exports},AG0c:function(t,o,n){"use strict";n("OFBz")},AKuK:function(t,o,n){"use strict";n.r(o);var e=n("MHpA"),i=n.n(e);for(var s in e)["default"].indexOf(s)<0&&function(t){n.d(o,t,(function(){return e[t]}))}(s);o.default=i.a},MHpA:function(t,o,n){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var e=u(n("bS4n")),i=n("dzbt"),s=u(n("mF7X"));function u(t){return t&&t.__esModule?t:{default:t}}o.default={components:{DefaultPop:s.default},props:{uploadOptions:{type:Object,default:{interface_type:"img",form_source:null,isMultiUpload:!1}},uploadCallback:{type:Function},value:{type:Boolean,default:!1},isFile:{type:Boolean,default:!1}},computed:(0,e.default)({},(0,i.mapState)(["userInfo","photoPermission"])),data:function(){return{permissionTipDialogVisible:!1,showBtn:!1,uploadTypeOpts:{title:"上传图片方式",list:[{label:"photo",value:"相册"}],showCancelButton:!1,showConfirmButton:!1},uploadTypeSelected:"",showUploadTypePop:this.value}},watch:{value:function(t){this.showUploadTypePop=t,this.isFile&&(this.uploadTypeOpts.list=[{label:"file",value:"文件"}],this.uploadTypeOpts.title="上传文件方式")},showUploadTypePop:function(t){this.$emit("input",t)}},methods:(0,e.default)({},(0,i.mapMutations)(["SET_PHOTO_PERMISSION"]),{upload:function(){var t=this;this.appPushToken(this.userInfo.token);var o=this.uploadOptions,n=o.interface_type,e=o.form_source;(o.isMultiUpload?this.appMultiUpload:this.appUpload)({type:this.uploadTypeSelected,interface_type:n,form_source:e},(function(o){return t.uploadCallback(o)}))},uploadTypeChange:function(t){var o=this;(this.uploadTypeSelected=t,this.isIOS)?this.upload():this.checkPermissions({storage:"android.permission.READ_EXTERNAL_STORAGE"})?setTimeout((function(){o.upload()}),200):(this.permissionTipDialogVisible=!0,null==this.photoPermission||0==this.photoPermission?(window.onAccessPermission=function(t){o.permissionTipDialogVisible=!1,window.onAccessPermission=null,o.SET_PHOTO_PERMISSION(t)},setTimeout((function(){o.upload()}),200)):this.showBtn=!0)},permissionTipBeforeClose:function(t,o){"cancel"==t||"overlay"==t||"confirm"==t&&this.onGoPermissionSettings(),o()}})}},NQ9I:function(t,o,n){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var e,i=n("6ZY3"),s=(e=i)&&e.__esModule?e:{default:e};o.default={props:{value:{type:Boolean,default:!1},options:{type:Object,default:function(){return{}}}},data:function(){return{currentIndex:null,currentItem:{},showPop:this.value}},watch:{value:function(t){var o=this;this.showPop=t,this.options&&this.options.currentValue&&(this.currentIndex=this.options.list.findIndex((function(t){return t.value==o.options.currentValue})))},showPop:function(t){this.$emit("input",t)}},computed:{opts:function(){return(0,s.default)({},{showConfirmButton:!0},this.options)}},methods:{cancel:function(){this.$emit("input",!1),this.$emit("on-cancel")},confirm:function(){this.$emit("input",!1),this.opts.labelInValue?this.$emit("on-confirm",this.currentItem):this.$emit("on-confirm",this.currentItem.label)},chooseItem:function(t,o){this.currentItem=t,this.currentIndex=o,this.opts.labelInValue?this.$emit("on-change",this.currentItem):this.$emit("on-change",this.currentItem.label),!1===this.opts.showConfirmButton&&this.confirm()}}}},OFBz:function(t,o,n){},TE7C:function(t,o,n){"use strict";n("jbV0")},TQ0x:function(t,o,n){"use strict";n.d(o,"a",(function(){return e})),n.d(o,"b",(function(){return i}));var e=function(){var t=this,o=t._self._c;return o("div",{staticClass:"default_pop_component_wrap"},[o("van-popup",{staticClass:"default_pop",attrs:{position:"bottom"},model:{value:t.showPop,callback:function(o){t.showPop=o},expression:"showPop"}},[o("div",{staticClass:"default_pop_title"},[t._v(t._s(t.opts.title||"选择类型"))]),t._v(" "),o("ul",{staticClass:"default_pop_list"},t._l(t.opts.list,(function(n,e){return o("li",{key:e,class:{active:t.currentIndex===e},on:{click:function(o){return t.chooseItem(n,e)}}},[t._v(t._s(n.value))])})),0),t._v(" "),t.opts.showCancelButton||t.opts.showConfirmButton?o("div",{staticClass:"default_pop_btns_group"},[t.opts.showCancelButton?t._t("cancel",(function(){return[o("div",{staticClass:"default_pop_btn",on:{click:t.cancel}},[t._v(t._s(t.opts.cancelButtonText||"取消"))])]})):t._e(),t._v(" "),t.opts.showConfirmButton?t._t("confirm",(function(){return[o("div",{staticClass:"default_pop_btn",on:{click:t.confirm}},[t._v(t._s(t.opts.confirmButtonText||"确定"))])]})):t._e()],2):t._e()])],1)},i=[]},UIlY:function(t,o,n){"use strict";n.d(o,"a",(function(){return e})),n.d(o,"b",(function(){return i}));var e=function(){var t=this,o=t._self._c;return o("div",{staticClass:"upload-tip-wrapper"},[o("DefaultPop",{attrs:{options:t.uploadTypeOpts},on:{"on-change":t.uploadTypeChange},model:{value:t.showUploadTypePop,callback:function(o){t.showUploadTypePop=o},expression:"showUploadTypePop"}}),t._v(" "),o("van-dialog",{attrs:{title:"权限说明","show-cancel-button":t.showBtn,"show-confirm-button":t.showBtn,cancelButtonText:"关闭",cancelButtonColor:"#ee0a24",confirmButtonText:"去设置",confirmButtonColor:"#0a72fe",beforeClose:t.permissionTipBeforeClose},model:{value:t.permissionTipDialogVisible,callback:function(o){t.permissionTipDialogVisible=o},expression:"permissionTipDialogVisible"}},[o("div",{staticClass:"permission_tip_div"},[o("p",[t._v("存储权限：通信头条需要存储权限来查看照片、视频功能")]),t._v(" "),o("p",[t._v("您可在“手机设置-权限管理”中修改此配置")]),t._v(" "),o("p",[t._v("获取权限目的：支持用户将手机中的图片、视频上传，用以进行创作投稿、称分补录")])])])],1)},i=[]},jbV0:function(t,o,n){},mF7X:function(t,o,n){"use strict";n.r(o);var e=n("TQ0x"),i=n("vNnt");for(var s in i)["default"].indexOf(s)<0&&function(t){n.d(o,t,(function(){return i[t]}))}(s);n("TE7C");var u=n("gp09"),l=Object(u.a)(i.default,e.a,e.b,!1,null,null,null);o.default=l.exports},vNnt:function(t,o,n){"use strict";n.r(o);var e=n("NQ9I"),i=n.n(e);for(var s in e)["default"].indexOf(s)<0&&function(t){n.d(o,t,(function(){return e[t]}))}(s);o.default=i.a}}]);