(window.webpackJsonp=window.webpackJsonp||[]).push([[58],{"0uE6":function(t,e,a){"use strict";a.r(e);var s=a("hS7L"),n=a.n(s);for(var r in s)["default"].indexOf(r)<0&&function(t){a.d(e,t,(function(){return s[t]}))}(r);e.default=n.a},ECE6:function(t,e,a){"use strict";a.r(e);var s=a("K4+T"),n=a("0uE6");for(var r in n)["default"].indexOf(r)<0&&function(t){a.d(e,t,(function(){return n[t]}))}(r);a("szX8");var i=a("gp09"),o=Object(i.a)(n.default,s.a,s.b,!1,null,null,null);e.default=o.exports},"K4+T":function(t,e,a){"use strict";a.d(e,"a",(function(){return s})),a.d(e,"b",(function(){return n}));var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"todo_detail_wrap"},[e("van-nav-bar",{attrs:{title:t.$route.meta.title,"left-arrow":"","right-text":"  ",fixed:""},on:{"click-left":t.onClickLeft}}),t._v(" "),e("div",{staticClass:"main_wrap"},[e("div",{staticClass:"base_mes"},[e("p",{staticClass:"title"},[t._v("基本信息")]),t._v(" "),e("van-row",[e("van-col",{attrs:{span:"12"}},[e("p",{staticClass:"gray_text"},[t._v("姓名："+t._s(t.details.name))])]),t._v(" "),e("van-col",{attrs:{span:"12"}},[e("p",{staticClass:"gray_text"},[t._v("审核状态："+t._s(t.authStatus[t.details.status]))])]),t._v(" "),e("van-col",{attrs:{span:"12"}},[e("p",{staticClass:"gray_text"},[t._v("单位："+t._s(t.details.company))])]),t._v(" "),e("van-col",{attrs:{span:"12"}},[e("p",{staticClass:"gray_text"},[t._v("手机号码："+t._s(t.$route.query.phone))])]),t._v(" "),e("van-col",{attrs:{span:"24"}},[e("p",{staticClass:"gray_text"},[t._v("地区："+t._s(t.region))])]),t._v(" "),e("van-col",{attrs:{span:"24"}},[e("p",{staticClass:"gray_text"},[t._v("备注："+t._s(t.details.remark))])])],1)],1),t._v(" "),t.authPermission&&1===t.details.status?e("div",{staticClass:"bottom_btns"},[e("van-button",{staticClass:"btn cancel",on:{click:function(e){t.showReason=!0}}},[t._v("驳回")]),t._v(" "),e("van-button",{staticClass:"btn pass",attrs:{"loading-text":"通过"},on:{click:t.getChecker}},[t._v("通过")])],1):t._e()]),t._v(" "),e("van-dialog",{attrs:{title:"备注","show-cancel-button":"","before-close":t.beforeClose},model:{value:t.showReason,callback:function(e){t.showReason=e},expression:"showReason"}},[e("van-field",{attrs:{rows:"4",type:"textarea",placeholder:"请输入审核结果",required:""},model:{value:t.details.result,callback:function(e){t.$set(t.details,"result",e)},expression:"details.result"}})],1),t._v(" "),e("CustomCascader",{attrs:{list:t.cascaderList,options:t.cascaderOptions},on:{"on-confirm":t.cascaderConfirm},model:{value:t.showCascader,callback:function(e){t.showCascader=e},expression:"showCascader"}})],1)},n=[]},hS7L:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=d(a("6ZY3")),n=d(a("cLjf")),r=d(a("hDQ3")),i=d(a("bS4n")),o=a("dzbt"),c=d(a("tI4l")),u=d(a("7Qib")),l=d(a("tHAz"));function d(t){return t&&t.__esModule?t:{default:t}}e.default={components:{CustomCascader:l.default},data:function(){return{taskType:this.$route.query.taskType,details:{},authStatus:c.default.authStatus,showReason:!1,showDepart:!1,showPopup:!1,columns:[],showCascader:!1,cascaderList:[],cascaderOptions:{type:"department",multiple:!1}}},computed:(0,i.default)({},(0,o.mapState)(["userInfo"]),(0,o.mapGetters)(["permissions"]),{authPermission:function(){return!!this.permissions&&this.permissions.includes("auth_list:approval")},region:function(){if(this.details.province||this.details.city)return""+this.details.province+this.details.city}}),created:function(){},mounted:function(){this.getDetails()},methods:{getChecker:function(){var t=this;return(0,r.default)(n.default.mark((function e(){return n.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.cascaderList.length){e.next=4;break}return e.next=3,t.getFirstLayerOrg();case 3:t.cascaderList=e.sent;case 4:t.showCascader=!0;case 5:case"end":return e.stop()}}),e,t)})))()},getFirstLayerOrg:function(){var t=this;return(0,r.default)(n.default.mark((function e(){var a,s,r,i,o,c,u;return n.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$api.org.queryAllByParentId({id:""});case 2:for(a=e.sent,s=[],r=a.data,i=null==r?0:r.length,o=0;o<i;o++)c=r[o],(u={}).id=c.id,u.name=c.name,u.children=[],u.level=0,u.show=!1,u.hasChildren="0"==c.type,s.push(u);return e.abrupt("return",s);case 8:case"end":return e.stop()}}),e,t)})))()},cascaderConfirm:function(t){this.details.orgId=t[0].id,this.details.orgName=t[0].name,this.authAction(!0)},onClickLeft:function(){this.$router.go(-1)},getDetails:function(){var t=this;return(0,r.default)(n.default.mark((function e(){var a,s;return n.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.$route.params.id,e.next=3,t.$api.authentication.detail({id:a});case 3:s=e.sent,t.details=s.data||{};case 5:case"end":return e.stop()}}),e,t)})))()},beforeClose:function(t,e){"confirm"===t?u.default.isEmpty(this.details.result,"请输入审核结果")?e(!1):this.authAction(!1,e):e()},authAction:function(t){var e=this;return(0,r.default)(n.default.mark((function a(){var r;return n.default.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return r=(0,s.default)({},e.details,{status:t?2:3,isLoad:!1}),a.prev=1,a.next=4,e.$api.authentication.approval(r);case 4:a.sent,e.$toast.success("提交成功"),setTimeout((function(){e.$router.go(-1)}),2500),a.next=11;break;case 9:a.prev=9,a.t0=a.catch(1);case 11:case"end":return a.stop()}}),a,e,[[1,9]])})))()}}}},qnkb:function(t,e,a){},szX8:function(t,e,a){"use strict";a("qnkb")}}]);