(window.webpackJsonp=window.webpackJsonp||[]).push([[90],{"0aMi":function(t,e,a){"use strict";a.r(e);var s=a("bzJ6"),i=a("vhlL");for(var n in i)["default"].indexOf(n)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(n);a("mg4r");var o=a("gp09"),r=Object(o.a)(i.default,s.a,s.b,!1,null,null,null);e.default=r.exports},Gsa5:function(t,e,a){},bzJ6:function(t,e,a){"use strict";a.d(e,"a",(function(){return s})),a.d(e,"b",(function(){return i}));var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"todo_list_wrap"},[e("van-nav-bar",{attrs:{title:t.$route.meta.title,"left-arrow":"","right-text":"  ",fixed:""},on:{"click-left":t.onClickLeft}}),t._v(" "),e("div",{staticClass:"list_wrap"},[e("ul",{staticClass:"tabs"},[e("li",{class:{active:0===t.active},on:{click:function(e){t.active=0}}},[e("span",[t._v("\n          待办"),t.myTodoCount?e("i",[t._v(t._s(t.myTodoCount))]):t._e()])]),t._v(" "),e("li",{class:{active:1===t.active},on:{click:function(e){t.active=1}}},[e("span",[t._v("已办")])]),t._v(" "),e("li",{class:{active:2===t.active},on:{click:function(e){t.active=2}}},[e("span",[t._v("发起的")])]),t._v(" "),e("li",{class:{active:3===t.active},on:{click:function(e){t.active=3}}},[e("span",[t._v("全部")])])]),t._v(" "),e("div",{staticClass:"content_wrap"},[e("scroller",{ref:"my_scroller",attrs:{"on-refresh":t.refresh,"on-infinite":t.infinite}},[e("div",{staticClass:"list"},t._l(t.todos,(function(a,s){return e("div",{key:s,staticClass:"item",on:{click:function(e){return t.toTodoDetails(a)}}},[e("div",{staticClass:"text clearfix"},[e("div",{staticClass:"g_left"},[t._v(t._s(a.title))]),t._v(" "),e("div",{staticClass:"label g_right",class:t.tagClass[a.taskType]},[t._v(t._s(t.transformTaksType(t.taskType[a.taskType],a)))])]),t._v(" "),e("div",{staticClass:"infos"},[e("span",[t._v(t._s(a.createTime))]),t._v(" "),e("span",[t._v(t._s(""===a.activeShortName||void 0===a.activeShortName||null===a.activeShortName?"":a.activeShortName))]),t._v(" "),e("span",{class:t.auditStateClass(a.auditState)},[t._v(t._s(t.auditState[a.auditState]))]),t._v(" "),2===t.active?e("span",[t._v(t._s(t.isType[a.isType]))]):t._e()])])})),0)])],1)])],1)},i=[]},mg4r:function(t,e,a){"use strict";a("Gsa5")},oTSe:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=c(a("cLjf")),i=c(a("hDQ3")),n=c(a("bS4n")),o=a("dzbt"),r=c(a("tI4l"));function c(t){return t&&t.__esModule?t:{default:t}}e.default={components:{},data:function(){return{dataEnd:!1,todos:[],pageParams:{pageSize:10,pageNo:1},active:0,tag:{text:"",class:""},taskType:r.default.auditType,tagClass:{fabu:"share",gaojian:"audit",baoming:"share"},auditState:r.default.auditState,isType:r.default.taskType,sent:!1}},computed:(0,n.default)({},(0,o.mapState)(["myTodoCount"])),watch:{active:function(t){isNaN(t)||(window.activeTab=t,this.$refs.my_scroller.triggerPullToRefresh())}},beforeRouteEnter:function(t,e,a){"My"===e.name?(delete window.activeTab,a((function(t){return t.active=0}))):a()},mounted:function(){this.active=window.activeTab||0},methods:(0,n.default)({},(0,o.mapMutations)(["SET_MY_TODO_COUNT"]),{onClickLeft:function(){this.$router.push({name:"My"})},infinite:function(t){this.sent||(this.dataEnd?(t(),this.$refs.my_scroller.finishInfinite(!0)):this.getTodos(t))},refresh:function(t){this.sent||(this.dataEnd=!1,this.$refs.my_scroller.finishInfinite(!1),this.pageParams.pageNo=1,this.getTodos(t))},getTodos:function(t){var e=this;return(0,i.default)(s.default.mark((function a(){var i;return s.default.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(e.sent=!0,i=void 0,0!==e.active){a.next=9;break}return a.next=5,e.$api.todo.getTodos((0,n.default)({isLoad:!1},e.pageParams));case 5:i=a.sent,e.SET_MY_TODO_COUNT(i.data.total),a.next=25;break;case 9:if(1!==e.active){a.next=15;break}return a.next=12,e.$api.todo.getDones((0,n.default)({isLoad:!1},e.pageParams));case 12:i=a.sent,a.next=25;break;case 15:if(2!==e.active){a.next=21;break}return a.next=18,e.$api.todo.queryMyData((0,n.default)({isLoad:!1},e.pageParams));case 18:i=a.sent,a.next=25;break;case 21:if(3!==e.active){a.next=25;break}return a.next=24,e.$api.todo.queryAllData((0,n.default)({isLoad:!1},e.pageParams));case 24:i=a.sent;case 25:1===e.pageParams.pageNo?e.todos=[].concat(i.data.list):e.todos=e.todos.concat(i.data.list),"function"==typeof t&&t(),e.$refs.my_scroller.finishPullToRefresh(),e.pageParams.pageNo===(i.data.pages||1)?(e.dataEnd=!0,e.$refs.my_scroller.finishInfinite(!0)):e.pageParams.pageNo++,e.sent=!1;case 30:case"end":return a.stop()}}),a,e)})))()},toTodoDetails:function(t){0===this.active?2===t.auditState?(delete t.createTime,delete t.updateTime,window.updateInfos=t,"fabu"===t.taskType?this.$router.push({name:"PublishTask",params:{id:t.contentId}}):this.$router.push({name:"CreateAdd",params:{type:t.type,actId:t.actId,id:t.contentId}})):this.$router.push({name:"TodoDetail",params:{id:t.contentId},query:{taskId:t.taskId,taskDefKey:t.taskDefKey,taskType:t.taskType,from:"todo"}}):this.$router.push({name:"TodoDetail",params:{id:t.contentId},query:{taskId:t.taskId,taskDefKey:t.taskDefKey,taskType:t.taskType}})},auditStateClass:function(t){var e="";switch(t){case 2:e="red";break;case 1:case 3:e="blue";break;case 4:e="green"}return e},transformTaksType:function(t,e){if("gaojian"===e.taskType){var a=t;switch(e.type){case 1:a="投稿文章";break;case 2:a="投稿视频";break;case 3:a="投稿图片"}return a}return t}})}},vhlL:function(t,e,a){"use strict";a.r(e);var s=a("oTSe"),i=a.n(s);for(var n in s)["default"].indexOf(n)<0&&function(t){a.d(e,t,(function(){return s[t]}))}(n);e.default=i.a}}]);