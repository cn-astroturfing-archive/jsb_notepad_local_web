(window.webpackJsonp=window.webpackJsonp||[]).push([[57],{"7cQw":function(e,t,n){"use strict";n("nVJO")},JVQW:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i(n("cLjf")),s=i(n("hDQ3"));n("dzbt");function i(e){return e&&e.__esModule?e:{default:e}}t.default={data:function(){return{pointOff:"",isExitDialog:!1,countdownMode:1,countdownTime:0,timer:null,currentAnswerNumber:1,questionsList:[],answer:{subjectiveQuestionNum:0,totalTime:0,subjectTime:0},answerText:"",choiceQuestionIsEnd:null,isCommiting:!1}},filters:{numberfilter:function(e){var t=["零","一","二","三","四","五","六","七","八","九"],n=["","十","百"];e=parseInt(e);var r=function(e){for(var r=e.toString().split("").reverse(),s="",i=0;i<r.length;i++)s=(0==i&&0==r[i]||i>0&&0==r[i]&&0==r[i-1]?"":t[r[i]]+(0==r[i]?n[0]:n[i]))+s;return s},s=Math.floor(e/100),i=e%100;i.toString().length<2&&(i="0"+i);var u=s?r(s)+"百"+r(i):r(e);return u=0==u.indexOf("一十")?u.replace("一十","十"):u},formatSeconds:function(e){if(0==e)return 0;var t=Math.floor(e/86400),n=Math.floor((e-24*t*3600)/3600),r=Math.floor((e-24*t*3600-3600*n)/60),s=e-24*t*3600-3600*n-60*r,i="";return n&&(i+=(n<10?"0"+n:n)+":"),i+=(r<10?"0"+r:r)+":"+(s<10?"0"+s:s)}},computed:{answerNumber:function(){return this.answer.subjectiveQuestionNum-this.questionsList.length+this.currentAnswerNumber},progressPercentage:function(){return Math.round(this.answerNumber/this.answer.subjectiveQuestionNum*100)}},mounted:function(){this.pointOff=this.$route.query.pointOff,this.getQuestionsList(),this.getAnswerDetail(),this.getAnswerSituation()},beforeDestroy:function(){this.clearTimer()},methods:{getAnswerSituation:function(){var e=this;return(0,s.default)(r.default.mark((function t(){var n,s;return r.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$api.answer.getAnswerSituation({id:e.$route.query.id});case 2:n=t.sent,s=n.data.choiceQuestionIsEnd,e.choiceQuestionIsEnd=s;case 5:case"end":return t.stop()}}),t,e)})))()},out:function(){var e=this;return(0,s.default)(r.default.mark((function t(){return r.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.answerSubject();case 2:0==e.choiceQuestionIsEnd?e.$router.push({name:"QuestionsGuide",query:{id:e.$route.query.id,from:"questions",pointOff:e.pointOff}}):e.$router.push({name:"AnswerSheet",query:{id:e.$route.query.id}});case 3:case"end":return t.stop()}}),t,e)})))()},goAnswer:function(){this.isExitDialog=!1},getQuestionsList:function(){var e=this;return(0,s.default)(r.default.mark((function t(){var n;return r.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$api.answer.getSubjectDataByActId({isLoad:!1,id:e.$route.query.id});case 2:(n=t.sent).data&&(e.questionsList=n.data);case 4:case"end":return t.stop()}}),t,e)})))()},getAnswerDetail:function(){var e=this;return(0,s.default)(r.default.mark((function t(){var n,s,i,u;return r.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$api.answer.answerDetail({id:e.$route.query.id});case 2:return n=t.sent,s=n.data,e.answer=s,t.next=7,e.$api.answer.answerTimeRemaining({isLoad:!1,id:e.$route.query.id});case 7:if(i=t.sent,0!=(u=i.data)){t.next=12;break}return e.$router.push({name:"EndAnswer",query:{id:e.$route.query.id,from:"questions",pointOff:e.pointOff,subjectType:e.$route.query.subjectType}}),t.abrupt("return");case 12:if(!(u<=-1)){t.next=17;break}e.countdownMode=1,e.countdownTime=s.subjectTime,t.next=22;break;case 17:if(e.countdownMode=2,e.countdownTime=u,u!=s.totalTime){t.next=22;break}return t.next=22,e.$api.answer.timeStart({isLoad:!1,id:e.$route.query.id});case 22:e.countdown();case 23:case"end":return t.stop()}}),t,e)})))()},countdown:function(){var e=this;this.timer=setInterval((function(){e.countdownTime--<=1&&(e.countdownTime=0),e.countdownTime<=0&&(e.isCommiting||e.doAnswer())}),1e3)},answerSubject:function(){var e=this;return(0,s.default)(r.default.mark((function t(){return r.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$api.answer.answerSubject({id:e.$route.query.id,type:2});case 2:case"end":return t.stop()}}),t,e)})))()},clearTimer:function(){this.timer&&(clearInterval(this.timer),this.timer=null)},showExitDialog:function(){this.isExitDialog=!0},nextQuestion:function(){this.currentAnswerNumber++,this.answerText="",1==this.countdownMode&&(this.countdownTime=this.answer.subjectTime)},doAnswer:function(){var e=this;return(0,s.default)(r.default.mark((function t(){var n,s,i;return r.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=!1,s={answer:e.answerText,consumeTime:"",position:e.currentAnswerNumber==e.questionsList.length?"-1":e.currentAnswerNumber,subjectId:e.questionsList[e.currentAnswerNumber-1].subjectId,type:2},e.isCommiting=!0,!(e.countdownTime>0)||e.answerText){t.next=6;break}return e.$toast("请填写答案！"),t.abrupt("return");case 6:return e.countdownTime<=0&&(n=!0),n&&2==e.countdownMode&&(s.timeEnd=1),t.prev=8,t.next=11,e.$api.answer.userAnswer(s);case 11:t.next=19;break;case 13:return t.prev=13,t.t0=t.catch(8),i=t.t0&&t.t0.message?t.t0.message:"",e.isCommiting=!1,e.$toast(i+" 提交失败"),t.abrupt("return");case 19:if(!n){t.next=26;break}if(e.$toast("时间到自动提交成功"),2!=e.countdownMode){t.next=24;break}return e.$router.push({name:"EndAnswer",query:{id:e.$route.query.id,from:"questions",pointOff:e.pointOff,subjectType:e.$route.query.subjectType}}),t.abrupt("return");case 24:t.next=27;break;case 26:e.$toast("提交成功");case 27:e.currentAnswerNumber==e.questionsList.length?0==e.choiceQuestionIsEnd?e.$router.push({name:"QuestionsGuide",query:{id:e.$route.query.id,from:"questions",pointOff:e.pointOff}}):e.$router.push({name:"EndAnswer",query:{id:e.$route.query.id,from:"questions",pointOff:e.pointOff,subjectType:e.$route.query.subjectType}}):(e.nextQuestion(),e.isCommiting=!1);case 28:case"end":return t.stop()}}),t,e,[[8,13]])})))()}}}},SMkG:function(e,t,n){"use strict";n.r(t);var r=n("xgyq"),s=n("Z4gf");for(var i in s)["default"].indexOf(i)<0&&function(e){n.d(t,e,(function(){return s[e]}))}(i);n("7cQw");var u=n("gp09"),a=Object(u.a)(s.default,r.a,r.b,!1,null,"576276c6",null);t.default=a.exports},Z4gf:function(e,t,n){"use strict";n.r(t);var r=n("JVQW"),s=n.n(r);for(var i in r)["default"].indexOf(i)<0&&function(e){n.d(t,e,(function(){return r[e]}))}(i);t.default=s.a},nVJO:function(e,t,n){},xgyq:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return s}));var r=function(){var e=this,t=e._self._c;return t("div",{staticClass:"Rank_wrap"},[t("van-nav-bar",{attrs:{title:e.$route.meta.title,"left-text":"返回","right-text":"  ","left-arrow":"",fixed:""},on:{"click-left":e.showExitDialog},scopedSlots:e._u([{key:"right",fn:function(){return[t("div",{staticClass:"placehoder"})]},proxy:!0}])}),e._v(" "),t("div",{staticClass:"countDown"},[1==e.countdownMode?[t("span",{staticClass:"seconds"},[e._v(e._s(e.countdownTime))]),e._v(" "),t("span",{staticClass:"seconds_time"},[e._v("s")])]:[t("span",{staticClass:"secondstotalTime"},[e._v(e._s(e._f("formatSeconds")(e.countdownTime)))]),e._v(" "),t("span",{staticClass:"seconds_time"})]],2),e._v(" "),e.answer.subjectiveQuestionNum>0?t("div",{staticClass:"number"},[t("span",[e._v("第"+e._s(e._f("numberfilter")(e.answerNumber))+"题")]),e._v(" "),t("span",[e._v(e._s(e.answerNumber)+"/"+e._s(e.answer.subjectiveQuestionNum))])]):e._e(),e._v(" "),t("div",{staticClass:"bar"},[t("van-slider",{attrs:{value:e.progressPercentage,disabled:""}})],1),e._v(" "),e._l(e.questionsList,(function(n,r){return t("div",{directives:[{name:"show",rawName:"v-show",value:r==e.currentAnswerNumber-1,expression:"index == (currentAnswerNumber - 1)"}],key:r,staticClass:"rank_contant"},[t("div",{staticClass:"contant"},[e._v("\n      (主观题) "+e._s(n.subject)+"\n    ")]),e._v(" "),t("p",{staticClass:"answer-area-title"},[e._v("回答区域")]),e._v(" "),t("van-field",{staticClass:"answer-area",attrs:{rows:"5",autosize:"",label:"","label-width":"0",type:"textarea",placeholder:"请输入文字","show-word-limit":""},model:{value:e.answerText,callback:function(t){e.answerText=t},expression:"answerText"}}),e._v(" "),t("button",{staticClass:"determine",on:{click:e.doAnswer}},[e.currentAnswerNumber<e.questionsList.length?[t("span",[e._v("确定")])]:[t("span",[e._v("提交")])]],2)],1)})),e._v(" "),t("van-dialog",{attrs:{showConfirmButton:!1,closeOnClickOverlay:!0},model:{value:e.isExitDialog,callback:function(t){e.isExitDialog=t},expression:"isExitDialog"}},[t("div",{staticClass:"title"},[e._v("确定要退出答题？")]),e._v(" "),t("div",{staticClass:"dialog_contant"},[e._v("退出后将以当前进度提交成绩。")]),e._v(" "),t("div",{staticClass:"footer_btn"},[t("span",{staticClass:"out_btn",on:{click:e.out}},[e._v("退出")]),e._v(" "),t("span",{staticClass:"go_btn",on:{click:e.goAnswer}},[e._v("继续答题")])])])],2)},s=[]}}]);