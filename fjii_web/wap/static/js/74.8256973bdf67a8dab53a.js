(window.webpackJsonp=window.webpackJsonp||[]).push([[74],{"55NC":function(e,t,o){"use strict";o.r(t);var r=o("p4Sj"),n=o("KfVu");for(var a in n)["default"].indexOf(a)<0&&function(e){o.d(t,e,(function(){return n[e]}))}(a);o("omhb");var s=o("gp09"),i=Object(s.a)(n.default,r.a,r.b,!1,null,null,null);t.default=i.exports},AFOd:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i(o("cLjf")),n=i(o("hDQ3")),a=i(o("mIWY")),s=i(o("7Qib"));function i(e){return e&&e.__esModule?e:{default:e}}t.default={components:{keyboard:a.default},data:function(){return{keyborderType:"",keyboardInput:"",showKeyborad:!1,form:{oldPassword:"",newPassword:"",confirmPassword:""},showPwd:!1,showPwd2:!1}},mounted:function(){var e=this;document.body.querySelector(".my_mod_password_wrap").addEventListener("click",(function(t){"BUTTON"!==t.target.tagName&&e.hide()}))},methods:{toggleKeyborad:function(e,t){if(this.showKeyborad=e,e)switch(this.keyborderType=t,t){case"newPassword":this.keyboardInput=this.form.newPassword;break;case"confirmPassword":this.keyboardInput=this.form.confirmPassword}else this.keyborderType=""},hide:function(e){this.toggleKeyborad(!1)},changed:function(e){switch(this.keyborderType){case"newPassword":this.form.newPassword=e;break;case"confirmPassword":this.form.confirmPassword=e}},onClickLeft:function(){this.$router.go(-1)},validator:function(e){return e===this.form.newPassword},validatorPassword:function(e){return new RegExp("^(?![A-Za-z0-9]+$)(?![a-z0-9\\W]+$)(?![A-Za-z\\W]+$)(?![A-Z0-9\\W]+$)[a-zA-Z0-9\\W]{8,}$").test(e)},onSubmit:function(e){var t=this;return(0,n.default)(r.default.mark((function o(){var a;return r.default.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return console.log(e),e.oldPassword,a=e.newPassword,o.next=4,t.$api.user.updatePasswordNew({password:s.default.SHA1(a)});case 4:t.$dialog.alert({message:"密码修改成功, 请重新登录"}).then((0,n.default)(r.default.mark((function e(){return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$api.login.logout();case 2:t.$router.push({name:"Login"});case 3:case"end":return e.stop()}}),e,t)}))));case 5:case"end":return o.stop()}}),o,t)})))()},toggleViewPwd:function(e){this[e]=!this[e]}}}},KfVu:function(e,t,o){"use strict";o.r(t);var r=o("AFOd"),n=o.n(r);for(var a in r)["default"].indexOf(a)<0&&function(e){o.d(t,e,(function(){return r[e]}))}(a);t.default=n.a},bJ4p:function(e,t,o){},omhb:function(e,t,o){"use strict";o("bJ4p")},p4Sj:function(e,t,o){"use strict";o.d(t,"a",(function(){return r})),o.d(t,"b",(function(){return n}));var r=function(){var e=this,t=e._self._c;return t("div",{staticClass:"my_mod_password_wrap"},[t("van-nav-bar",{attrs:{title:e.$route.meta.title,"left-arrow":"","right-text":"  ",fixed:""},on:{"click-left":e.onClickLeft}}),e._v(" "),t("van-form",{on:{submit:e.onSubmit}},[t("van-cell-group",[t("van-field",{class:{active:"newPassword"===e.keyborderType},attrs:{label:"密码",name:"newPassword",type:e.showPwd?"text":"password",placeholder:"请输入密码","input-align":"right",readonly:"",clickable:"",rules:[{required:!0,message:"密码不能为空"},{validator:e.validatorPassword,message:"密码必须包含大小写,特殊符号,长度8位及以上"}]},on:{click:function(t){return t.stopPropagation(),e.toggleKeyborad(!0,"newPassword")}},scopedSlots:e._u([{key:"button",fn:function(){return[t("button",{staticClass:"btn_view_pwd",class:{active:e.showPwd},attrs:{type:"button"},on:{click:function(t){return e.toggleViewPwd("showPwd")}}})]},proxy:!0}]),model:{value:e.form.newPassword,callback:function(t){e.$set(e.form,"newPassword",t)},expression:"form.newPassword"}}),e._v(" "),t("van-field",{class:{active:"confirmPassword"===e.keyborderType},attrs:{label:"确认密码",name:"confirmPassword",type:e.showPwd2?"text":"password",placeholder:"请再次输入新密码","input-align":"right",readonly:"",clickable:"",rules:[{required:!0,message:"密码不能为空"},{validator:e.validator,message:"输入的密码不一致"}]},on:{click:function(t){return t.stopPropagation(),e.toggleKeyborad(!0,"confirmPassword")}},scopedSlots:e._u([{key:"button",fn:function(){return[t("button",{staticClass:"btn_view_pwd",class:{active:e.showPwd2},attrs:{type:"button"},on:{click:function(t){return e.toggleViewPwd("showPwd2")}}})]},proxy:!0}]),model:{value:e.form.confirmPassword,callback:function(t){e.$set(e.form,"confirmPassword",t)},expression:"form.confirmPassword"}})],1),e._v(" "),t("div",{staticClass:"bottom_btns"},[t("van-button",{attrs:{type:"info",block:"","native-type":"submit"}},[e._v("提交")])],1)],1),e._v(" "),t("keyboard",{attrs:{show:e.showKeyborad},on:{changed:e.changed,hide:e.hide},model:{value:e.keyboardInput,callback:function(t){e.keyboardInput=t},expression:"keyboardInput"}})],1)},n=[]}}]);