(window.webpackJsonp=window.webpackJsonp||[]).push([[55],{"1DdK":function(t,e,n){"use strict";n("WMju")},AZ5f:function(t,e,n){"use strict";n.r(e);var i=n("Svfb"),s=n.n(i);for(var r in i)["default"].indexOf(r)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(r);e.default=s.a},Svfb:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(n("cLjf")),s=r(n("hDQ3"));n("dzbt");function r(t){return t&&t.__esModule?t:{default:t}}e.default={data:function(){return{countdownMode:1,value:0,isShow:!1,flag:0,questionsArry:[],checkedA:!1,checkedB:!1,checkedC:!1,checkedD:!1,checked:!0,checkedData:[],optionA:"",optionB:"",optionC:"",optionD:"",correctConsent:"",subjectList:[],answer:{totalNumber:0},subjectTime:0,interval:"",intervaltotalTime:null,timer:null,startdisable:!1,radio:"",dangerSelsectA:!1,dangerSelsectB:!1,dangerSelsectC:!1,dangerSelsectD:!1,hash:[],totalTime:0,subjectiveQuestionIsEnd:null,isCommiting:!1,pointOff:""}},mounted:function(){this.pointOff=this.$route.query.pointOff,this.questionsList(),this.getAnswerSituation()},filters:{numberfilter:function(t){var e=["零","一","二","三","四","五","六","七","八","九"],n=["","十","百"];t=parseInt(t);var i=function(t){for(var i=t.toString().split("").reverse(),s="",r=0;r<i.length;r++)s=(0==r&&0==i[r]||r>0&&0==i[r]&&0==i[r-1]?"":e[i[r]]+(0==i[r]?n[0]:n[r]))+s;return s},s=Math.floor(t/100),r=t%100;r.toString().length<2&&(r="0"+r);var a=s?i(s)+"百"+i(r):i(t);return a=0==a.indexOf("一十")?a.replace("一十","十"):a},formatSeconds:function(t){if(0==t)return 0;var e=Math.floor(t/86400),n=Math.floor((t-24*e*3600)/3600),i=Math.floor((t-24*e*3600-3600*n)/60),s=t-24*e*3600-3600*n-60*i,r="";return n&&(r+=(n<10?"0"+n:n)+":"),r+=(i<10?"0"+i:i)+":"+(s<10?"0"+s:s)}},computed:{danger:{set:function(){},get:function(){if(0!=this.correctConsent.length){var t=-1!=this.checkedData.toString().indexOf("A"),e=-1!=this.correctConsent.indexOf("A");if(t&&e)return this.danger="contain";if(t&&!e)return this.danger="notcontain";if(!t&&e)return this.danger="leak";if(!t&&!e)return this.danger=""}}},dangerB:{get:function(){if(0!=this.correctConsent.length){var t=-1!=this.checkedData.toString().indexOf("B"),e=-1!=this.correctConsent.indexOf("B");if(t&&e)return this.dangerB="contain";if(t&&!e)return this.dangerB="notcontain";if(!t&&e)return this.dangerB="leak";if(!t&&!e)return this.dangerB=""}},set:function(){}},dangerC:{set:function(){},get:function(){if(0!=this.correctConsent.length){var t=-1!=this.checkedData.toString().indexOf("C"),e=-1!=this.correctConsent.indexOf("C");if(t&&e)return this.dangerC="contain";if(t&&!e)return this.dangerC="notcontain";if(!t&&e)return this.dangerC="leak";if(!t&&!e)return this.dangerC=""}}},dangerD:{set:function(){},get:function(){if(0!=this.correctConsent.length){var t=-1!=this.checkedData.toString().indexOf("D"),e=-1!=this.correctConsent.indexOf("D");if(t&&e)return this.dangerD="contain";if(t&&!e)return this.dangerD="notcontain";if(!t&&e)return this.dangerD="leak";if(!t&&!e)return this.dangerD=""}}},selsectA:{set:function(){},get:function(){if(0!=this.correctConsent.length){var t=-1!=this.checkedData.toString().indexOf("A"),e=-1!=this.correctConsent.indexOf("A");if(t&&e)return this.danger="contain";if(t&&!e)return this.danger="notcontain";if(!t&&e)return this.danger="contain";if(!t&&!e)return this.danger=""}}},selsectB:{set:function(){},get:function(){if(0!=this.correctConsent.length){var t=-1!=this.checkedData.toString().indexOf("B"),e=-1!=this.correctConsent.indexOf("B");if(t&&e)return this.dangerB="contain";if(t&&!e)return this.dangerB="notcontain";if(!t&&e)return this.dangerB="contain";if(!t&&!e)return this.dangerB=""}}},selsectC:{set:function(){},get:function(){if(0!=this.correctConsent.length){var t=-1!=this.checkedData.toString().indexOf("C"),e=-1!=this.correctConsent.indexOf("C");if(t&&e)return this.dangerC="contain";if(t&&!e)return this.dangerC="notcontain";if(!t&&e)return this.dangerC="contain";if(!t&&!e)return this.dangerC=""}}},selsectD:{set:function(){},get:function(){if(0!=this.correctConsent.length){var t=-1!=this.checkedData.toString().indexOf("D"),e=-1!=this.correctConsent.indexOf("D");if(t&&e)return this.dangerD="contain";if(t&&!e)return this.dangerD="notcontain";if(!t&&e)return this.dangerD="contain";if(!t&&!e)return this.dangerD=""}}}},created:function(){},beforeDestroy:function(){this.closeTimer()},methods:{getAnswerSituation:function(){var t=this;return(0,s.default)(i.default.mark((function e(){var n,s;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$api.answer.getAnswerSituation({id:t.$route.query.id});case 2:n=e.sent,s=n.data.subjectiveQuestionIsEnd,t.subjectiveQuestionIsEnd=s;case 5:case"end":return e.stop()}}),e,t)})))()},gobackIndex:function(){this.$router.go(-1)},indexOf:function(t){for(var e=0;e<this.checkedData.length;e++)if(this.checkedData[e]==t)return e;return-1},remove:function(t){var e=this.indexOf(t);e>-1&&this.checkedData.splice(e,1)},selectA:function(){this.checkedA=!this.checkedA,this.checkedA?(this.optionA="A",this.checkedData.push(this.optionA)):this.remove(this.optionA)},selectB:function(){this.checkedB=!this.checkedB,this.checkedB?(this.optionB="B",this.checkedData.push(this.optionB)):this.remove(this.optionB)},selectC:function(){this.checkedC=!this.checkedC,this.checkedC?(this.optionC="C",this.checkedData.push(this.optionC)):this.remove(this.optionC)},selectD:function(){this.checkedD=!this.checkedD,this.checkedD?(this.optionD="D",this.checkedData.push(this.optionD)):this.remove(this.optionD)},doAnswer:function(){var t=this;return(0,s.default)(i.default.mark((function e(){var n,s,r;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.checkedData=t.checkedData.sort(),n=!1,s={answer:t.checkedData.toString(),consumeTime:"",position:t.flag==t.questionsArry.length-1?"-1":t.flag+1,subjectId:t.questionsArry[t.flag].subjectId,type:1},t.isCommiting=!0,0!=t.checkedData.length||!(t.subjectTime>0||t.totalTime>0)){e.next=7;break}return t.$toast("请选择答案！"),e.abrupt("return");case 7:return t.subjectTime<=0&&t.totalTime<=0&&(n=!0),n&&2==t.countdownMode&&(s.timeEnd=1),e.prev=9,e.next=12,t.$api.answer.userAnswer(s);case 12:e.next=20;break;case 14:return e.prev=14,e.t0=e.catch(9),r=e.t0&&e.t0.message?e.t0.message:"",t.isCommiting=!1,t.$toast(r+" 提交失败"),e.abrupt("return");case 20:if(!n){e.next=27;break}if(t.$toast("时间到自动提交成功"),2!=t.countdownMode){e.next=25;break}return t.$router.push({name:"EndAnswer",query:{id:t.$route.query.id,from:"questions",pointOff:t.pointOff,subjectType:t.$route.query.subjectType}}),e.abrupt("return");case 25:e.next=28;break;case 27:t.$toast("提交成功");case 28:t.flag<t.questionsArry.length-1?(t.nextQuestion(),t.isCommiting=!1):0==t.subjectiveQuestionIsEnd?t.$router.push({name:"QuestionsGuide",query:{id:t.$route.query.id,pointOff:t.pointOff}}):t.$router.push({name:"EndAnswer",query:{id:t.$route.query.id,from:"questions",pointOff:t.pointOff,subjectType:t.$route.query.subjectType}});case 29:case"end":return e.stop()}}),e,t,[[9,14]])})))()},singleA:function(){this.dangerSelsectA=!0,this.dangerSelsectB=!1,this.dangerSelsectC=!1,this.dangerSelsectD=!1,this.dangerSelsectA&&this.checkedData.push("A"),this.unique4(this.checkedData),this.checkedData=this.hash,this.checkedData.length>1&&this.checkedData.shift()},singleC:function(){this.dangerSelsectA=!1,this.dangerSelsectB=!1,this.dangerSelsectC=!0,this.dangerSelsectD=!1,this.dangerSelsectC&&this.checkedData.push("C"),this.unique4(this.checkedData),this.checkedData=this.hash,this.checkedData.length>1&&this.checkedData.shift()},singleB:function(){this.dangerSelsectA=!1,this.dangerSelsectB=!0,this.dangerSelsectC=!1,this.dangerSelsectD=!1,this.dangerSelsectB&&this.checkedData.push("B"),this.unique4(this.checkedData),this.checkedData=this.hash,this.checkedData.length>1&&this.checkedData.shift()},singleD:function(){this.dangerSelsectA=!1,this.dangerSelsectB=!1,this.dangerSelsectC=!1,this.dangerSelsectD=!0,this.dangerSelsectD&&this.checkedData.push("D"),this.unique4(this.checkedData),this.checkedData=this.hash,this.checkedData.length>1&&this.checkedData.shift()},out:function(){var t=this;return(0,s.default)(i.default.mark((function e(){return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.answerSubject();case 2:0==t.subjectiveQuestionIsEnd?t.$router.push({name:"QuestionsGuide",query:{id:t.$route.query.id,pointOff:t.pointOff}}):t.$router.push({name:"AnswerSheet",query:{id:t.$route.query.id}});case 3:case"end":return e.stop()}}),e,t)})))()},answerSubject:function(){var t=this;return(0,s.default)(i.default.mark((function e(){return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$api.answer.answerSubject({id:t.$route.query.id,type:1});case 2:case"end":return e.stop()}}),e,t)})))()},closeTimer:function(){this.timer&&(clearInterval(this.timer),this.timer=null),this.intervaltotalTime&&(clearInterval(this.intervaltotalTime),this.intervaltotalTime=null)},unique4:function(t){this.hash=[];for(var e=0;e<t.length;e++){for(var n=e+1;n<t.length;n++)t[e]===t[n]&&++e;this.hash.push(t[e])}return this.hash},countdown:function(){var t=this;1==this.countdownMode?this.timer=setInterval((function(){t.subjectTime--<=1&&(t.subjectTime=0),t.subjectTime<=0&&(t.isCommiting||t.doAnswer())}),1e3):0!=this.totalTime&&0==this.subjectTime&&(this.intervaltotalTime=setInterval((function(){t.totalTime--<=1&&clearInterval(t.intervaltotalTime),t.totalTime<=0&&t.doAnswer()}),1e3))},goAnswer:function(){this.isShow=!1},answerDetail:function(){var t=this;return(0,s.default)(i.default.mark((function e(){var n,s;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$api.answer.answerDetail({id:t.$route.query.id});case 2:return n=e.sent,t.answer=n.data,e.next=6,t.$api.answer.answerTimeRemaining({isLoad:!1,id:t.$route.query.id});case 6:if(!((s=e.sent).data<=-1)){e.next=13;break}t.countdownMode=1,t.subjectTime=t.answer.subjectTime,t.totalTime=0,e.next=22;break;case 13:if(t.countdownMode=2,!(s.data>0&&s.data==t.answer.totalTime)){e.next=17;break}return e.next=17,t.$api.answer.timeStart({isLoad:!1,id:t.$route.query.id});case 17:if(0!=s.data){e.next=20;break}return t.$router.push({name:"EndAnswer",query:{id:t.$route.query.id,from:"questions",pointOff:t.$route.query.pointOff,subjectType:t.$route.query.subjectType}}),e.abrupt("return");case 20:t.subjectTime=0,t.totalTime=s.data;case 22:t.updateProgress(),t.countdown();case 24:case"end":return e.stop()}}),e,t)})))()},updateProgress:function(){this.value=Math.round(100*(this.answer.totalNumber-this.questionsArry.length+this.flag+1)/this.answer.totalNumber)},nextQuestion:function(){this.flag++,this.updateProgress(),this.correctConsent="",this.checkedData.toString(),this.checkedData=[],this.checkedA=!1,this.checkedB=!1,this.checkedC=!1,this.checkedD=!1,this.dangerSelsectA=!1,this.dangerSelsectB=!1,this.dangerSelsectC=!1,this.dangerSelsectD=!1,this.checked=!0,1==this.countdownMode&&(this.subjectTime=this.answer.subjectTime)},onClickLeft:function(){this.isShow=!this.isShow},questionsList:function(){var t=this;return(0,s.default)(i.default.mark((function e(){var n;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$api.answer.questionsList({isLoad:!1,id:t.$route.query.id});case 2:(n=e.sent).data&&(t.questionsArry=n.data,t.answerDetail());case 4:case"end":return e.stop()}}),e,t)})))()}}}},WMju:function(t,e,n){},ciTr:function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return s}));var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"Rank_wrap"},[e("van-nav-bar",{attrs:{title:t.$route.meta.title,"left-text":"返回","right-text":"  ","left-arrow":"",fixed:""},on:{"click-left":t.onClickLeft},scopedSlots:t._u([{key:"right",fn:function(){return[e("div",{staticClass:"placehoder"})]},proxy:!0}])}),t._v(" "),e("div",{staticClass:"countDown"},[t.subjectTime?e("span",{staticClass:"seconds"},[t._v(t._s(t.subjectTime))]):t._e(),t._v(" "),t.subjectTime?e("span",{staticClass:"seconds_time"},[t._v("s")]):t._e(),t._v(" "),t.totalTime?e("span",{staticClass:"secondstotalTime"},[t._v(t._s(t._f("formatSeconds")(t.totalTime)))]):t._e(),t._v(" "),t.totalTime?e("span",{staticClass:"seconds_time"}):t._e()]),t._v(" "),t.answer.totalNumber>0?e("div",{staticClass:"number"},[e("span",[t._v("第"+t._s(t._f("numberfilter")(t.answer.totalNumber-t.questionsArry.length+t.flag+1))+"题")]),t._v(" "),e("span",[t._v(t._s(t.answer.totalNumber-t.questionsArry.length+t.flag+1)+"/"+t._s(t.answer.totalNumber))])]):t._e(),t._v(" "),e("div",{staticClass:"bar"},[e("van-slider",{attrs:{disabled:""},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}})],1),t._v(" "),t._l(t.questionsArry,(function(n,i){return e("div",{directives:[{name:"show",rawName:"v-show",value:i==t.flag,expression:"index == flag"}],key:i,staticClass:"rank_contant"},[e("div",{staticClass:"contant"},[t._v("\n      ("+t._s(1==n.multipleChoice?"多选":"单选")+"题) "+t._s(n.subject)+"\n    ")]),t._v(" "),1==n.multipleChoice?e("div",{staticClass:"btn_groud"},[n.optionA?e("span",{class:[t.checkedA?"active":"",t.danger],on:{click:t.selectA}},[t._v("A."+t._s(n.optionA))]):t._e(),t._v(" "),n.optionB?e("span",{class:[t.checkedB?"active":"",t.dangerB],on:{click:t.selectB}},[t._v("B."+t._s(n.optionB))]):t._e(),t._v(" "),n.optionC?e("span",{class:[t.checkedC?"active":"",t.dangerC],on:{click:t.selectC}},[t._v("C."+t._s(n.optionC))]):t._e(),t._v(" "),n.optionD?e("span",{class:[t.checkedD?"active":"",t.dangerD],on:{click:t.selectD}},[t._v("D."+t._s(n.optionD))]):t._e()]):e("div",{staticClass:"btn_groud"},[n.optionA?e("span",{class:[t.dangerSelsectA?"active":"",t.selsectA],on:{click:t.singleA}},[t._v("A."+t._s(n.optionA))]):t._e(),t._v(" "),n.optionB?e("span",{class:[t.dangerSelsectB?"active":"",t.selsectB],on:{click:t.singleB}},[t._v("B."+t._s(n.optionB))]):t._e(),t._v(" "),n.optionC?e("span",{class:[t.dangerSelsectC?"active":"",t.selsectC],on:{click:t.singleC}},[t._v("C."+t._s(n.optionC))]):t._e(),t._v(" "),n.optionD?e("span",{class:[t.dangerSelsectD?"active":"",t.selsectD],on:{click:t.singleD}},[t._v("D."+t._s(n.optionD))]):t._e()]),t._v(" "),e("button",{staticClass:"determine",on:{click:t.doAnswer}},[e("span",[t._v(t._s(t.flag<t.questionsArry.length-1?"确定":"提交"))])])])})),t._v(" "),e("van-dialog",{attrs:{showConfirmButton:!1,closeOnClickOverlay:!0},model:{value:t.isShow,callback:function(e){t.isShow=e},expression:"isShow"}},[e("div",{staticClass:"title"},[t._v("确定要退出答题？")]),t._v(" "),e("div",{staticClass:"dialog_contant"},[t._v("退出后将以当前进度提交成绩。")]),t._v(" "),e("div",{staticClass:"footer_btn"},[e("span",{staticClass:"out_btn",on:{click:t.out}},[t._v("退出")]),t._v(" "),e("span",{staticClass:"go_btn",on:{click:t.goAnswer}},[t._v("继续答题")])])])],2)},s=[]},jafu:function(t,e,n){"use strict";n.r(e);var i=n("ciTr"),s=n("AZ5f");for(var r in s)["default"].indexOf(r)<0&&function(t){n.d(e,t,(function(){return s[t]}))}(r);n("1DdK");var a=n("gp09"),c=Object(a.a)(s.default,i.a,i.b,!1,null,"060c97c0",null);e.default=c.exports}}]);