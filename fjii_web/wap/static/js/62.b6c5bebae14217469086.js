(window.webpackJsonp=window.webpackJsonp||[]).push([[62],{GtgP:function(e,t,a){"use strict";a.r(t);var n=a("YORk"),r=a.n(n);for(var i in n)["default"].indexOf(i)<0&&function(e){a.d(t,e,(function(){return n[e]}))}(i);t.default=r.a},YORk:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=u(a("l2cO")),r=u(a("cLjf")),i=u(a("hDQ3")),s=u(a("bS4n"));a("afjY");var l=u(a("ZTyY")),o=u(a("tI4l")),c=a("dzbt");a("d8ex");function u(e){return e&&e.__esModule?e:{default:e}}t.default={components:{Share:l.default},data:function(){return{integralPageParams:{pageSize:10,pageNo:1},integralLists:[],integralType:o.default.integralType,integralSourceType:o.default.integralSourceType,loading:!1,finished:!1,integralSoonExpireInfo:{days:0,integral:0,expireDateStr:""}}},computed:(0,s.default)({},(0,c.mapState)(["userInfo"])),created:function(){this.selectIntergral()},methods:(0,s.default)({},(0,c.mapMutations)(["UPDATE_USER_INTERGRAL"]),{onClickLeft:function(){this.$router.go(-1)},queryPointsDetails:function(){var e=this;return(0,i.default)(r.default.mark((function t(){var a;return r.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$api.heroes.queryPointsDetails((0,s.default)({isLoad:!1},e.integralPageParams));case 2:a=t.sent,e.integralLists=1===e.integralPageParams.pageNo?[].concat(a.data.list):e.integralLists.concat(a.data.list),e.loading=!1,e.integralPageParams.pageNo===(a.data.pages||1)?e.finished=!0:e.integralPageParams.pageNo++;case 6:case"end":return t.stop()}}),t,e)})))()},statisticsSevenDays:function(){var e=this;return(0,i.default)(r.default.mark((function t(){var a,n,i,s,l,o,c;return r.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$api.task.statisticsSevenDays({wechat_share_task_id:e.$route.params.id});case 2:a=t.sent,n=a.data.reverse(),i=e.echartsOpts.xAxis.data,s=e.echartsOpts.series[0],l=0,o=e.echartsOpts.series[1].data,n.forEach((function(e,t){var a=e.time.replace(/^(\d{4}-)/,"");i.push(a.replace(/^(\d{1,2})-(\d{1,2})$/,"$1/$2")),o[t]=e.read,l<e.read&&(l=1*e.read)})),c=10-l%10,s.data=o.map((function(e){return l+c})),e.dateRange=i[0]+"-"+i[6],e.$refs.echarts.refresh();case 9:case"end":return t.stop()}}),t,e)})))()},selectIntergral:function(){var e=this;return(0,i.default)(r.default.mark((function t(){var a,n,i;return r.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$api.heroes.selectIntergral({isLoad:!1});case 2:return a=t.sent,e.UPDATE_USER_INTERGRAL(a.data),t.next=6,e.$api.userLastYearIntegral.queryIntegralSoonExpireInfo();case 6:n=t.sent,i=n.data,e.integralSoonExpireInfo=i;case 9:case"end":return t.stop()}}),t,e)})))()},expiresTip:function(){if(this.integralSoonExpireInfo){var e=this.integralSoonExpireInfo.expireDateStr.split("-"),t=e[0],a=e[1],r=e[2];(0,n.default)({message:parseInt(t)-2+"年产生的积分将于"+e[0]+"年"+a+"月"+r+"日过期，请提前至积分商城进行兑换。"})}}})}},avPF:function(e,t,a){"use strict";a.r(t);var n=a("zJO5"),r=a("GtgP");for(var i in r)["default"].indexOf(i)<0&&function(e){a.d(t,e,(function(){return r[e]}))}(i);a("pgpI");var s=a("gp09"),l=Object(s.a)(r.default,n.a,n.b,!1,null,null,null);t.default=l.exports},omBK:function(e,t,a){},pgpI:function(e,t,a){"use strict";a("omBK")},zJO5:function(e,t,a){"use strict";a.d(t,"a",(function(){return n})),a.d(t,"b",(function(){return r}));var n=function(){var e=this,t=e._self._c;return t("div",{staticClass:"integral_infos_wrap"},[t("van-nav-bar",{attrs:{title:e.$route.meta.title,"left-arrow":"","right-text":"　",fixed:""},on:{"click-left":e.onClickLeft}}),e._v(" "),t("div",{staticClass:"main_wrap"},[t("div",{staticClass:"section section4"},[t("div",{staticClass:"title"},[e._v("积分明细")]),e._v(" "),t("div",{staticClass:"total"},[t("div",[e._v("\n                    合计："+e._s(e.userInfo.score?e.userInfo.score:"0")+"\n                ")]),e._v(" "),t("div",{staticClass:"expires"},[e._v("\n                    即将过期："+e._s(e.integralSoonExpireInfo?e.integralSoonExpireInfo.integral:"")+"\n                    "),t("van-icon",{attrs:{name:"question-o",color:"#1989fa"},on:{click:e.expiresTip}})],1)]),e._v(" "),t("div",{staticClass:"list"},[t("van-cell-group",[t("van-list",{attrs:{finished:e.finished,"finished-text":"没有更多了"},on:{load:e.queryPointsDetails},model:{value:e.loading,callback:function(t){e.loading=t},expression:"loading"}},e._l(e.integralLists,(function(a,n){return t("van-cell",{key:n},[t("p",{staticStyle:{display:"flex","flex-direction":"row","justify-content":"space-between"}},[t("span",[e._v(e._s(a.title||e.integralType[a.integralType]))]),e._v(" "),t("span",[e._v(e._s(a.actShortName?a.actShortName:""))])]),e._v(" "),["70"].includes(a.integralSourceType+"")?t("P",[e._v("\n                                "+e._s(a.manuscriptId)+"\n                            ")]):e._e(),e._v(" "),["60","61","62","81"].includes(a.integralSourceType+"")?t("P",[e._v("\n                                "+e._s(a.manuscriptId?`【${a.manuscriptId}】`:"")+" "+e._s("61"==a.integralSourceType?"失败返还":"")+"\n                            ")]):e._e(),e._v(" "),t("div",{staticClass:"item_main"},[t("p",{staticClass:"date"},[e._v(e._s(a.createTime))]),e._v(" "),t("div",{staticClass:"right"},[t("div",{staticClass:"type label",class:{share:"1"===a.integralType}},[19==+a.integralType&&71==+a.integralSourceType?[e._v("\n                                            "+e._s(a.manuscriptId)+"\n                                        ")]:[e._v("\n                                            "+e._s(0==a.integralSourceType||null==a.integralSourceType?["","微信","微博"][~~a.type]+e.integralType[a.integralType]:e.integralSourceType[a.integralSourceType])+"\n                                        ")]],2),e._v(" "),t("div",{staticClass:"score",class:{add:~~a.integral>0}},[e._v(e._s(~~a.integral>0?"+"+a.integral:a.integral))])])])],1)})),1)],1)],1)])])],1)},r=[]}}]);