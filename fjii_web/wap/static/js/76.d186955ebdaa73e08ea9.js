(window.webpackJsonp=window.webpackJsonp||[]).push([[76],{"+eIM":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=u(n("cLjf")),s=u(n("hDQ3")),a=u(n("bS4n")),r=n("dzbt"),i=u(n("7Qib"));function u(t){return t&&t.__esModule?t:{default:t}}e.default={components:{},data:function(){return{form:{smsCode:"",newPassword:"",confirmPassword:""},showOldPwd:!1,showPwd:!1,showPwd2:!1}},mounted:function(){},computed:(0,a.default)({},(0,r.mapState)(["userInfo"])),methods:{onClickLeft:function(){this.$router.go(-1)},validatorTwoPwdEquals:function(t){return t===this.form.newPassword},validatorPassword:function(t){return new RegExp("^(?![A-Za-z0-9]+$)(?![a-z0-9\\W]+$)(?![A-Za-z\\W]+$)(?![A-Z0-9\\W]+$)[a-zA-Z0-9\\W]{8,}$").test(t)},onSubmit:function(t){var e=this;return(0,s.default)(o.default.mark((function n(){var a,r;return o.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a=t.smsCode,r=t.newPassword,n.next=3,e.$api.user.updatePasswordWithVerifyCode({isLoad:!1,smsCode:a,password:i.default.SHA1(r)});case 3:e.$dialog.alert({message:"密码修改成功, 请重新登录"}).then((0,s.default)(o.default.mark((function t(){return o.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$api.login.logout();case 2:e.$router.push({name:"Login"});case 3:case"end":return t.stop()}}),t,e)}))));case 4:case"end":return n.stop()}}),n,e)})))()},toggleViewPwd:function(t){this[t]=!this[t]},notReceiveSmsCode:function(){var t=this;this.$dialog.confirm({message:"是否重新发送短信验证码到"+this.userInfo.telephone+"？",showConfirmButton:!0,confirmButtonText:"是",showCancelButton:!0,cancelButtonText:"否"}).then((0,s.default)(o.default.mark((function e(){var n;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$api.user.sendVerifyCodeBeforeModifyPwd();case 2:1==(n=e.sent).code?t.$toast("发送成功"):t.$toast.fail("发送失败 "+n.message);case 4:case"end":return e.stop()}}),e,t)})))).catch((function(t){}))}}}},"/4LF":function(t,e,n){"use strict";n.r(e);var o=n("+eIM"),s=n.n(o);for(var a in o)["default"].indexOf(a)<0&&function(t){n.d(e,t,(function(){return o[t]}))}(a);e.default=s.a},"4ia5":function(t,e,n){"use strict";n("Wziz")},KTvs:function(t,e,n){"use strict";n.d(e,"a",(function(){return o})),n.d(e,"b",(function(){return s}));var o=function(){var t=this,e=t._self._c;return e("div",{staticClass:"mod_password_need_verify_code"},[e("van-nav-bar",{attrs:{title:t.$route.meta.title,"left-arrow":!0,"right-text":"  ",fixed:""},on:{"click-left":t.onClickLeft}}),t._v(" "),e("van-form",{on:{submit:t.onSubmit}},[e("van-cell-group",[e("van-field",{attrs:{label:"新密码",name:"newPassword",type:t.showPwd?"text":"password",placeholder:"请输入密码","input-align":"right",rules:[{required:!0,message:"密码不能为空"},{validator:t.validatorPassword,message:"密码必须包含大小写、数字、特殊符号(不是字母，数字，下划线的字符)，长度8位及以上"}]},scopedSlots:t._u([{key:"button",fn:function(){return[e("button",{staticClass:"btn_view_pwd",class:{active:t.showPwd},attrs:{type:"button"},on:{click:function(e){return t.toggleViewPwd("showPwd")}}})]},proxy:!0}]),model:{value:t.form.newPassword,callback:function(e){t.$set(t.form,"newPassword",e)},expression:"form.newPassword"}}),t._v(" "),e("van-field",{attrs:{label:"确认密码",name:"confirmPassword",type:t.showPwd2?"text":"password",placeholder:"请再次输入新密码","input-align":"right",rules:[{required:!0,message:"密码不能为空"},{validator:t.validatorTwoPwdEquals,message:"输入的密码不一致"}]},scopedSlots:t._u([{key:"button",fn:function(){return[e("button",{staticClass:"btn_view_pwd",class:{active:t.showPwd2},attrs:{type:"button"},on:{click:function(e){return t.toggleViewPwd("showPwd2")}}})]},proxy:!0}]),model:{value:t.form.confirmPassword,callback:function(e){t.$set(t.form,"confirmPassword",e)},expression:"form.confirmPassword"}}),t._v(" "),e("van-field",{attrs:{label:"短信验证码",name:"smsCode",type:"text",placeholder:"请输入短信验证码","input-align":"right",rules:[{required:!0,message:"短信验证码不能为空"}]},model:{value:t.form.smsCode,callback:function(e){t.$set(t.form,"smsCode",e)},expression:"form.smsCode"}}),t._v(" "),e("div",{staticClass:"not_receive_sms_code",on:{click:t.notReceiveSmsCode}},[t._v("未收到验证码？")])],1),t._v(" "),e("div",{staticClass:"bottom_btns"},[e("van-button",{attrs:{type:"info",block:"","native-type":"submit"}},[t._v("提交")])],1)],1)],1)},s=[]},Wziz:function(t,e,n){},qME5:function(t,e,n){"use strict";n.r(e);var o=n("KTvs"),s=n("/4LF");for(var a in s)["default"].indexOf(a)<0&&function(t){n.d(e,t,(function(){return s[t]}))}(a);n("4ia5");var r=n("gp09"),i=Object(r.a)(s.default,o.a,o.b,!1,null,null,null);e.default=i.exports}}]);