(window.webpackJsonp=window.webpackJsonp||[]).push([[42],{"6lO7":function(t,i,e){"use strict";e.r(i);var a=e("bNAq"),r=e("HtCf");for(var s in r)["default"].indexOf(s)<0&&function(t){e.d(i,t,(function(){return r[t]}))}(s);e("mLoH"),e("8ZI0");var n=e("gp09"),o=Object(n.a)(r.default,a.a,a.b,!1,null,"4ff398f6",null);i.default=o.exports},"7LQi":function(t,i,e){},"8ZI0":function(t,i,e){"use strict";e("Hxv3")},HtCf:function(t,i,e){"use strict";e.r(i);var a=e("cP0M"),r=e.n(a);for(var s in a)["default"].indexOf(s)<0&&function(t){e.d(i,t,(function(){return a[t]}))}(s);i.default=r.a},Hxv3:function(t,i,e){},bNAq:function(t,i,e){"use strict";e.d(i,"a",(function(){return a})),e.d(i,"b",(function(){return r}));var a=function(){var t=this,i=t._self._c;return i("div",{staticClass:"my_notice"},[i("van-nav-bar",{attrs:{"left-arrow":"",title:t.$route.meta.title,fixed:"","right-text":"　"},on:{"click-left":t.onClickLeft}}),t._v(" "),i("div",{staticClass:"content_wrap"},[i("scroller",{ref:"my_scroller",attrs:{refreshText:"下拉刷新","on-refresh":t.refresh,"on-infinite":t.infinite}},t._l(t.tabledata,(function(e){return i("div",{key:e.id,staticClass:"notice_item",class:{is_read:1==e.isRead},on:{click:function(i){return t.toNoticeDetail(e)}}},[i("div",{staticClass:"notice_img"},[i("div",{staticClass:"img_div",class:"type"+e.type}),t._v(" "),i("div",{staticClass:"description",class:"type"+e.type},[t._v(t._s(t._f("formatType")(e.type)))])]),t._v(" "),i("div",{staticClass:"notice_info"},[i("div",{staticClass:"time"},[t._v(t._s(e.createTime))]),t._v(" "),i("div",{staticClass:"title"},[t._v(t._s(e.title))])])])})),0)],1)],1)},r=[]},cP0M:function(t,i,e){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=o(e("cLjf")),r=o(e("hDQ3")),s=o(e("bS4n")),n=e("dzbt");function o(t){return t&&t.__esModule?t:{default:t}}i.default={data:function(){return{dataEnd:!1,sending:!1,queryParam:{pageSize:10,pageNo:1},tabledata:[]}},filters:{formatType:function(t){var i="";switch(t){case 1:i="系统通知";break;case 2:i="活动通知";break;case 3:i="反馈通知";break;case 4:i="任务通知"}return i}},computed:(0,s.default)({},(0,n.mapState)(["userInfo"])),mounted:function(){var t=this;window.refreshNoticeList&&1==window.refreshNoticeList?this.refresh():(!window.myNoticeList||window.myNoticeList.length<=0?this.$refs.my_scroller.triggerPullToRefresh():(this.tabledata=window.myNoticeList,this.queryParam.pageNo=window.myNoticePageNo),"myNoticeDataEnd"in window&&window.myNoticeDataEnd&&(this.dataEnd=!0,this.$refs.my_scroller.finishInfinite(!0)),window.myNoticeListScrollerPosition&&this.$nextTick((function(){setTimeout((function(){t.$refs.my_scroller.scrollTo(window.myNoticeListScrollerPosition.left,window.myNoticeListScrollerPosition.top,!1)}),500)})))},methods:{onClickLeft:function(){this.$router.go(-1)},refresh:function(t){this.dataEnd=!1,this.$refs.my_scroller.finishInfinite(!1),this.queryParam.pageNo=1,this.getList(t)},infinite:function(t){this.dataEnd?(t(),this.$refs.my_scroller.finishInfinite(!0)):this.getList(t)},getList:function(t){var i=this;return(0,r.default)(a.default.mark((function e(){var r,n;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!i.sending){e.next=2;break}return e.abrupt("return");case 2:return i.sending=!0,e.next=5,i.$api.notice.myList((0,s.default)({},i.queryParam,{isLoad:!1}));case 5:r=e.sent,n=1===i.queryParam.pageNo?[].concat(r.data.list):i.tabledata.concat(r.data.list),i.tabledata=n,window.myNoticeList=n,window.myNoticePageNo=i.queryParam.pageNo,i.queryParam.pageNo===(r.data.pages||1)?(i.dataEnd=!0,window.myNoticeDataEnd=!0,i.$refs.my_scroller.finishInfinite(!0)):(i.dataEnd=!1,window.myNoticeDataEnd=!1,i.$refs.my_scroller.finishInfinite(!1)),"function"==typeof t&&t(),i.sending=!1,i.queryParam.pageNo+=1;case 14:case"end":return e.stop()}}),e,i)})))()},toNoticeDetail:function(t){var i=this;window.refreshNoticeList=0,t.isRead=1,window.myNoticeListScrollerPosition=this.$refs.my_scroller.getPosition(),t.taskId?this.$api.task.getDetail({id:t.taskId}).then((function(e){i.$api.notice.readNotice({id:t.id,isLoad:!1}),i.showTaskDetail(e.data)})):this.$router.push({name:"MyNoticeDetail",query:{id:t.id}})},showTaskDetail:function(t){var i=this.isAndroid?1:this.isIOS?2:0;if(this.$api.wechatShareTaskReadLog.doRecord({isLoad:!1,deviceType:i,wechatShareTaskId:t.id}),1===t.releaseType){var e={title:"视频详情",url:window.location.origin+"/wap/Tasks/VideoDetails/"+t.id};this.openUrl(e)}else{var a=t.wechatArticleUrl;if(a&&a.indexOf("/MorningPaper/PaperDetail")>-1){var r=utils.getUrlParams(a,"shareTo");r?a=a.replace("shareTo="+r,"shareTo=9"):a+="&shareTo=9"}var s=[1,2];2==t.urlType&&(s=[3]);var n={url:a,img:/^https?:\/\//i.test(t.coverImg)?t.coverImg:""+window.location.origin+t.coverImg,title:t.title?t.title:"",desc:t.digest?t.digest:"",tj_url:window.location.origin+"/wap/Tasks/Detail/"+t.id,user_id:this.userInfo.userId?this.userInfo.userId:"",wechat_share_task_id:t.id,show_share:!0,showShareChannel:s,show_tj:0==this.userInfo.isVisitor,weiboArticleId:t.weiboArticleId?t.weiboArticleId:"",recommendWords:0==this.userInfo.isVisitor?t.recommendWords:"",show_upload_capture:(2!=t.urlType||2==t.urlType&&!t.weiboArticleId)&&0==this.userInfo.isVisitor,upload_capture_url:window.location.origin+"/wap/Integral/UploadCapture?wechatShareId="+t.id+"&returnType=origin"};this.startDetail(n)}}}}},mLoH:function(t,i,e){"use strict";e("7LQi")}}]);