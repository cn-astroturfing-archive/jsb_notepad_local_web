(window.webpackJsonp=window.webpackJsonp||[]).push([[66],{LOUk:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=c(a("cLjf")),r=c(a("hDQ3")),s=c(a("bS4n")),o=a("dzbt"),i=c(a("7Qib"));function c(t){return t&&t.__esModule?t:{default:t}}e.default={data:function(){return{sent:!1,sentText:"",agreeProtocol:!1,form:{name:"",telephone:"",yzmCode:"",password:""},disableBtn:!1}},watch:{agreeProtocol:function(t){console.log(t)},"form.yzmCode":function(t){t.length>6&&(this.form.yzmCode=t.slice(0,6))}},methods:(0,s.default)({},(0,o.mapMutations)(["REMOVE_CERT_INFO","SET_USERINFO","SET_HINT_FLAG"]),{onClickLeft:function(){this.$router.go(-1)},sendMsgCode:function(){var t=this;return(0,r.default)(n.default.mark((function e(){var a;return n.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.sent&&!i.default.isEmpty(t.form.telephone,"请输入手机号码")){e.next=2;break}return e.abrupt("return");case 2:if(i.default.isMobile(t.form.telephone,"手机号码不对")){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,t.$api.login.getPhoneNum({isLoad:!1,phoneNum:i.default.defaultEncryptRetBase64(t.form.telephone)});case 6:e.sent,t.$toast.success("短信验证码已发送"),t.sent=!0,a=60,t.sentText=a+"S",t.time=setInterval((function(){1===a?(t.sent=!1,clearInterval(t.time)):(--a,t.sentText=a+"S")}),1e3);case 12:case"end":return e.stop()}}),e,t)})))()},clearTime:function(){if(this.time){clearInterval(this.time),this.sent=!1;this.sentText="60S"}},register:function(){var t=this;return(0,r.default)(n.default.mark((function e(){var a,r,s,o;return n.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.form,a.name,r=a.telephone,s=a.yzmCode,a.password,i.default.isEmpty(r,"请输入手机号码")||!i.default.isMobile(r,"手机号码不对")||i.default.isEmpty(s,"请输入验证码")){e.next=27;break}if(!t.agreeProtocol){e.next=24;break}return t.disableBtn=!0,o="",e.prev=5,e.next=8,t.$api.login.register({telephone:i.default.defaultEncryptRetBase64(r),yzmCode:s});case 8:o=e.sent,e.next=15;break;case 11:return e.prev=11,e.t0=e.catch(5),t.disableBtn=!1,e.abrupt("return");case 15:t.disableBtn=!1,t.$toast.success("注册成功"),t.REMOVE_CERT_INFO(),t.SET_USERINFO(o.data),t.SET_HINT_FLAG(o.data.hintFlag);try{t.appPushToken(o.data.token)}catch(t){}t.$router.replace({name:"TasksHome"}),e.next=25;break;case 24:t.$toast.fail("请先阅读并同意用户协议和隐私政策");case 25:e.next=28;break;case 27:t.disableBtn=!1;case 28:case"end":return e.stop()}}),e,t,[[5,11]])})))()}})}},SiFA:function(t,e,a){},f9wY:function(t,e,a){"use strict";a.r(e);var n=a("qquP"),r=a("ouGY");for(var s in r)["default"].indexOf(s)<0&&function(t){a.d(e,t,(function(){return r[t]}))}(s);a("lhTC");var o=a("gp09"),i=Object(o.a)(r.default,n.a,n.b,!1,null,null,null);e.default=i.exports},lhTC:function(t,e,a){"use strict";a("SiFA")},ouGY:function(t,e,a){"use strict";a.r(e);var n=a("LOUk"),r=a.n(n);for(var s in n)["default"].indexOf(s)<0&&function(t){a.d(e,t,(function(){return n[t]}))}(s);e.default=r.a},qquP:function(t,e,a){"use strict";a.d(e,"a",(function(){return n})),a.d(e,"b",(function(){return r}));var n=function(){var t=this,e=t._self._c;return e("div",{staticClass:"register_wrap default_login_wrap"},[e("van-nav-bar",{staticClass:"transparent",attrs:{title:t.$route.meta.title,"left-arrow":"",fixed:"","right-text":"  "},on:{"click-left":t.onClickLeft}}),t._v(" "),e("div",{staticClass:"logo"}),t._v(" "),e("div",{staticClass:"title"},[t._v("通信头条")]),t._v(" "),e("div",{staticClass:"form"},[e("div",{staticClass:"row"},[e("div",{staticClass:"input"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.telephone,expression:"form.telephone"}],attrs:{type:"text",placeholder:"手机号码"},domProps:{value:t.form.telephone},on:{input:function(e){e.target.composing||t.$set(t.form,"telephone",e.target.value)}}}),t._v(" "),e("img",{staticClass:"icon_phone",attrs:{src:a("D7v5"),alt:"",srcset:""}})])]),t._v(" "),e("div",{staticClass:"row"},[e("div",{staticClass:"input"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.yzmCode,expression:"form.yzmCode"}],attrs:{type:"text",placeholder:"手机验证码"},domProps:{value:t.form.yzmCode},on:{input:function(e){e.target.composing||t.$set(t.form,"yzmCode",e.target.value)}}}),t._v(" "),e("img",{staticClass:"icon_code",attrs:{src:a("/3q8"),alt:"",srcset:""}}),t._v(" "),e("a",{staticClass:"send_code_btn phone_code",class:{disable:t.sent},attrs:{href:"javascript:;"},on:{click:t.sendMsgCode}},[t._v(t._s(t.sent?t.sentText:"发送验证码"))])])])]),t._v(" "),e("div",{staticClass:"register_btn",class:{disable:t.disableBtn},on:{click:t.register}},[t._v("立即注册")]),t._v(" "),e("div",{staticClass:"row"},[e("div",{staticClass:"protocol"},[e("van-checkbox",{attrs:{"checked-color":"rgba(96, 187, 255, 0.94)",shape:"square"},model:{value:t.agreeProtocol,callback:function(e){t.agreeProtocol=e},expression:"agreeProtocol"}},[t._v("\n\t\t\t\t我已阅读并同意使用\n\t\t\t\t"),e("router-link",{attrs:{to:{name:"Protocol"}}},[t._v("用户协议")]),t._v("、\n\t\t\t\t"),e("router-link",{attrs:{to:{name:"Secret"}}},[t._v("隐私政策")])],1)],1)])],1)},r=[]}}]);