(window.webpackJsonp=window.webpackJsonp||[]).push([[25],{"+THw":function(t,e,a){"use strict";a.r(e);var s=a("ybhO"),i=a.n(s);for(var l in s)["default"].indexOf(l)<0&&function(t){a.d(e,t,(function(){return s[t]}))}(l);e.default=i.a},"/1kN":function(t,e,a){"use strict";a("BJD3")},"/NyI":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAC0AAAAtCAYAAAA6GuKaAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyNpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQ4IDc5LjE2NDAzNiwgMjAxOS8wOC8xMy0wMTowNjo1NyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIDIxLjAgKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOkZCNEI2RUJFQkQyMDExRUI4MUNFRDA4OTFDNzhGQzE1IiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOkZCNEI2RUJGQkQyMDExRUI4MUNFRDA4OTFDNzhGQzE1Ij4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6RkI0QjZFQkNCRDIwMTFFQjgxQ0VEMDg5MUM3OEZDMTUiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6RkI0QjZFQkRCRDIwMTFFQjgxQ0VEMDg5MUM3OEZDMTUiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz6rYM6gAAAESklEQVR42sxZaYhNYRj+5s4dJvvYl8mSfd8JRdn5gYhESkQiSiHxCyXyS8I08QNDspMlS5FBKPu+78vESMNgbON5m+fUa9x7557vnHOvp57Od8+997vPfb/ve7eTUlxcbDyiGtgcbArWB2uClcBy4E+wEMwH34CPwYdgnpcfTLEUnQZ2AnuAHSy+/wC8CF4GPwctuio4DOxOazp4Ct4CX4IfwSLwt8xPi8tnG4AtwTa8L/gFXgcPgS+CEN0ZnEorC96BZ2mxfBd/vALYDewJNlP394BH/RJdEZystsFd8DR4yXhHa4rvpVZsC1fMWrQcqnlgBl/ngLnGf4hBpqtVXA9etREte3ABmE4LyPLdM8FBDDOeBzym8GiixY0tBctzqZaZxEEs3pXjtTyofyEU5aAsouAn4AqTWGSrLTgLrBeP6Ol0bXkU/MMkHjl0oYLZZYluzxMt2GCSiyxG0xrguGiiJQDMUP/0eZJFfwdXcjxAGfMv0SPAMD1Frvk/kMdQLxhUWrRce3O83/xf2K8CUW0tuh0dewF422JiCfHLwbnOxD7iLaOvaB2sRffn9bjFpBV4FuTAtAKXgKPB6j4KP8KrJGppIf6os8nPWExYPYJHGsLgNNgn0S+4vyU6t5EfaKve+GIx4c8YOfcYcCGLBK9wQnp7Ed2CLy4HdJCaMOmaD9bxMM9rXhuJ6Lp88SpgL9CM+31klEhcFgp5TQ+r0/4xAe5LKpbhzKFz1QGLB06hUSXEzR1rbwYB8TSjwIkuvuPUkuVDzOYMa7pEoy+9VzxwEreUkLJwShJES37zLc7PpjoD2dNf6Z5SEyhWDHUe3OtihSs6iZSI/iCbG6ycIMH3wU3ge4tzIPgUZuenMbtDtwMUK6f/IHjO8vtOn+Wr7OlHqgAIArL8O8DFHgRrS78JK+u25L7+5XKycIz3blHwWx/+fDtnzjCXTU5xQzp9t9YoiHBPmoz7TEnPzg/UZESV1sEVJ5yeVmWNsRB9jGOZdCu4ykfBgn683hAX6Syt9OMmgJmSkIDPXE66G7xJj5Dv85mopvL9g7oIKFJ7e6jl5PcCECwYyHPz0jGmzrZ28dpFV75JhoT4PhwfjlSNi7/eyfEcFYGSibkUfteoLm3pvPYEyxq5PzXJgsfRo0k1lR2rwyRYw6uUYdOSJHig8mRZqgCIKlo6/Os4lo79pAQLFk8xVu3jf9rLsfrTHcGZHF8BN1sWvm4wllYWbAdPRix/yngSIKFztgoiq00ZjxY8+GLp1jbl6wOm5OGRsRFtGHCmmJInA4Zh/pRFAIqEDO5diXjluJIbGaiMF9GRls4wiT9jGa4z2S3SgewauC2eAtvtc8QOTKq6qXvSerjDvkQBi4pPrOlSWVxksNCoxWxSN2/EB19wk6jZPrFtwKK0h4vCtDQuso1w33UfwuOz8TRavwUDQSVaNl0VykW0fCGjroi8zntW+CPAANBhBf5RJ2QcAAAAAElFTkSuQmCC"},As8V:function(t,e,a){"use strict";a.r(e);var s=a("ysyt"),i=a.n(s);for(var l in s)["default"].indexOf(l)<0&&function(t){a.d(e,t,(function(){return s[t]}))}(l);e.default=i.a},BJD3:function(t,e,a){},HFRf:function(t,e,a){"use strict";a.d(e,"a",(function(){return s})),a.d(e,"b",(function(){return i}));var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"todo_detail_wrap"},["fabu"===t.taskType?e("van-nav-bar",{attrs:{title:t.$route.meta.title,"left-arrow":"","right-text":"文章详情",fixed:""},on:{"click-left":t.onClickLeft,"click-right":t.toDetails}}):e("van-nav-bar",{attrs:{title:t.$route.meta.title,"left-arrow":"","right-text":"  ",fixed:""},on:{"click-left":t.onClickLeft}}),t._v(" "),e("div",{staticClass:"main_wrap"},["baoming"!==t.taskType?e("div",{staticClass:"base_mes"},[e("p",{staticClass:"title"},[t._v("基本信息")]),t._v(" "),e("van-row",[e("van-col",{attrs:{span:"24"}},[e("p",{staticClass:"time gray_text"},[t._v("\n                        "+t._s("fabu"===t.taskType?"发布时间":"送审时间")+"："+t._s(t.baseInfo.createDate)+"\n                    ")])]),t._v(" "),e("van-col",{attrs:{span:"24"}},[e("p",{staticClass:"gray_text"},[t._v("部门："+t._s(t.baseInfo.orgName))])]),t._v(" "),e("van-col",{attrs:{span:"24"}},[e("p",{staticClass:"gray_text"},[t._v("发起人："+t._s(t.baseInfo.name))])]),t._v(" "),e("van-col",{attrs:{span:"24"}},[e("p",{staticClass:"gray_text"},[t._v("审核状态："+t._s(t.auditState[t.baseInfo.auditState]))])]),t._v(" "),t.details.sourceType?e("van-col",{attrs:{span:"24"}},[e("p",{staticClass:"gray_text"},[t._v("投稿类型："+t._s(t.sourceTypeText))])]):t._e()],1)],1):t._e(),t._v(" "),"gaojian"===t.taskType?e("div",{staticClass:"detail_mes"},[e("p",{staticClass:"title"},[t._v(t._s(t.details.title))]),t._v(" "),e("div",{staticClass:"con_mes",domProps:{innerHTML:t._s(t.details.content)}}),t._v(" "),3===t.details.type&&""!=t.details.url?e("van-image",{attrs:{src:t.details.url}}):t._e(),t._v(" "),2!==t.details.type&&4!==t.details.type||""==t.details.url?t._e():e("custom-video",{attrs:{src:t.showVideoUrl(t.details),poster:t.details.storagePath}}),t._v(" "),2!==t.details.type&&4!==t.details.type||null==t.details.videoUrl||""==t.details.videoUrl.trim()?t._e():e("p",{staticClass:"wangpan_div"},[e("span",[t._v("网盘地址："+t._s(t.details.videoUrl))]),t._v(" "),e("span",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:t.details.videoUrl,expression:"details.videoUrl",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopy,expression:"onCopy",arg:"success"}],staticClass:"link",attrs:{href:"javascript:void(0);"}},[t._v("复制链接")])]),t._v(" "),t.isOutline?t._e():e("p",{staticClass:"title"},[t._v("作品版权承诺书")]),t._v(" "),t._l(t.copyrightImages,(function(t,a){return e("van-image",{key:a,attrs:{src:t}})}))],2):t._e(),t._v(" "),"fabu"===t.taskType?e("div",{staticClass:"base_mes"},[e("p",{staticClass:"title"},[t._v("详细信息")]),t._v(" "),e("div",{staticClass:"task_infos"},[0===t.details.releaseType?e("div",{staticClass:"task_item"},[e("div",{staticClass:"label"},[t._v("文章链接：")]),t._v(" "),e("div",{staticClass:"value"},[t._v(t._s(t.details.wechatArticleUrl))])]):t._e(),t._v(" "),0===t.details.releaseType?e("div",{staticClass:"task_item"},[e("div",{staticClass:"label"},[t._v("文章标题：")]),t._v(" "),e("div",{staticClass:"value"},[t._v(t._s(t.details.title))])]):t._e(),t._v(" "),1===t.details.releaseType?e("div",{staticClass:"task_item"},[e("div",{staticClass:"label"},[t._v("视频标题：")]),t._v(" "),e("div",{staticClass:"value"},[t._v(t._s(t.details.title))])]):t._e(),t._v(" "),1===t.details.releaseType?e("div",{staticClass:"task_item"},[e("div",{staticClass:"label"},[t._v("短标题：")]),t._v(" "),e("div",{staticClass:"value"},[t._v(t._s(t.details.shortTitle))])]):t._e(),t._v(" "),1===t.details.releaseType?e("div",{staticClass:"task_item"},[e("div",{staticClass:"label"},[t._v("源路径：")]),t._v(" "),e("div",{staticClass:"value"},[t._v(t._s(t.details.videoSourcePath))])]):t._e(),t._v(" "),0===t.details.releaseType?e("div",{staticClass:"task_item"},[e("div",{staticClass:"label"},[t._v("任务类型：")]),t._v(" "),e("div",{staticClass:"value"},[t._v(t._s(t.isType[t.details.isType]))])]):t._e(),t._v(" "),e("div",{staticClass:"task_item"},[e("div",{staticClass:"label"},[t._v("是否置顶：")]),t._v(" "),e("div",{staticClass:"value"},[t._v(t._s(1===t.details.isTop?"是":"否"))])]),t._v(" "),1===t.details.isTop?e("div",{staticClass:"task_item"},[e("div",{staticClass:"label"},[t._v("置顶天数：")]),t._v(" "),e("div",{staticClass:"value"},[t._v(t._s(t.details.topDays))])]):t._e(),t._v(" "),1===t.details.isAct?e("div",{staticClass:"task_item"},[e("div",{staticClass:"label"},[t._v(t._s(1===t.details.isLocalAct?"地方活动":"集团活动")+"：")]),t._v(" "),e("div",{staticClass:"value"},[t._v(t._s(t.details.actName))])]):t._e(),t._v(" "),e("div",{staticClass:"task_item",class:{g_blue:t.publishArea.publishToToutiao}},[e("div",{staticClass:"label"},[t._v("发布头条：")]),t._v(" "),e("div",{staticClass:"value"},[t._v(t._s(t.publishArea.publishToToutiao?"是":"否"))])]),t._v(" "),e("div",{staticClass:"task_item",class:{g_blue:t.publishArea.publishToLocal}},[e("div",{staticClass:"label"},[t._v("发布地方：")]),t._v(" "),e("div",{staticClass:"value"},[t._v(t._s(t.publishArea.publishToLocal?"是":"否"))])]),t._v(" "),t.publishArea.publishToLocal?e("div",{staticClass:"task_item",class:{g_blue:t.publishArea.publishToLocal}},[e("div",{staticClass:"label"},[t._v("地　　方：")]),t._v(" "),e("div",{staticClass:"value"},[t._v(t._s(t.details.companyName))])]):t._e(),t._v(" "),1===t.details.releaseType?e("div",{staticClass:"task_item",class:{g_blue:t.publishArea.publishToVideo}},[e("div",{staticClass:"label"},[t._v("发布视频：")]),t._v(" "),e("div",{staticClass:"value"},[t._v(t._s(t.publishArea.publishToVideo?"是":"否"))])]):t._e(),t._v(" "),e("div",{staticClass:"task_item",class:{g_blue:t.publishArea.publishToSquare}},[e("div",{staticClass:"label"},[t._v("发布广场：")]),t._v(" "),e("div",{staticClass:"value"},[t._v(t._s(t.publishArea.publishToSquare?"是":"否"))])]),t._v(" "),0===t.details.releaseType?e("div",{staticClass:"task_item"},[e("div",{staticClass:"label"},[t._v("　缩略图：")]),t._v(" "),e("div",{staticClass:"value"},[e("img",{attrs:{src:t.details.coverImg,alt:""}})])]):t._e(),t._v(" "),1===t.details.releaseType?e("div",{staticClass:"task_item"},[e("div",{staticClass:"label"},[t._v("视频文件：")]),t._v(" "),e("div",[e("custom-video",{attrs:{src:t.details.videoPath,poster:t.details.storagePath}})],1)]):t._e()])]):t._e(),t._v(" "),"baoming"===t.taskType?e("div",{staticClass:"base_mes"},[e("p",{staticClass:"title"},[t._v("详细信息")]),t._v(" "),e("div",{staticClass:"task_infos"},[e("div",{staticClass:"task_item"},[e("div",{staticClass:"label"},[t._v("活动名称：")]),t._v(" "),e("div",{staticClass:"value"},[t._v(t._s(t.details.activeName))])]),t._v(" "),e("div",{staticClass:"task_item"},[e("div",{staticClass:"label"},[t._v("姓名：")]),t._v(" "),e("div",{staticClass:"value"},[t._v(t._s(t.details.name))])]),t._v(" "),e("div",{staticClass:"task_item"},[e("div",{staticClass:"label"},[t._v("所属公司：")]),t._v(" "),e("div",{staticClass:"value"},[t._v(t._s(t.details.workUnit))])]),t._v(" "),e("div",{staticClass:"task_item"},[e("div",{staticClass:"label"},[t._v("报名时间：")]),t._v(" "),e("div",{staticClass:"value"},[t._v(t._s(t.details.createTime))])])])]):t._e(),t._v(" "),e("div",{staticClass:"base_mes"},[e("h3",{staticClass:"title"},[t._v("流转信息")]),t._v(" "),e("div",{staticClass:"content"},t._l(t.completeInfos,(function(a,s){return e("div",{key:s,staticClass:"item"},[e("p",{staticClass:"time"},[t._v(t._s(a.createTime))]),t._v(" "),e("p",{domProps:{innerHTML:t._s(a.content)}})])})),0)]),t._v(" "),t.todo?e("div",{staticClass:"btn_groups"},[e("van-button",{staticClass:"btn cancel",on:{click:function(e){t.showReason=!0}}},[t._v("驳回")]),t._v(" "),e("van-button",{staticClass:"btn pass",attrs:{"loading-text":"通过"},on:{click:t.submitComplete}},[t._v("通过")])],1):t._e()]),t._v(" "),e("van-dialog",{attrs:{title:"备注","show-cancel-button":"","before-close":t.beforeClose},model:{value:t.showReason,callback:function(e){t.showReason=e},expression:"showReason"}},[e("van-field",{attrs:{rows:"4",type:"textarea",placeholder:"请输入驳回原因",required:""},model:{value:t.info.reason,callback:function(e){t.$set(t.info,"reason",e)},expression:"info.reason"}}),t._v(" "),e("van-field",{directives:[{name:"show",rawName:"v-show",value:3==t.baseInfo.auditState&&"gaojian"==t.taskType,expression:"baseInfo.auditState == 3 && taskType == 'gaojian'"}],attrs:{label:"一审评价",required:""},scopedSlots:t._u([{key:"input",fn:function(){return[e("van-radio-group",{attrs:{direction:"horizontal"},model:{value:t.info.isEvaluate,callback:function(e){t.$set(t.info,"isEvaluate",e)},expression:"info.isEvaluate"}},[e("van-radio",{attrs:{name:"0",shape:"square"}},[t._v("正常")]),t._v(" "),e("van-radio",{attrs:{name:"1",shape:"square"}},[t._v("扣罚")])],1)]},proxy:!0}])})],1)],1)},i=[]},IFav:function(t,e,a){"use strict";a.r(e);var s=a("HFRf"),i=a("As8V");for(var l in i)["default"].indexOf(l)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(l);a("/1kN");var r=a("gp09"),n=Object(r.a)(i.default,s.a,s.b,!1,null,null,null);e.default=n.exports},L3Dc:function(t,e,a){},cQhO:function(t,e,a){"use strict";a("L3Dc")},k0PO:function(t,e,a){t.exports=a.p+"static/img/video_empty.c4bc188.png"},kJQY:function(t,e,a){"use strict";a.r(e);var s=a("xibL"),i=a("+THw");for(var l in i)["default"].indexOf(l)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(l);a("cQhO");var r=a("gp09"),n=Object(r.a)(i.default,s.a,s.b,!1,null,null,null);e.default=n.exports},xibL:function(t,e,a){"use strict";a.d(e,"a",(function(){return s})),a.d(e,"b",(function(){return i}));var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"custom_video"},[t.showVideoPlayer?[e("video",{ref:"video",attrs:{src:t.src,poster:t.poster,controls:""}}),t._v(" "),t.coverImg&&!t.played?[e("div",{staticClass:"bg-cover"}),t._v(" "),t.coverImg?e("img",{staticClass:"canvas-video",attrs:{src:""+t.$options.filters.formatUrl(t.coverImg)},on:{click:function(e){return e.stopPropagation(),t.play()}}}):t._e(),t._v(" "),e("div",{staticClass:"middle_operate_btn",on:{click:function(e){return e.stopPropagation(),t.play()}}},[e("img",{attrs:{src:a("/NyI")}})])]:t._e()]:e("video",{attrs:{poster:a("k0PO")}})],2)},i=[]},ybhO:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={props:{src:{type:String,default:""},poster:{type:String,default:""},showVideoPlayer:{type:Boolean,default:!0},coverImg:{type:String,default:""}},filters:{formatUrl:function(t){return t?0==t.indexOf("http")?t:""+window.location.origin+t:""}},data:function(){return{played:!1}},methods:{play:function(){this.played=!0,this.$refs.video.play()}}}},ysyt:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=u(a("cLjf")),i=u(a("hDQ3")),l=u(a("bS4n")),r=a("dzbt"),n=u(a("tI4l")),o=u(a("7Qib")),c=u(a("kJQY"));function u(t){return t&&t.__esModule?t:{default:t}}e.default={components:{CustomVideo:c.default},data:function(){return{isOutline:!1,taskType:this.$route.query.taskType,showCascader:!1,cascaderList:[],details:{},completeInfos:[],info:{contentId:"",passStr:"",reason:"",taskId:"",taskType:"",taskDefKey:"",procInstId:"",isEvaluate:"0"},todo:!1,refuse:!1,showReason:!1,auditState:n.default.auditState,isType:n.default.taskType,baseInfo:{createDate:"",orgName:"",name:"",auditState:""},copyrightImages:[],publishArea:{publishToToutiao:!1,toutiaoSecColumn:"",publishToLocal:!1,publishToSquare:!1,squareSecColumn:"",publishToVideo:!1,videoSecColumn:""}}},computed:(0,l.default)({},(0,r.mapState)(["userInfo"]),{from:function(){var t=this.details,e=t.province,a=t.area,s=t.city;return e===s?""+e+a:""+e+s+a},sourceTypeText:function(){var t=this,e="";return n.default.sourceType.forEach((function(a){a.type==t.details.type&&a.value===t.details.sourceType&&(e=a.label)})),e}}),created:function(){"todo"===this.$route.query.from&&(this.todo=!0)},mounted:function(){"fabu"===this.taskType?(this.getTaskDetails(),this.wxinfoByid()):"gaojian"===this.taskType?(this.getDocumentDetails(),this.articleInfoById()):"baoming"===this.taskType&&this.getBaomingDetails()},methods:{onCopy:function(){this.$toast("复制成功")},submitComplete:function(){var t=this;this.$dialog.confirm({title:"确认通过",message:this.details.title}).then((function(){t.completeTask("true")})).catch((function(t){}))},articleInfoById:function(){var t=this;return(0,i.default)(s.default.mark((function e(){var a;return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$api.document.articleInfoById({id:t.$route.params.id});case 2:a=e.sent,t.baseInfo=a.data;case 4:case"end":return e.stop()}}),e,t)})))()},wxinfoByid:function(){var t=this;return(0,i.default)(s.default.mark((function e(){var a;return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$api.task.wxinfoByid({id:t.$route.params.id});case 2:a=e.sent,t.baseInfo=a.data;case 4:case"end":return e.stop()}}),e,t)})))()},onClickLeft:function(){this.$router.go(-1)},getDocumentDetails:function(){var t=this;return(0,i.default)(s.default.mark((function e(){var a,i,l;return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.$route.params.id,e.next=3,t.$api.document.detail({id:a});case 3:return i=e.sent,t.details=i.data||{},t.details.copyrightFile&&(t.copyrightImages=t.details.copyrightFile.split(",")),t.isOutline=!!t.details.whEnrollId,e.next=9,t.$api.todo.seeAuditLog({id:a});case 9:l=e.sent,t.completeInfos=l.data;case 11:case"end":return e.stop()}}),e,t)})))()},getBaomingDetails:function(){var t=this;return(0,i.default)(s.default.mark((function e(){var a,i,l;return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.$route.params.id,e.next=3,t.$api.activity.findById({id:a});case 3:return i=e.sent,t.details=i.data||{},e.next=7,t.$api.todo.seeAuditLog({id:a});case 7:l=e.sent,t.completeInfos=l.data;case 9:case"end":return e.stop()}}),e,t)})))()},getTaskDetails:function(){var t=this;return(0,i.default)(s.default.mark((function e(){var a,i,l,r,n,o,c,u;return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.$route.params.id,e.next=3,t.$api.task.getDetail({id:t.$route.params.id});case 3:if(i=e.sent,t.details=i.data,!((l=t.details.taskColumnRelations)&&l.length>0)){e.next=30;break}r=0;case 8:if(!(r<l.length)){e.next=30;break}n=l[r],o=n.column1,c=n.column2,e.t0=o,e.next=1===e.t0?15:2===e.t0?18:3===e.t0?20:4===e.t0?23:26;break;case 15:return t.publishArea.publishToToutiao=!0,t.publishArea.toutiaoSecColumn=c,e.abrupt("break",27);case 18:return t.publishArea.publishToLocal=!0,e.abrupt("break",27);case 20:return t.publishArea.publishToSquare=!0,t.publishArea.squareSecColumn=c,e.abrupt("break",27);case 23:return t.publishArea.publishToVideo=!0,t.publishArea.videoSecColumn=c,e.abrupt("break",27);case 26:return e.abrupt("break",27);case 27:r++,e.next=8;break;case 30:return e.next=32,t.$api.todo.seeAuditLog({id:a});case 32:u=e.sent,t.completeInfos=u.data;case 34:case"end":return e.stop()}}),e,t)})))()},completeTask:function(t,e){var a=this;return(0,i.default)(s.default.mark((function i(){return s.default.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:if(a.info.contentId=a.$route.params.id,a.info.taskId=a.$route.query.taskId,a.info.taskType=a.taskType,a.info.taskDefKey=a.$route.query.taskDefKey,a.info.passStr=t,a.info.procInstId=a.details.procInstId,"false"!==t){s.next=16;break}if(!o.default.isEmpty(a.info.reason,"请输入驳回原因")){s.next=10;break}return e(!1),s.abrupt("return",!1);case 10:if(3!=a.baseInfo.auditState||"gaojian"!=a.taskType||!o.default.isEmpty(a.info.isEvaluate,"请对一审进行评价")){s.next=13;break}return e(!1),s.abrupt("return",!1);case 13:a.refuse=!0,s.next=17;break;case 16:a.info.reason="";case 17:return s.next=19,a.$api.todo.completeTask((0,l.default)({},a.info));case 19:s.sent,a.refuse=!1,"function"==typeof e&&(a.info.reason="",e()),a.$router.push({name:"TodoList"});case 23:case"end":return s.stop()}}),i,a)})))()},beforeClose:function(t,e){"confirm"===t?this.completeTask("false",e):e()},toDetails:function(){if(this.details.id){var t=this.details;if(delete window._temp_wx_content,1===t.releaseType){var e={title:"视频详情",url:window.location.origin+"/wap/Tasks/VideoDetails/"+t.id};this.openUrl(e)}else{var a=[1,2];2==t.urlType&&(a=[3]);var s={url:t.wechatArticleUrl,img:/^https?:\/\//i.test(t.coverImg)?t.coverImg:""+window.location.origin+t.coverImg,title:t.title?t.title:"",desc:t.digest?t.digest:"",tj_url:window.location.origin+"/wap/Tasks/Detail/"+t.id,user_id:this.userInfo.userId,wechat_share_task_id:t.id,show_share:!1,show_tj:!1,weiboArticleId:t.weiboArticleId?t.weiboArticleId:"",showShareChannel:a,recommendWords:0==this.userInfo.isVisitor?t.recommendWords:"",show_upload_capture:!1};this.startDetail(s)}}},showVideoUrl:function(t){return t.transCodeUrl?t.transCodeUrl:0!=t.url.toLowerCase().indexOf("http")?""+window.location.origin+t.url:""+t.url}}}}}]);