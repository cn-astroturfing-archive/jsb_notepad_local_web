(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{"39TS":function(t,e,a){"use strict";a.d(e,"a",(function(){return o})),a.d(e,"b",(function(){return i}));var o=function(){var t=this,e=t._self._c;return e("div",{staticClass:"upload_capture_wrap"},[e("van-nav-bar",{directives:[{name:"show",rawName:"v-show",value:t.showBtn,expression:"showBtn"}],attrs:{title:"　　"+t.$route.meta.title,"left-arrow":"","right-text":"补录详情",fixed:""},on:{"click-left":t.onClickLeft,"click-right":t.onClickRight}}),t._v(" "),e("div",{staticClass:"form"},[e("div",{staticClass:"row"},[t._m(0),t._v(" "),e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.taskSupplyInfo.taskInfo.title,expression:"taskSupplyInfo.taskInfo.title"}],staticClass:"article_title",staticStyle:{"background-color":"transparent"},attrs:{type:"text",autoHeight:"true",rows:"1",placeholder:"点击搜索文章",disabled:t.$route.query.wechatShareId},domProps:{value:t.taskSupplyInfo.taskInfo.title},on:{click:t.toSearch,input:function(e){e.target.composing||t.$set(t.taskSupplyInfo.taskInfo,"title",e.target.value)}}})]),t._v(" "),e("div",{staticClass:"row"},[t._m(1),t._v(" "),t.articleType?e("span",{staticClass:"text"},[t._v(t._s(t.articleType))]):e("span",{staticClass:"text gray"},[t._v("选择补录文章后自动填充")])]),t._v(" "),t.taskSupplyInfo.supportSupplyType.includes(0)?e("div",{staticClass:"row2"},[t._m(2),t._v(" "),e("div",{staticClass:"uploads"},[e("Upload",{ref:"upload",attrs:{fromSource:1,options:{multiple:!0,forbidDeletion:!0,max:t.taskSupplyInfo.lookingLimitNum}},model:{value:t.form.lookingImages,callback:function(e){t.$set(t.form,"lookingImages",e)},expression:"form.lookingImages"}})],1)]):t._e(),t._v(" "),t.taskSupplyInfo.supportSupplyType.includes(1)?e("div",{staticClass:"row2"},[t._m(3),t._v(" "),e("div",{staticClass:"uploads"},[e("Upload",{ref:"upload",attrs:{fromSource:1,options:{multiple:!0,forbidDeletion:!0,max:t.taskSupplyInfo.commentLimitNum}},model:{value:t.form.commentImages,callback:function(e){t.$set(t.form,"commentImages",e)},expression:"form.commentImages"}})],1)]):t._e(),t._v(" "),t.taskSupplyInfo.supportSupplyType.includes(2)?e("div",{staticClass:"row2"},[t._m(4),t._v(" "),e("div",{staticClass:"uploads"},[e("Upload",{ref:"upload",attrs:{fromSource:1,options:{multiple:!0,forbidDeletion:!0,max:t.taskSupplyInfo.likeLimitNum}},model:{value:t.form.likeImages,callback:function(e){t.$set(t.form,"likeImages",e)},expression:"form.likeImages"}})],1)]):t._e(),t._v(" "),t.taskSupplyInfo.supportSupplyType.includes(3)?e("div",{staticClass:"row2"},[t._m(5),t._v(" "),e("div",{staticClass:"uploads"},[e("Upload",{ref:"upload",attrs:{fromSource:1,options:{multiple:!0,forbidDeletion:!0,max:t.taskSupplyInfo.forwardLimitNum}},model:{value:t.form.forwardImages,callback:function(e){t.$set(t.form,"forwardImages",e)},expression:"form.forwardImages"}})],1)]):t._e(),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:!t.showBtn,expression:"!showBtn"}],staticClass:"keyboard_container"}),t._v(" "),t.allDone?e("div",{staticClass:"bottom_btn finished"},[t._v("已完成")]):e("div",{staticClass:"bottom_btn submit",on:{click:t.onSubmit}},[t._v("提交")])]),t._v(" "),e("integral-limitTip",{model:{value:t.showIntegralTip,callback:function(e){t.showIntegralTip=e},expression:"showIntegralTip"}})],1)},i=[function(){var t=this._self._c;return t("div",{staticClass:"label"},[t("em",[this._v("*")]),this._v("补录文章")])},function(){var t=this._self._c;return t("div",{staticClass:"label"},[t("em",[this._v("*")]),this._v("文章类型")])},function(){var t=this._self._c;return t("div",{staticClass:"label"},[t("em",[this._v("*")]),this._v("在看截图")])},function(){var t=this._self._c;return t("div",{staticClass:"label"},[t("em",[this._v("*")]),this._v("评论截图")])},function(){var t=this._self._c;return t("div",{staticClass:"label"},[t("em",[this._v("*")]),this._v("点赞截图")])},function(){var t=this._self._c;return t("div",{staticClass:"label"},[t("em",[this._v("*")]),this._v("转发截图")])}]},"3oq6":function(t,e,a){(function(t,e){!function(t,a){"use strict";if(!t.setImmediate){var o,i,n,s,r,l=1,u={},c=!1,f=t.document,p=Object.getPrototypeOf&&Object.getPrototypeOf(t);p=p&&p.setTimeout?p:t,"[object process]"==={}.toString.call(t.process)?o=function(t){e.nextTick((function(){m(t)}))}:!function(){if(t.postMessage&&!t.importScripts){var e=!0,a=t.onmessage;return t.onmessage=function(){e=!1},t.postMessage("","*"),t.onmessage=a,e}}()?t.MessageChannel?((n=new MessageChannel).port1.onmessage=function(t){m(t.data)},o=function(t){n.port2.postMessage(t)}):f&&"onreadystatechange"in f.createElement("script")?(i=f.documentElement,o=function(t){var e=f.createElement("script");e.onreadystatechange=function(){m(t),e.onreadystatechange=null,i.removeChild(e),e=null},i.appendChild(e)}):o=function(t){setTimeout(m,0,t)}:(s="setImmediate$"+Math.random()+"$",r=function(e){e.source===t&&"string"==typeof e.data&&0===e.data.indexOf(s)&&m(+e.data.slice(s.length))},t.addEventListener?t.addEventListener("message",r,!1):t.attachEvent("onmessage",r),o=function(e){t.postMessage(s+e,"*")}),p.setImmediate=function(t){"function"!=typeof t&&(t=new Function(""+t));for(var e=new Array(arguments.length-1),a=0;a<e.length;a++)e[a]=arguments[a+1];var i={callback:t,args:e};return u[l]=i,o(l),l++},p.clearImmediate=d}function d(t){delete u[t]}function m(t){if(c)setTimeout(m,0,t);else{var e=u[t];if(e){c=!0;try{!function(t){var e=t.callback,a=t.args;switch(a.length){case 0:e();break;case 1:e(a[0]);break;case 2:e(a[0],a[1]);break;case 3:e(a[0],a[1],a[2]);break;default:e.apply(void 0,a)}}(e)}finally{d(t),c=!1}}}}}("undefined"==typeof self?void 0===t?this:t:self)}).call(this,a("8gug"),a("TDnd"))},"6FM8":function(t,e,a){"use strict";a("KuMH")},"9eEM":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=p(a("cLjf")),i=p(a("hDQ3")),n=p(a("bS4n")),s=a("dzbt"),r=p(a("7Qib")),l=p(a("tI4l")),u=p(a("dEO0")),c=p(a("mF7X")),f=p(a("+1ln"));a("B8O0");function p(t){return t&&t.__esModule?t:{default:t}}e.default={components:{integralLimitTip:f.default,DefaultPop:c.default,Upload:u.default},computed:(0,n.default)({},(0,s.mapState)(["uploadCapture"]),{articleType:function(){return 1===this.taskSupplyInfo.taskInfo.releaseType?"其它":this.taskSupplyInfo.taskInfo.urlType?l.default.urlType[this.taskSupplyInfo.taskInfo.urlType]:""}}),data:function(){return{currentPlatform:{},uploadTypeSelected:"",form:{commentImages:[],likeImages:[],forwardImages:[],lookingImages:[]},uploaded:{comment:0,like:0,reforward:0},popType:"",showBtn:!0,processing:!1,showIntegralTip:!1,taskSupplyInfo:{taskInfo:{},supportSupplyType:[]},wechatShareId:null,allDone:!1}},created:function(){"Search"!==this.$route.query.from?(this.REMOVE_UPLOAD_CAPTURE(),this.wechatShareId=this.$route.query.wechatShareId):this.wechatShareId=this.uploadCapture.wechatShareId,this.wechatShareId&&this.queryTaskSupplyInfo()},mounted:function(){var t=this;return(0,i.default)(o.default.mark((function e(){var a;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$api.userIntegralExceedLimitRemind.isTips({isLoad:!1});case 2:a=e.sent,0==a.data&&(t.showIntegralTip=!0);case 5:case"end":return e.stop()}}),e,t)})))()},methods:(0,n.default)({},(0,s.mapMutations)(["REMOVE_UPLOAD_CAPTURE","SET_UPLOAD_CAPTURE"]),{queryTaskSupplyInfo:function(){var t=this;return(0,i.default)(o.default.mark((function e(){var a;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$api.wechatShareTaskCommon.queryTaskSupplyInfo({wechatShareId:t.wechatShareId});case 2:1!=(a=e.sent).code&&t.$toast.fail(a.message),t.taskSupplyInfo=a.data,["comment","like","forward","looking"].forEach((function(e){t.form[e+"Images"]=a.data[e+"UploadedInfo"].map((function(t){return{path:t.path,reducePath:t.reducePath,id:t.id}}))})),t.allDone=["comment","like","forward","looking","amazingReply"].every((function(t,e,o){return a.data[t+"LimitNum"]==a.data[t+"UploadedNum"]}));case 7:case"end":return e.stop()}}),e,t)})))()},onClickLeft:function(){this.$router.go(-1)},onClickRight:function(){this.$router.push({name:"UploadList"})},onSubmit:function(){var t=this;return(0,i.default)(o.default.mark((function e(){var a;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.processing){e.next=3;break}return t.$toast.fail("请勿重复提交"),e.abrupt("return");case 3:if(t.processing=!0,r.default.isEmpty(t.wechatShareId,"补录文章不能为空")){e.next=18;break}if(!(t.form.commentImages.length<1&&t.form.likeImages.length<1&&t.form.forwardImages.length<1&&t.form.lookingImages.length<1)){e.next=8;break}return t.$toast.fail("至少上传一个截图"),e.abrupt("return");case 8:return e.prev=8,e.next=11,t.$api.wechatShareTaskCommon.multiUpload((0,n.default)({isLoad:!0},t.form,{wechatShareId:t.wechatShareId}));case 11:a=e.sent,t.processing=!1,1==a.code?(t.$toast.success("上传成功"),t.REMOVE_UPLOAD_CAPTURE(),t.onClickLeft()):t.$toast.fail(a.message),e.next=18;break;case 16:e.prev=16,e.t0=e.catch(8);case 18:t.processing=!1;case 19:case"end":return e.stop()}}),e,t,[[8,16]])})))()},toSearch:function(){this.SET_UPLOAD_CAPTURE((0,n.default)({},this.uploadCapture)),this.$router.push({name:"Search",query:{from:"UploadCaptureV1"}})},blur:function(){this.isIOS&&(window.scrollTo(0,1e5),this.showBtn=!0)},focus:function(){if(this.isIOS){for(var t=this.$refs.textarea,e=t.offsetHeight;"app"!==t.id;)e+=t.offsetTop||0,t=t.parentNode;window.scrollTo(0,e),this.showBtn=!1}}}),beforeDestory:function(){}}},B8O0:function(t,e,a){(function(t){var o=void 0!==t&&t||"undefined"!=typeof self&&self||window,i=Function.prototype.apply;function n(t,e){this._id=t,this._clearFn=e}e.setTimeout=function(){return new n(i.call(setTimeout,o,arguments),clearTimeout)},e.setInterval=function(){return new n(i.call(setInterval,o,arguments),clearInterval)},e.clearTimeout=e.clearInterval=function(t){t&&t.close()},n.prototype.unref=n.prototype.ref=function(){},n.prototype.close=function(){this._clearFn.call(o,this._id)},e.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},e.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},e._unrefActive=e.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout((function(){t._onTimeout&&t._onTimeout()}),e))},a("3oq6"),e.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==t&&t.setImmediate||this&&this.setImmediate,e.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==t&&t.clearImmediate||this&&this.clearImmediate}).call(this,a("8gug"))},BLaS:function(t,e,a){"use strict";a.d(e,"a",(function(){return o})),a.d(e,"b",(function(){return i}));var o=function(){var t=this,e=t._self._c;return e("div",{staticClass:"upload_wrap"},[e("van-row",{staticClass:"upload_images",attrs:{gutter:"10"}},[t._l(t.images,(function(o,i){return e("van-col",{key:i,attrs:{span:"8"}},[e("div",{staticClass:"upload_image"},[e("img",{staticClass:"thumb",attrs:{src:o.reducePath,alt:""},on:{click:function(e){return t.imagePreview(o.path)}}}),t._v(" "),o.id?t._e():e("button",{staticClass:"btn_delete",on:{click:function(e){return t.remove(i)}}},[e("img",{attrs:{src:a("qYqz"),alt:""}})])])])})),t._v(" "),t.uploadOptions.multiple&&t.uploadOptions.max>t.images.length||t.images.length<1?e("van-col",{attrs:{span:"8"}},[e("div",{staticClass:"upload_image"},[e("img",{staticClass:"thumb upload",attrs:{src:a("T4bl"),alt:""},on:{click:function(e){t.showUploadTypePop=!0}}})])]):t._e()],2),t._v(" "),e("UploadTip",{attrs:{uploadOptions:t.uploadOptions,uploadCallback:t.uploadCallback},model:{value:t.showUploadTypePop,callback:function(e){t.showUploadTypePop=e},expression:"showUploadTypePop"}})],1)},i=[]},HRck:function(t,e,a){"use strict";a.r(e);var o=a("39TS"),i=a("SKda");for(var n in i)["default"].indexOf(n)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(n);a("6FM8");var s=a("gp09"),r=Object(s.a)(i.default,o.a,o.b,!1,null,null,null);e.default=r.exports},KuMH:function(t,e,a){},OYnx:function(t,e,a){},SKda:function(t,e,a){"use strict";a.r(e);var o=a("9eEM"),i=a.n(o);for(var n in o)["default"].indexOf(n)<0&&function(t){a.d(e,t,(function(){return o[t]}))}(n);e.default=i.a},T4bl:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAMAAACahl6sAAAAXVBMVEUAAACHh4eJiYmKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqIiIiKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqIiIiKioqKioqKioqKioqKiorFa0xbAAAAHnRSTlMAQIC/HwjG8aiMmGVGF82ybuDVdZ+TNOi6EFxMVSpgbgijAAADEElEQVR42u3ciXKiQBSF4W5kk0VRXKOe93/MScaYhEA3S2XMvcz5XkB/LZruWxSGiIiIiIiIiIj+c1aBQSEBxAsYIgxDpGGINAyRhiHSMEQahkgzKWRhBFgwhCF/MYQhDPFjCEMY4scQhjCky6Fapqd1FthIc0i4P+IhWVu1IdUGDctIZ8gS361CjSFbdLD6QjboVGoL2aHbOtIVcoXLUlVItIKT1RQSwG2tKWQNj0hPSASfQk+IhU+gJySHT6onZA+frZ6QBbz0hMzmH5nNNTKbVcsk8LCKQlK4HU2fs5yQHG5Z/zdMxYR4FuDkNuCIXIgJuU6/1F/easWETD8hHvBmKSZk8pl9i78OYkImTlFS3G3lhEyaa9V4qOWEmHyFr45BZHoU+HSTE/KacsJDHJSmT5ngUywpxJjwfRp/MwPE+CoXFTLGHk2h0pAc36Q6Qw5oedEYEm3QFioMWaNDpi8kQKertpALum1KXSEhXPa6QmI4XTSFZHBbnfWE5PBZqgmx8LsoCYk28IsjHSFr9AlUhAToZxWEXOGxyuoRTxU9IWQXuu+EHvejsaCQ2n1sXcHtYF5JCrkACHrGeM4tvKCQMHH+vBXQu8mSExLjzWbknfBk7uSE7Jw7jfNxyIorJaR2P/BwGvSch5CQAh+S1kTVY2XeCQkJE+d05wU+O/MgIyR2TnduQ7dXIkJ2aDqbD1tNIbV7TU2hKKRAS/WRqCgkTJz7jgKaQmLnslommkIy9zdcQFFI5d6c76EopIDLJoeikDCBm6aQGD8bYhdNzwrJ8NMhaHpSSIV5hBSYR0iZzCQkxnjbNGgSEJJhrLRrmvjrIRUGaB235IUUGOtsJIaMv9BrIzIkxkixERmSYSwrMqTCWLGRGGIx2lJiSHnEaBeJIQuMdxYYkmECIy8kxzxCLOYRUh5nErKYaPB7xNHU93JvEe9FCebyekOGMOSOIQxhCEMYwhCGvGLI7EMmH6wY4sGQp4fYn/HrIW1KpygMYQhDGMIQhjCEIQxhyIxD7L8x9eMNERERERERERFRyx9tlwFD2OO5xAAAAABJRU5ErkJggg=="},dEO0:function(t,e,a){"use strict";a.r(e);var o=a("BLaS"),i=a("jy3s");for(var n in i)["default"].indexOf(n)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(n);a("vIVH");var s=a("gp09"),r=Object(s.a)(i.default,o.a,o.b,!1,null,null,null);e.default=r.exports},jy3s:function(t,e,a){"use strict";a.r(e);var o=a("mk2B"),i=a.n(o);for(var n in o)["default"].indexOf(n)<0&&function(t){a.d(e,t,(function(){return o[t]}))}(n);e.default=i.a},mk2B:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=s(a("vBSJ")),i=s(a("6ZY3"));a("sRnv");var n=s(a("3vVk"));a("d8ex");function s(t){return t&&t.__esModule?t:{default:t}}e.default={components:{UploadTip:n.default},props:{value:{type:Array,default:function(){return[]}},fromSource:{type:Number,default:function(){return null}},options:{type:Object,defalut:function(){}}},computed:{uploadOptions:function(){var t={multiple:!1,interface_type:"img",form_source:this.fromSource,max:3,isMultiUpload:!1};return(0,i.default)({},t,this.options)}},data:function(){return{images:this.value,showUploadTypePop:!1}},watch:{value:function(t){this.images=t},images:function(t){this.$emit("input",t)}},methods:{imagePreview:function(t){(0,o.default)([t])},remove:function(t){this.images.splice(t,1)},uploadCallback:function(t){t.filePath&&t.filePath.match(/^\/files\//)?this.images.push({path:t.filePath,reducePath:t.filePath,id:null}):this.$toast.fail("上传失败, 请重新上传")}}}},qYqz:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAcBAMAAACAI8KnAAAAMFBMVEUAAAB4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHj7/s+fAAAAD3RSTlMA7TOlPsrDYdyKIZVtRyey1Y1gAAAAoklEQVQY02MAAZZp8h8zHRiggL3/PxD8KIDwuOL/g8HXBWCu438oEAFr/A8HF4DchQiuHJAbj+B+BRr7HwkUMHAAyXB5IGEDxA0M/kAyQfH//88gI78wzAeSn5nk/xsoAhk/GfKBJJANFAHS3xiAJEh6gyKI/sgAMdIAKAkCaFw0xWhGoVmEcAYTyBlojkTzAqoH0byPFjioQYcWsBjBjhYpACdyCPzKSFhRAAAAAElFTkSuQmCC"},sRnv:function(t,e,a){"use strict";a.r(e);a("0GPk"),a("00cZ"),a("E8Wu"),a("HVE+"),a("Oe98"),a("lycV"),a("6B5o"),a("fBNp"),a("UZK1"),a("KHSm")},vIVH:function(t,e,a){"use strict";a("OYnx")}}]);