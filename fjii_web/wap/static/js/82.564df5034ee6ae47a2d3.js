(window.webpackJsonp=window.webpackJsonp||[]).push([[82],{"9MQ3":function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=c(o("cLjf")),a=c(o("hDQ3")),s=c(o("bS4n")),i=o("dzbt"),r=c(o("7Qib"));function c(t){return t&&t.__esModule?t:{default:t}}e.default={components:{},computed:(0,s.default)({},(0,i.mapState)(["userInfo","certInfo"]),{certState:function(){return 0===this.userInfo.isVisitor?"已认证":null===this.certInfo?"去认证":1===this.certInfo.status?"审核中":2===this.certInfo.status?"审核通过":3===this.certInfo.status?"审核不通过":void 0},versionName:function(){return"V"+this.version}}),data:function(){return{showCloseAccountTipDialog:!1,verifyInfo:{type:"",valude:""},selectVerifyTypeDialog:!1,showVerifyFormDialog:!1,showPopup:!1,showlogOff:!1,version:"",sendingSmsCode:!1,sendSmsCountDownTip:"",closeAccountParam:{phoneNum:"",smsCode:""},authRejectDialog:{show:!1,message:""}}},watch:{"closeAccountParam.smsCode":function(t){t.length>6&&(this.closeAccountParam.smsCode=t.slice(0,6))}},created:function(){this.queryUserAuthent(),this.setVersion()},methods:(0,s.default)({goToThird:function(t){window.open(t)}},(0,i.mapMutations)(["SET_USERINFO","SET_CERT_INFO","RESET_STATE"]),{onClickLeft:function(){this.$router.go(-1)},logout:function(){var t=this;return(0,a.default)(n.default.mark((function e(){return n.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$api.login.logout();case 2:e.sent,t.RESET_STATE(),t.$router.push({name:"Login"});case 5:case"end":return e.stop()}}),e,t)})))()},deleteCookie:function(t){document.cookie=t+"=;}"},queryUserAuthent:function(){var t=this;return(0,a.default)(n.default.mark((function e(){var o;return n.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$api.authentication.queryUserAuthent({isLoad:!1});case 2:o=e.sent,t.SET_CERT_INFO(o.data),0!==t.userInfo.isVisitor&&o.data&&2===o.data.status&&t.$dialog.confirm({message:"你的认证已通过, 是否重新登录更新信息？",confirmButtonText:"去登录"}).then((function(){t.logout()})).catch((function(){}));case 5:case"end":return e.stop()}}),e,t)})))()},backUserAgreement:function(){var t=this;this.$dialog.confirm({message:"尊敬的用户，您好\n撤回授权同意隐私政策后，您将退出当前账号，以游客身份进行APP浏览",confirmButtonText:"确定"}).then((function(){t.RESET_STATE(),t.userDisagreement(),t.$router.push({name:"Login"})})).catch((function(){}))},updateVersion:function(){var t=this;this.checkVersion((function(e){"0"===e.code&&("false"!==e.data||t.$toast("已是最新版本"))}))},toCertification:function(){"已认证"!==this.certState&&this.certInfo&&3===this.certInfo.status?this.authRejectDialog={show:!0,message:this.certInfo.result}:this.$router.push({name:"Certification",query:{status:this.certInfo?this.certInfo.status:""}})},setVersion:function(){var t=this;this.getAppVersion((function(e){"0"===e.code&&(t.version=e.versionName||e.data)}))},clearCache:function(){var t=this;this.$dialog.confirm({message:"确认要清除缓存吗？",confirmButtonText:"确定"}).then((function(e){try{t.clearDiskCache()}catch(t){}t.$toast.success("清理完毕")})).catch((function(){}))},beforeClose:function(t,e){this.showVerifyFormDialog?e(!1):e(!0)},dialogConfirm:function(){var t=this;return(0,a.default)(n.default.mark((function e(){var o;return n.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.verifyInfo.value?t.verifyInfo.value:""){e.next=4;break}return t.$toast.fail("请输入"+(1==t.verifyInfo.type?"密码":"验证码")),e.abrupt("return");case 4:return e.next=6,t.$api.user.beforeModifyPhoneValid({isLoad:!1,type:t.verifyInfo.type,value:1==t.verifyInfo.type?r.default.SHA1(t.verifyInfo.value):t.verifyInfo.value});case 6:1==(o=e.sent).code?(t.$toast.success("验证通过"),setTimeout((function(){t.showVerifyFormDialog=!1,t.$router.push({name:"ModPhone",query:{token:o.data}})}),1500)):t.$toast.fail(o.message);case 8:case"end":return e.stop()}}),e,t)})))()},dialogCancel:function(){this.showVerifyFormDialog=!1},changeVerifyType:function(t){var e=this;return(0,a.default)(n.default.mark((function o(){var a;return n.default.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(e.verifyInfo={type:t,valude:""},2!=t){o.next=8;break}return o.next=4,e.$api.login.verificationCode();case 4:1===(a=o.sent).code?(e.$toast.success(e.userInfo.telephone+"短信验证码已发送"),setTimeout((function(){e.selectVerifyTypeDialog=!1,e.showVerifyFormDialog=!0}),2500)):e.$toast.fail(a.message),o.next=10;break;case 8:e.selectVerifyTypeDialog=!1,e.showVerifyFormDialog=!0;case 10:case"end":return o.stop()}}),o,e)})))()},beforeCloseAccountDialog:function(t,e){this.showCloseAccountTipDialog?e(!1):e(!0)},closeAccountDialogConfirm:function(){var t=this;return(0,a.default)(n.default.mark((function e(){return n.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.closeAccountParam.phoneNum){e.next=3;break}return t.$toast.fail("请输入手机号"),e.abrupt("return");case 3:if(t.closeAccountParam.smsCode){e.next=6;break}return t.$toast.fail("请输入短信验证码"),e.abrupt("return");case 6:return e.next=8,t.$api.user.closeAccount({phoneNum:r.default.defaultEncryptRetBase64(t.closeAccountParam.phoneNum),smsCode:t.closeAccountParam.smsCode});case 8:1==e.sent.code&&(t.RESET_STATE(),t.$router.push({name:"Login"}));case 10:case"end":return e.stop()}}),e,t)})))()},closeAccountDialogCancel:function(){this.showCloseAccountTipDialog=!1},sendMsgCode:function(){var t=this;return(0,a.default)(n.default.mark((function e(){var o,a;return n.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.sendingSmsCode&&!r.default.isEmpty(t.closeAccountParam.phoneNum,"请输入手机号码")){e.next=2;break}return e.abrupt("return");case 2:if(r.default.isMobile(t.closeAccountParam.phoneNum,"请输入正确的手机号码")){e.next=4;break}return e.abrupt("return");case 4:return e.prev=4,t.$toast.loading(),t.sendingSmsCode=!0,e.next=9,t.$api.login.getPhoneNum({isLoad:!1,phoneNum:r.default.defaultEncryptRetBase64(t.closeAccountParam.phoneNum)});case 9:"成功"===(o=e.sent).message?(t.$toast.success("短信验证码已发送"),a=60,t.sendSmsCountDownTip=a+"S",t.time=setInterval((function(){1===a?(t.sendingSmsCode=!1,t.sendSmsCountDownTip="",clearInterval(t.time)):(--a,t.sendSmsCountDownTip=a+"S")}),1e3)):(t.sendingSmsCode=!1,t.$toast.success(o.message)),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(4),setTimeout((function(){t.$toast.clear(),t.sendingSmsCode=!1}),3e3);case 16:case"end":return e.stop()}}),e,t,[[4,13]])})))()},closeAuthRejectDialog:function(t,e){this.authRejectDialog.show=!1,"confirm"==t?(this.$router.push({name:"Certification",query:{status:this.certInfo.status}}),e()):e(!1)}})}},AAyF:function(t,e,o){"use strict";o.d(e,"a",(function(){return n})),o.d(e,"b",(function(){return a}));var n=function(){var t=this,e=t._self._c;return e("div",{staticClass:"my_userinfo_wrap"},[e("van-nav-bar",{attrs:{title:t.$route.meta.title,"left-arrow":"",fixed:"","right-text":"  "},on:{"click-left":t.onClickLeft}}),t._v(" "),e("div",{staticClass:"userinfo_container"},[e("van-cell-group",{attrs:{title:"",border:!1}},[e("van-cell",{attrs:{title:"帐号",value:t.userInfo.username}}),t._v(" "),"已认证"!==t.certState?e("van-cell",{attrs:{title:"姓名","is-link":"",value:t.userInfo.name,to:{name:"ModNickname"}}}):e("van-cell",{attrs:{title:"姓名",value:t.userInfo.name}}),t._v(" "),e("van-cell",{attrs:{title:"修改密码","is-link":"",to:{name:"ModPasswordNeedOld"}}}),t._v(" "),e("van-cell",{attrs:{title:"修改手机号码",value:t.userInfo.telephone,"is-link":""},on:{click:function(e){t.selectVerifyTypeDialog=!0}}}),t._v(" "),e("van-cell",{attrs:{title:"举报投诉","is-link":"",to:{name:"Tipoff"}}}),t._v(" "),e("van-cell",{attrs:{value:t.certState,"is-link":""},on:{click:t.toCertification}},[e("div",{attrs:{slot:"title"},slot:"title"},[t._v("认证信息")])]),t._v(" "),e("van-cell",{attrs:{title:"用户协议","is-link":"",to:{name:"Protocol"}}}),t._v(" "),e("van-cell",{attrs:{title:"隐私政策摘要","is-link":"",to:{name:"SecretSummary"}}}),t._v(" "),e("van-cell",{attrs:{title:"基本功能隐私政策","is-link":"",to:{name:"SecretBase"}}}),t._v(" "),e("van-cell",{attrs:{title:"完整版隐私政策","is-link":"",to:{name:"Secret"}}}),t._v(" "),e("van-cell",{attrs:{title:"撤回授权同意隐私政策","is-link":""},on:{click:t.backUserAgreement}}),t._v(" "),e("van-cell",{attrs:{title:"联系我们/问题在线咨询","is-link":"",to:{name:"Contact"}}}),t._v(" "),e("van-cell",{attrs:{title:"已收集个人信息清单","is-link":"",to:{name:"GatherInformation"}}}),t._v(" "),e("van-cell",{attrs:{title:"与第三方共享个人信息清单","is-link":"",to:{name:"SharedInformation"}}}),t._v(" "),e("van-cell",{attrs:{title:"版本更新",value:t.versionName,"is-link":""},on:{click:t.updateVersion}}),t._v(" "),t.isAndroid?e("van-cell",{attrs:{title:"APP权限管理","is-link":"",to:{name:"PermissionManage"}}}):t._e(),t._v(" "),e("van-cell",{attrs:{title:"注销账号",label:"注销后账号信息将清空"},on:{click:function(e){t.showlogOff=!0}}}),t._v(" "),e("van-cell",{attrs:{title:"清除缓存","is-link":"",label:"包括：图片、数据等"},on:{click:t.clearCache}})],1),t._v(" "),e("van-cell-group",{attrs:{title:"",border:!1}},[e("van-cell",{on:{click:function(e){t.showPopup=!0}},scopedSlots:t._u([{key:"title",fn:function(){return[e("div",{staticClass:"btn_logout"},[t._v("\n                            退出登录\n                        ")])]},proxy:!0}])})],1)],1),t._v(" "),e("van-popup",{attrs:{round:"",position:"bottom"},model:{value:t.showPopup,callback:function(e){t.showPopup=e},expression:"showPopup"}},[e("div",{staticClass:"userinfo_btns"},[e("van-button",{attrs:{block:"",type:"info"},on:{click:t.logout}},[t._v("退出登录")]),t._v(" "),e("van-button",{staticClass:"g_btn_gray",attrs:{block:"",type:"default"},on:{click:function(e){t.showPopup=!1}}},[t._v("取消")])],1)]),t._v(" "),e("van-popup",{attrs:{round:"",position:"bottom"},model:{value:t.showlogOff,callback:function(e){t.showlogOff=e},expression:"showlogOff"}},[e("div",{staticClass:"userinfo_btns"},[e("van-button",{attrs:{block:"",type:"danger",icon:"warning-o"},on:{click:function(e){t.showCloseAccountTipDialog=!0}}},[t._v("确认注销当前账号")]),t._v(" "),e("van-button",{staticClass:"g_btn_gray",attrs:{block:"",type:"default"},on:{click:function(e){t.showlogOff=!1}}},[t._v("取消")])],1)]),t._v(" "),e("van-dialog",{attrs:{title:"确认注销当前账号","close-on-click-overlay":"","show-cancel-button":"","show-confirm-button":"",confirmButtonText:"确认注销",confirmButtonColor:"#ee0a24",beforeClose:t.beforeCloseAccountDialog},on:{cancel:t.closeAccountDialogCancel,confirm:t.closeAccountDialogConfirm},model:{value:t.showCloseAccountTipDialog,callback:function(e){t.showCloseAccountTipDialog=e},expression:"showCloseAccountTipDialog"}},[e("div",{staticClass:"close_account_dialog_form"},[e("div",{staticClass:"form_item"},[e("div",{staticClass:"input_div"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.closeAccountParam.phoneNum,expression:"closeAccountParam.phoneNum"}],attrs:{type:"text",placeholder:"请输入当前账号绑定的手机号"},domProps:{value:t.closeAccountParam.phoneNum},on:{input:function(e){e.target.composing||t.$set(t.closeAccountParam,"phoneNum",e.target.value)}}})]),t._v(" "),e("div",{staticClass:"input_div"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.closeAccountParam.smsCode,expression:"closeAccountParam.smsCode"}],attrs:{type:"text",placeholder:"请输入短信验证码"},domProps:{value:t.closeAccountParam.smsCode},on:{input:function(e){e.target.composing||t.$set(t.closeAccountParam,"smsCode",e.target.value)}}}),t._v(" "),e("div",{staticClass:"fetch_yzm_btn",class:{disabled_yzm:t.sendingSmsCode},on:{click:t.sendMsgCode}},[e("span",[t._v("获取"+t._s(t.sendingSmsCode&&t.sendSmsCountDownTip?`(${t.sendSmsCountDownTip})`:""))])])]),t._v(" "),e("div",{staticClass:"other_tip_div"},[t._v("\n                        当前操作将"),e("span",{staticClass:"important_tip"},[t._v("删除")]),t._v("该"),e("span",{staticClass:"important_tip"},[t._v("账号")]),t._v("下所有数据（"),e("span",{staticClass:"important_tip"},[t._v("积分")]),t._v("、稿件、分享记录等），是否注销？\n                    ")])])])]),t._v(" "),e("van-dialog",{attrs:{title:"安全验证","close-on-click-overlay":"","show-cancel-button":!1,"show-confirm-button":!1},model:{value:t.selectVerifyTypeDialog,callback:function(e){t.selectVerifyTypeDialog=e},expression:"selectVerifyTypeDialog"}},[e("div",{staticClass:"select_verify_type"},[e("van-cell-group",{attrs:{title:"",border:!1}},[e("van-cell",{attrs:{title:"密码验证","is-link":""},on:{click:function(e){return t.changeVerifyType(1)}}}),t._v(" "),e("van-cell",{attrs:{title:`短信验证码验证（${t.userInfo.telephone}）`,"is-link":""},on:{click:function(e){return t.changeVerifyType(2)}}})],1)],1)]),t._v(" "),e("van-dialog",{attrs:{title:"安全验证","close-on-click-overlay":"","show-cancel-button":"","show-confirm-button":"",confirmButtonText:"确定",confirmButtonColor:"#FF6601",beforeClose:t.beforeClose},on:{cancel:t.dialogCancel,confirm:t.dialogConfirm},model:{value:t.showVerifyFormDialog,callback:function(e){t.showVerifyFormDialog=e},expression:"showVerifyFormDialog"}},[e("div",{staticClass:"verify_code_dialog_form"},[e("div",{staticClass:"form_item"},[e("div",{staticClass:"input_div"},[1==t.verifyInfo.type?e("input",{directives:[{name:"model",rawName:"v-model",value:t.verifyInfo.value,expression:"verifyInfo.value"}],attrs:{type:"password",placeholder:"请输入密码"},domProps:{value:t.verifyInfo.value},on:{input:function(e){e.target.composing||t.$set(t.verifyInfo,"value",e.target.value)}}}):t._e(),t._v(" "),2==t.verifyInfo.type?e("input",{directives:[{name:"model",rawName:"v-model",value:t.verifyInfo.value,expression:"verifyInfo.value"}],attrs:{type:"text",placeholder:"请输入短信验证码"},domProps:{value:t.verifyInfo.value},on:{input:function(e){e.target.composing||t.$set(t.verifyInfo,"value",e.target.value)}}}):t._e()])])])]),t._v(" "),e("van-dialog",{attrs:{title:"驳回原因",showCancelButton:!0,showConfirmButton:!0,closeOnClickOverlay:!1,cancelButtonText:"取消",cancelButtonColor:"#4c4c4c",confirmButtonColor:"#4485ED",confirmButtonText:"重新认证",beforeClose:t.closeAuthRejectDialog},model:{value:t.authRejectDialog.show,callback:function(e){t.$set(t.authRejectDialog,"show",e)},expression:"authRejectDialog.show"}},[e("div",{staticClass:"dialog_auth_reject_reason"},[t._v("\n\t\t\t\t"+t._s(t.authRejectDialog.message)+"\n\t\t\t")])])],1)},a=[]},"Uj/n":function(t,e,o){"use strict";o.r(e);var n=o("9MQ3"),a=o.n(n);for(var s in n)["default"].indexOf(s)<0&&function(t){o.d(e,t,(function(){return n[t]}))}(s);e.default=a.a},cXTd:function(t,e,o){"use strict";o.r(e);var n=o("AAyF"),a=o("Uj/n");for(var s in a)["default"].indexOf(s)<0&&function(t){o.d(e,t,(function(){return a[t]}))}(s);o("vfpi");var i=o("gp09"),r=Object(i.a)(a.default,n.a,n.b,!1,null,null,null);e.default=r.exports},sXbE:function(t,e,o){},vfpi:function(t,e,o){"use strict";o("sXbE")}}]);